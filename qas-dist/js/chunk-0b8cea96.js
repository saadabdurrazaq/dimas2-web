(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b8cea96"],{1148:function(e,t,a){"use strict";var n=a("a691"),r=a("577e"),o=a("1d80");e.exports=function(e){var t=r(o(this)),a="",l=n(e);if(l<0||l==1/0)throw RangeError("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(t+=t))1&l&&(a+=t);return a}},"1add":function(e,t,a){},"408a":function(e,t){var a=1..valueOf;e.exports=function(e){return a.call(e)}},ab5a:function(e,t,a){"use strict";a.r(t);a("b0c0"),a("4de4");var n=a("7a23"),r={class:"intro-y col-span-12 lg:col-span-12"},o={class:"p-5"},l={class:"flex justify-between items-center mb-2"},c=Object(n["createVNode"])("p",{class:"font-bold"},"Tahun Periode",-1),i=Object(n["createVNode"])("i",{class:"el-icon-refresh text-xl font-bold"},null,-1),u={key:1,class:"text-center text-lg text-gray-600"};function d(e,t,a,d,b,s){var f=Object(n["resolveComponent"])("el-button"),p=Object(n["resolveComponent"])("el-option"),j=Object(n["resolveComponent"])("el-select"),O=Object(n["resolveComponent"])("table-raport-distribution"),v=Object(n["resolveComponent"])("el-tab-pane"),m=Object(n["resolveComponent"])("el-tabs"),k=Object(n["resolveComponent"])("el-table-column"),h=Object(n["resolveComponent"])("el-table"),g=Object(n["resolveComponent"])("document-form"),w=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createBlock"])("div",r,[Object(n["withDirectives"])(Object(n["createVNode"])(g,{title:"Hasil Penilaian Kinerja",useVerificationButtons:!1},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("div",o,[Object(n["createVNode"])("div",l,[c,Object(n["createVNode"])(f,{onClick:e.refreshTable,size:"small"},{default:Object(n["withCtx"])((function(){return[i]})),_:1},8,["onClick"])]),Object(n["createVNode"])(j,{modelValue:e.selectPeriod,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selectPeriod=t}),placeholder:"Select",class:"w-full",onChange:e.handleChangePeriode},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.options,(function(e){var t=e.id,a=e.period;return Object(n["openBlock"])(),Object(n["createBlock"])(p,{key:t,label:a,value:a},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"]),null!==e.activeName?(Object(n["openBlock"])(),Object(n["createBlock"])(m,{key:0,modelValue:e.activeName,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.activeName=t}),class:"w-full",stretch:!0,onTabClick:e.handleClick},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(v,{label:"Kuartal 1",name:"kuartal_1"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(m,{type:"border-card",modelValue:e.region,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.region=t}),onTabClick:e.handleClickRegion},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.regions,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])(v,{key:t.region.code,label:t.region.name,name:t.region.code},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(O,{isScoreFinalized:e.tableData.is_score_finalized,tableData:e.tableData.data,filter:e.filter,onLazyLoad:e.loadTable},null,8,["isScoreFinalized","tableData","filter","onLazyLoad"])]})),_:2},1032,["label","name"])})),128))]})),_:1},8,["modelValue","onTabClick"])]})),_:1}),Object(n["createVNode"])(v,{label:"Kuartal 2",name:"kuartal_2"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(m,{type:"border-card",modelValue:e.region,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.region=t}),onTabClick:e.handleClickRegion},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.regions,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])(v,{key:t.region.code,label:t.region.name,name:t.region.code},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(O,{isScoreFinalized:e.tableData.is_score_finalized,tableData:e.tableData.data,filter:e.filter,onLazyLoad:e.loadTable},null,8,["isScoreFinalized","tableData","filter","onLazyLoad"])]})),_:2},1032,["label","name"])})),128))]})),_:1},8,["modelValue","onTabClick"])]})),_:1}),Object(n["createVNode"])(v,{label:"Kuartal 3",name:"kuartal_3"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(m,{type:"border-card",modelValue:e.region,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.region=t}),onTabClick:e.handleClickRegion},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.regions,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])(v,{key:t.region.code,label:t.region.name,name:t.region.code},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(O,{isScoreFinalized:e.tableData.is_score_finalized,tableData:e.tableData.data,filter:e.filter,onLazyLoad:e.loadTable},null,8,["isScoreFinalized","tableData","filter","onLazyLoad"])]})),_:2},1032,["label","name"])})),128))]})),_:1},8,["modelValue","onTabClick"])]})),_:1}),Object(n["createVNode"])(v,{label:"Kuartal 4",name:"kuartal_4"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(m,{type:"border-card",modelValue:e.region,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.region=t}),onTabClick:e.handleClickRegion},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.regions,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])(v,{key:t.region.code,label:t.region.name,name:t.region.code},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(O,{isScoreFinalized:e.tableData.is_score_finalized,tableData:e.tableData.data,filter:e.filter,onLazyLoad:e.loadTable},null,8,["isScoreFinalized","tableData","filter","onLazyLoad"])]})),_:2},1032,["label","name"])})),128))]})),_:1},8,["modelValue","onTabClick"])]})),_:1}),Object(n["createVNode"])(v,{label:"Rata-Rata",name:"average"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(m,{type:"border-card",modelValue:e.region,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.region=t}),onTabClick:e.handleClickRegion},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.regions,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])(v,{key:t.region.code,label:t.region.name,name:t.region.code},{default:Object(n["withCtx"])((function(){var t;return[(null===(t=e.tableData.data)||void 0===t?void 0:t.length)>0?(Object(n["openBlock"])(),Object(n["createBlock"])(h,{key:0,data:e.tableData.data,"empty-text":"Belum Ada Hasil Nilai Untuk Saat ini",border:"",style:{width:"100%"},lazy:"",load:e.loadTable,"row-class-name":e.tableRowClassName},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(k,{prop:"nama_kuartal",label:"Nama Kuartal",width:"230"}),Object(n["createVNode"])(k,{prop:"score",label:"Skor"})]})),_:1},8,["data","load","row-class-name"])):(Object(n["openBlock"])(),Object(n["createBlock"])("div",u," Masih belum ada nilai untuk saat ini "))]})),_:2},1032,["label","name"])})),128))]})),_:1},8,["modelValue","onTabClick"])]})),_:1})]})),_:1},8,["modelValue","onTabClick"])):Object(n["createCommentVNode"])("",!0)])]})),_:1},512),[[w,e.loading]])])}var b=a("ade3"),s=a("1da1"),f=(a("159b"),a("99af"),a("d3b7"),a("3ca3"),a("ddb0"),a("d81d"),a("b680"),a("ac1f"),a("1276"),a("96cf"),a("c45b")),p=a("6c02"),j=a("730f"),O=a("c953"),v="/evaluation-aspect-settings",m=function(e){return O["a"].get("".concat(v,"/raport-distribution?").concat(e))},k={class:"text-right"},h={class:"text-right"},g={class:"text-right"},w={key:1},_={key:2,class:"text-center text-lg text-gray-600"},x={key:3,class:"text-center"},C=Object(n["createVNode"])("hr",null,null,-1);function y(e,t,a,r,o,l){var c,i,u,d=Object(n["resolveComponent"])("el-table-column"),b=Object(n["resolveComponent"])("el-table");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[(null===(c=e.tableData)||void 0===c?void 0:c.length)>0?(Object(n["openBlock"])(),Object(n["createBlock"])(b,{key:0,data:e.tableData,"empty-text":"Belum ada hasil hilai untuk saat ini",border:"",style:{width:"100%"},lazy:"",load:e.lazyLoadTable,"span-method":e.arraySpanMethod,"row-class-name":e.tableRowClassName},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(d,{prop:"evaluation_aspect_type",label:"Aspek Penilaian",width:"230"}),Object(n["createVNode"])(d,{prop:"bobot",label:"Bobot(%)",width:"180"},{default:Object(n["withCtx"])((function(e){return[Object(n["createVNode"])("div",k,Object(n["toDisplayString"])(e.row.bobot),1)]})),_:1}),Object(n["createVNode"])(d,{prop:"score",label:"Nilai(%)"},{default:Object(n["withCtx"])((function(e){return[Object(n["createVNode"])("div",h,Object(n["toDisplayString"])(e.row.score),1)]})),_:1}),Object(n["createVNode"])(d,{prop:"final_score",label:"Nilai Akhir(%)"},{default:Object(n["withCtx"])((function(e){return[Object(n["createVNode"])("div",g,Object(n["toDisplayString"])(e.row.final_score),1)]})),_:1})]})),_:1},8,["data","load","span-method","row-class-name"])):Object(n["createCommentVNode"])("",!0),(null===(i=e.tableData)||void 0===i?void 0:i.length)>0?(Object(n["openBlock"])(),Object(n["createBlock"])("small",w,"* Perubahan status skoring (keputusan untuk distributor) diberikan pada Kuartal 2 dan Kuartal 4")):(Object(n["openBlock"])(),Object(n["createBlock"])("div",_," Masih belum ada nilai untuk saat ini ")),(null===(u=e.tableData)||void 0===u?void 0:u.length)>0&&1==e.isScoreFinalized?(Object(n["openBlock"])(),Object(n["createBlock"])("div",x,[C,Object(n["createVNode"])("button",{onClick:t[1]||(t[1]=function(){return e.exportEvaluationData&&e.exportEvaluationData.apply(e,arguments)}),class:"btn btn-primary px-4 py-2 mt-3"},"Download Rapor Distributor")])):Object(n["createCommentVNode"])("",!0)],64)}var V=a("8afd"),N=a("5502"),B=Object(n["defineComponent"])({props:{tableData:{type:Array},filter:{type:Array},isScoreFinalized:{type:Boolean}},emits:["lazyLoad"],setup:function(e,t){var a=t.emit,n=function(){a("lazyLoad")},r=function(t){t.row,t.column;var a=t.rowIndex,n=t.columnIndex;if(a===e.tableData.length-1||a===e.tableData.length-2||a===e.tableData.length-3){if(0===n){var r=1,o=3;return[r,o]}if(3!==n)return[0,0]}},o=function(t){t.row;var a=t.rowIndex;return a===e.tableData.length-1||a===e.tableData.length-2||a===e.tableData.length-3?"footer-table":""},l=Object(p["c"])(),c=Object(N["d"])(),i=c.state.auth.user,u=Object(V["e"])("env"),d=function(){var t=e.filter[0],a=null==i.distributor?l.params.distributor_id:t.distributor,n="?evaluationPeriod=".concat(t.periodId,"&kuartal=").concat(t.kuartal,"&regionCode=").concat(t.region,"&distributor=").concat(a);window.open("".concat(u["VUE_APP_API_ENDPOINT"],"/export-evaluation-raport").concat(n),"_blank")};return{arraySpanMethod:r,lazyLoadTable:n,tableRowClassName:o,exportEvaluationData:d}}}),D=a("6b0d"),z=a.n(D);const F=z()(B,[["render",y]]);var R=F,T=a("4360"),L=Object(n["defineComponent"])({components:{DocumentForm:f["a"],TableRaportDistribution:R},setup:function(){var e,t=Object(n["ref"])(!1),a=Object(n["ref"])((new Date).getFullYear()),r=Object(n["ref"])(null),o=Object(n["ref"])([]),l=Object(n["ref"])("kuartal_1"),c=Object(n["ref"])(null),i=Object(n["ref"])(null),u=Object(n["ref"])([]),d=Object(n["ref"])(null),f=Object(T["b"])(),v=Object(n["computed"])((function(){return f.state.auth.user})),k=Object(p["c"])();Object(n["onBeforeMount"])(Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.value=!0,t.value=!1;case 2:case"end":return e.stop()}}),e)}))));var h=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(j["b"])();case 3:t=e.sent,n=t.data,o.value=n,n.forEach((function(e,t){e.is_active&&(r.value=e.id,a.value=e.period,c.value=e.active_kuartal,l.value="kuartal_"+e.active_kuartal,i.value="kuartal_"+e.active_kuartal)})),e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),g=function(){y()},w=Object(n["ref"])([]),_=Object(n["ref"])([]),x=(Object(n["ref"])(0),Object(n["ref"])(null)),C=Object(n["ref"])(null),y=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("average"!==l.value){e.next=8;break}t="kuartal=kuartal_1&period=".concat(a.value,"&region=").concat(d.value,"&distributor=").concat(x.value),n="kuartal=kuartal_2&period=".concat(a.value,"&region=").concat(d.value,"&distributor=").concat(x.value),o="kuartal=kuartal_3&period=".concat(a.value,"&region=").concat(d.value,"&distributor=").concat(x.value),i="kuartal=kuartal_4&period=".concat(a.value,"&region=").concat(d.value,"&distributor=").concat(x.value),Promise.all([m(t),m(n),m(o),m(i)]).then((function(e){var t=e.map((function(e){return e.data.total_score?parseFloat(e.data.total_score):0})),a=t.reduce((function(e,t){return e+t}))/4;_.value=0===a?{data:[]}:{data:[{nama_kuartal:"kuartal 1",score:0!==t[0]?t[0]:"-"},{nama_kuartal:"kuartal 2",score:0!==t[1]?t[1]:"-"},{nama_kuartal:"kuartal 3",score:0!==t[2]?t[2]:"-"},{nama_kuartal:"kuartal 4",score:0!==t[3]?t[3]:"-"},{nama_kuartal:"Rata-Rata (%)",score:a.toFixed(2)}]}})).catch((function(e){})),e.next=10;break;case 8:return e.next=10,m("kuartal=".concat(l.value,"&period=").concat(a.value,"&region=").concat(d.value,"&distributor=").concat(x.value)).then((function(e){var t,a;(e.data.length>0||e.data.data.length>0)&&e.data.data.push({evaluation_aspect_type:e.data.is_score_finalized?"Total Nilai":"Total Nilai (Sementara)",final_score:e.data.total_score?parseFloat(e.data.total_score).toFixed(2):0},{evaluation_aspect_type:"Status Nilai Skoring",final_score:null!==(t=e.data.final_approval_status)&&void 0!==t?t:"-"},{evaluation_aspect_type:"Catatan Keputusan Akhir",final_score:null!==(a=e.data.final_approval_notes)&&void 0!==a?a:"-"});var n=[];n.push({kuartal:c.value,periodId:r.value,region:d.value,distributor:C.value}),_.value=e.data,w.value=n})).catch((function(e){console.error(e)}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t=null!=v.value.distributor?v.value.id:k.params.distributor_id,e.next=4,O["a"].get("distributor-regions-evaluation-report?distributor_id="+t).then((function(e){u.value=e.data.data})).finally((function(){d.value=u.value[0].regions_code}));case 4:e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();Object(n["onMounted"])(Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return h(),null!=v.value.distributor?(x.value=v.value.id,C.value=v.value.distributor.id):x.value=k.params.distributor_id,e.next=4,V();case 4:y();case 5:case"end":return e.stop()}}),e)}))));var N=function(){a.value=(new Date).getFullYear(),y()},B=function(e,t){l.value=e.props.name;var a=e.props.name.split("_");c.value=a[a.length-1],y()};function D(e,t){d.value=e.props.name,y()}var z=function(e){e.row,e.column;var t=e.rowIndex,a=e.columnIndex;if(t===_.value.data.length-1||t===_.value.data.length-2){if(0===a)return[1,3];if(2!==a)return[0,0]}},F=function(e){e.row;var t=e.rowIndex;return t===_.value.data.length-1?"footer-table":""};return e={activeName:i,loading:t,options:o,selectPeriod:a,refreshTable:N},Object(b["a"])(e,"options",o),Object(b["a"])(e,"handleClick",B),Object(b["a"])(e,"kuartal",l),Object(b["a"])(e,"handleChangePeriode",g),Object(b["a"])(e,"regions",u),Object(b["a"])(e,"region",d),Object(b["a"])(e,"arraySpanMethod",z),Object(b["a"])(e,"loadTable",y),Object(b["a"])(e,"handleClickRegion",D),Object(b["a"])(e,"tableRowClassName",F),Object(b["a"])(e,"tableData",_),Object(b["a"])(e,"filter",w),e}});a("bbe6");const S=z()(L,[["render",d]]);t["default"]=S},b680:function(e,t,a){"use strict";var n=a("23e7"),r=a("a691"),o=a("408a"),l=a("1148"),c=a("d039"),i=1..toFixed,u=Math.floor,d=function(e,t,a){return 0===t?a:t%2===1?d(e,t-1,a*e):d(e*e,t/2,a)},b=function(e){var t=0,a=e;while(a>=4096)t+=12,a/=4096;while(a>=2)t+=1,a/=2;return t},s=function(e,t,a){var n=-1,r=a;while(++n<6)r+=t*e[n],e[n]=r%1e7,r=u(r/1e7)},f=function(e,t){var a=6,n=0;while(--a>=0)n+=e[a],e[a]=u(n/t),n=n%t*1e7},p=function(e){var t=6,a="";while(--t>=0)if(""!==a||0===t||0!==e[t]){var n=String(e[t]);a=""===a?n:a+l.call("0",7-n.length)+n}return a},j=i&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!c((function(){i.call({})}));n({target:"Number",proto:!0,forced:j},{toFixed:function(e){var t,a,n,c,i=o(this),u=r(e),j=[0,0,0,0,0,0],O="",v="0";if(u<0||u>20)throw RangeError("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return String(i);if(i<0&&(O="-",i=-i),i>1e-21)if(t=b(i*d(2,69,1))-69,a=t<0?i*d(2,-t,1):i/d(2,t,1),a*=4503599627370496,t=52-t,t>0){s(j,0,a),n=u;while(n>=7)s(j,1e7,0),n-=7;s(j,d(10,n,1),0),n=t-1;while(n>=23)f(j,1<<23),n-=23;f(j,1<<n),s(j,1,1),f(j,2),v=p(j)}else s(j,0,a),s(j,1<<-t,0),v=p(j)+l.call("0",u);return u>0?(c=v.length,v=O+(c<=u?"0."+l.call("0",u-c)+v:v.slice(0,c-u)+"."+v.slice(c-u))):v=O+v,v}})},bbe6:function(e,t,a){"use strict";a("1add")},d81d:function(e,t,a){"use strict";var n=a("23e7"),r=a("b727").map,o=a("1dde"),l=o("map");n({target:"Array",proto:!0,forced:!l},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);