(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aba6f28c"],{"15fd":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("a4d3"),a("b64b");function n(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}function r(e,t){if(null==e)return{};var a,r,o=n(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}},"1e9c":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a("1da1"),r=a("5530"),o=(a("96cf"),a("25a0")),i=a("8afd");function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=Object(i["p"])(!1),c=Object(i["o"])(Object(r["a"])({},e)),l=null;t&&(l=Object(o["a"])(t,Object(i["q"])(c)));var u=function(){for(var t in e)c[t]=e[t];l&&l.value.$reset()},d=function(t){var a=Object(i["q"])(c);for(var n in e)Object.hasOwnProperty.call(t,n)&&(a[n].value=t[n])},s=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!=t?(d(t),a.value=!0):(u(),a.value=!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i["n"])("updateFormData",s),{updateMode:a,formData:c,validate:l,resetFormData:u,hydrateFormData:d,updateFormData:s}}},2388:function(e,t,a){"use strict";var n=a("c953"),r="/company-management",o=function(){return n["a"].get(r)},i=function(e){return n["a"].post(r,e)},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return n["a"].put(r+"/".concat(e),t)},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return n["a"].put(r+"/".concat(e,"/activate"),t)},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return n["a"].put(r+"/".concat(e,"/deactivate"),t)};t["a"]={get:o,add:i,update:c,activate:l,deactivate:u}},2611:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("8afd");function r(){return{$show:Object(n["e"])("$messageBox"),$prompt:Object(n["e"])("$prompt"),$alert:Object(n["e"])("$alert"),$confirm:Object(n["e"])("$confirm")}}},4936:function(e,t,a){"use strict";var n=a("c953"),r="/master-activities",o=function(){return n["a"].get("".concat(r))},i=function(e){return n["a"].post(r,e)},c=function(e){return n["a"].get(r+"/".concat(e))},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return n["a"].put(r+"/".concat(e),t)},u=function(e){return n["a"].delete(r+"/".concat(e))};t["a"]={all:o,add:i,show:c,update:l,destroy:u}},"93af":function(e,t,a){"use strict";a.r(t);var n=a("7a23"),r={class:"p-5"},o={class:"sm:grid grid-cols-2 gap-5"},i={class:""},c=Object(n["createVNode"])("p",null,"Periode Penilaian:",-1),l={key:0,class:"text-xl"},u={class:"mt-5 text-right"},d=Object(n["createTextVNode"])("Q1"),s=Object(n["createTextVNode"])("Q2"),b=Object(n["createTextVNode"])("Q3"),f=Object(n["createTextVNode"])("Q4");function p(e,t,a,p,m,v){var O=Object(n["resolveComponent"])("el-checkbox"),j=Object(n["resolveComponent"])("el-checkbox-group"),g=Object(n["resolveComponent"])("data-grid"),h=Object(n["resolveComponent"])("el-tab-pane"),D=Object(n["resolveComponent"])("el-tabs"),w=Object(n["resolveComponent"])("AttendanceForm"),x=Object(n["resolveComponent"])("SanctionForm"),C=Object(n["resolveComponent"])("document-form");return Object(n["openBlock"])(),Object(n["createBlock"])(C,{title:"Dokumen Penilaian Kinerja Distributor"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("div",r,[Object(n["createVNode"])("div",o,[Object(n["createVNode"])("div",i,[c,null!=e.evaluationPeriod?(Object(n["openBlock"])(),Object(n["createBlock"])("p",l,Object(n["toDisplayString"])(e.evaluationPeriod.period),1)):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])("div",u,[Object(n["createVNode"])(j,{modelValue:e.activeQuartal,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.activeQuartal=t})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(O,{label:1,disabled:""},{default:Object(n["withCtx"])((function(){return[d]})),_:1}),Object(n["createVNode"])(O,{label:2,disabled:""},{default:Object(n["withCtx"])((function(){return[s]})),_:1}),Object(n["createVNode"])(O,{label:3,disabled:""},{default:Object(n["withCtx"])((function(){return[b]})),_:1}),Object(n["createVNode"])(O,{label:4,disabled:""},{default:Object(n["withCtx"])((function(){return[f]})),_:1})]})),_:1},8,["modelValue"])])]),Object(n["createVNode"])(D,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(h,{label:"Data PKD",class:"pb-10"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(D,{type:"border-card"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(h,{label:"Belum Diproses",class:"pb-10"},{default:Object(n["withCtx"])((function(){return[null!=e.evaluationPeriod?(Object(n["openBlock"])(),Object(n["createBlock"])(g,{key:0,evaluationPeriod:e.evaluationPeriod,isProcessed:"0"},null,8,["evaluationPeriod"])):Object(n["createCommentVNode"])("",!0)]})),_:1}),Object(n["createVNode"])(h,{label:"Sudah Diproses",class:"pb-10"},{default:Object(n["withCtx"])((function(){return[null!=e.evaluationPeriod?(Object(n["openBlock"])(),Object(n["createBlock"])(g,{key:0,evaluationPeriod:e.evaluationPeriod,isProcessed:"1"},null,8,["evaluationPeriod"])):Object(n["createCommentVNode"])("",!0)]})),_:1}),Object(n["createVNode"])(h,{label:"Printed Report",class:"pb-10"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("button",{onClick:t[2]||(t[2]=function(){return e.exportEvaluationData&&e.exportEvaluationData.apply(e,arguments)}),class:"btn btn-primary px-4 py-2"},"Export Data Penilaian")]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(h,{label:"Persentase Kehadiran",class:"pb-10"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(w)]})),_:1}),Object(n["createVNode"])(h,{label:"Sanksi/Wanprestasi",class:"pb-10"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(x)]})),_:1}),Object(n["createVNode"])(h,{label:"PKD Direvisi Wilayah",class:"pb-10"},{default:Object(n["withCtx"])((function(){return[null!=e.evaluationPeriod?(Object(n["openBlock"])(),Object(n["createBlock"])(g,{key:0,evaluationPeriod:e.evaluationPeriod,verificationStatus:"DIREVISI_WILAYAH"},null,8,["evaluationPeriod"])):Object(n["createCommentVNode"])("",!0)]})),_:1})]})),_:1})])]})),_:1})}var m=a("1da1"),v=(a("96cf"),a("d3b7"),a("99af"),a("8afd")),O=a("c45b"),j=a("730f"),g=Object(n["createTextVNode"])(" Proses ");function h(e,t,a,r,o,i){var c=Object(n["resolveComponent"])("DxFilterRow"),l=Object(n["resolveComponent"])("DxColumn"),u=Object(n["resolveComponent"])("router-link"),d=Object(n["resolveComponent"])("DxPaging"),s=Object(n["resolveComponent"])("DxPager"),b=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(b,{ref:"root","data-source":e.customStore,"show-borders":!0,"remote-operations":{paging:!0,filtering:!0,sorting:!0},selection:{mode:"single"},onSelectionChanged:e.onSelectionChanged,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)})},{cellTemplate:Object(n["withCtx"])((function(t){var a=t.data;return[Object(n["createVNode"])(u,{tag:"button",class:"btn btn-sm rounded-lg px-4",to:e.linkToProcessDocument(a)},{default:Object(n["withCtx"])((function(){return[g]})),_:2},1032,["to"])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{visible:!0}),Object(n["createVNode"])(l,{"data-field":"distributor.sap_id","data-type":"string",caption:"Customer ID"}),Object(n["createVNode"])(l,{"data-field":"distributor.name","data-type":"string",caption:"Nama Distributor"}),Object(n["createVNode"])(l,{"data-field":"created_at","data-type":"string",caption:"Tanggal Pengajuan"}),Object(n["createVNode"])(l,{"data-field":"avp_verification_status","data-type":"string",caption:"Status Verifikasi Dokumen"}),Object(n["createVNode"])(l,{width:100,"data-field":"id",caption:"Action","cell-template":"cellTemplate"}),Object(n["createVNode"])(d,{"page-size":20}),Object(n["createVNode"])(s,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20,50]})]})),_:1},8,["data-source","onSelectionChanged"])}a("0cfa");var D=a("5040"),w=a.n(D),x=(a("fb6a"),a("d30a")),C=a("2597"),k=a.n(C),_=a("c953"),N=a("2388"),V=a("4360"),y=Object(n["defineComponent"])({components:{DxDataGrid:x["DxDataGrid"],DxColumn:x["DxColumn"],DxPaging:x["DxPaging"],DxPager:x["DxPager"],DxSorting:x["DxSorting"],DxHeaderFilter:x["DxHeaderFilter"],DxFilterRow:x["DxFilterRow"]},props:["evaluationPeriod","verificationStatus","isProcessed"],setup:function(e,t){var a=this,r=(t.emit,Object(V["b"])()),o=Object(n["ref"])(null);Object(n["onMounted"])((function(){}));function i(e){return void 0!==e&&null!==e&&""!==e}var c=Object(n["inject"])("env"),l=new k.a({key:"distributor_id",load:function(t){var a="?";return["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(e){e in t&&i(t[e])&&(a+="".concat(e,"=").concat(JSON.stringify(t[e]),"&"))})),a=a.slice(0,-1),a+="&evaluation_period=".concat(e.evaluationPeriod.id),a+="&is_processed=".concat(e.isProcessed),null!=e.verificationStatus&&(a+="&verification_status=".concat(e.verificationStatus)),_["a"].get("".concat(c["VUE_APP_API_ENDPOINT"],"/evaluation-bundles/by-admin-region").concat(a)).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),u=function(e){e.selectedRowsData},d=function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,N["a"].activate(t).then((function(e){w.a.success({title:"Success",position:"bottom-right"}),b()})).catch((function(e){w.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,N["a"].deactivate(t).then((function(e){w.a.success({title:"Success",position:"bottom-right"}),b()})).catch((function(e){w.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){o.value.instance.refresh()},f=function(){o.value.instance.clearSelection()},p=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:b.bind(a)}})},v=r.state.auth.user,O=function(e){return{name:"admin-evaluation-document-verification.distributor-evaluation.document-verification",params:{distributor_id:e.data.distributor_id}}};return{customStore:l,onSelectionChanged:u,activate:d,deactivate:s,onToolbarPreparing:p,refreshDataGrid:b,clearSelection:f,root:o,linkToProcessDocument:O,user:v}}}),P=a("6b0d"),S=a.n(P);const R=S()(y,[["render",h]]);var B=R,T={class:"p-5"},F={class:"mt-3"},G={class:"sm:grid grid-cols-2 gap-5"},$={class:"mb-4"},A=Object(n["createTextVNode"])("Click to upload"),I={class:"flex w-full px-5"},E={class:"ml-auto"};function U(e,t,a,r,o,i){var c=Object(n["resolveComponent"])("el-option"),l=Object(n["resolveComponent"])("el-select"),u=Object(n["resolveComponent"])("form-item"),d=Object(n["resolveComponent"])("el-button"),s=Object(n["resolveComponent"])("el-upload"),b=Object(n["resolveComponent"])("DataGrid"),f=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])("div",T,[Object(n["createVNode"])("div",F,[Object(n["createVNode"])("div",G,[Object(n["createVNode"])(u,{label:"Nama Kegiatan",validationData:e.validate.activityId},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("div",$,[Object(n["withDirectives"])(Object(n["createVNode"])(l,{class:"form-control",modelValue:e.formData.activityId,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.formData.activityId=t})},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.activities,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:e.id,value:e.id,label:e.activity_name},null,8,["value","label"])})),128))]})),_:1},8,["modelValue"]),[[f,e.loading]])])]})),_:1},8,["validationData"]),Object(n["createVNode"])(u,{label:"Daftar Hadir Kegiatan",validationData:e.validate.file_path},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(s,{ref:"elUpload",class:"upload-demo",action:e.env["VUE_APP_API_ENDPOINT"]+"/files","with-credentials":!0,"on-success":e.onUploadSuccees,"on-preview":e.handlePreview,headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},"file-list":null!=e.formData.file_path?[{name:"file-daftar hadir",url:e.formData.file_path}]:[]},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(d,{size:"small",type:"primary"},{default:Object(n["withCtx"])((function(){return[A]})),_:1})]})),_:1},8,["action","on-success","on-preview","file-list"])]})),_:1},8,["validationData"])])])]),Object(n["createVNode"])("div",I,[Object(n["createVNode"])("div",E,[Object(n["withDirectives"])(Object(n["createVNode"])("button",{type:"button",class:"btn btn-primary w-24 mr-2",onClick:t[2]||(t[2]=function(){return e.add&&e.add.apply(e,arguments)})}," Add ",512),[[f,e.loading]])])]),Object(n["createVNode"])(b,{ref:"dataGrid",class:"m-5",onSelectionChanged:e.onSelectionChanged},null,8,["onSelectionChanged"])],64)}var q=a("ade3"),K=a("5530"),M={activityId:null,file_path:null},L=a("25a0"),H=a("e3e1"),z=a("2022"),Q=a("5502"),J=a("4936"),W=function(e){return _["a"].post("/read-distributor-activity",e)},Y={read_distributor:W},X=a("2611");function Z(e,t,a,r,o,i){var c=Object(n["resolveComponent"])("DxFilterRow"),l=Object(n["resolveComponent"])("DxColumn"),u=Object(n["resolveComponent"])("DxPaging"),d=Object(n["resolveComponent"])("DxPager"),s=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(s,{ref:"root","data-source":e.customStore,"show-borders":!0,"remote-operations":{paging:!0,filtering:!0,sorting:!0},selection:{mode:"single"},onSelectionChanged:e.onSelectionChanged,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)})},{cellTemplate:Object(n["withCtx"])((function(t){var a=t.data;return[Object(n["createVNode"])("button",{onClick:function(t){return e.destroy(a.data.id)},class:"btn btn-sm bg-theme-6 rounded-lg text-white"}," Delete ",8,["onClick"])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{visible:!0}),Object(n["createVNode"])(l,{"data-field":"activity.activity_name","data-type":"string",caption:"Nama Kegiatan"}),Object(n["createVNode"])(l,{"data-field":"customer_number","data-type":"string",caption:"Nomor Customer"}),Object(n["createVNode"])(l,{"data-field":"distributor.name","data-type":"string",caption:"Nama Distributor"}),Object(n["createVNode"])(l,{"data-field":"region.name","data-type":"string",caption:"Region"}),Object(n["createVNode"])(l,{"data-field":"is_hadir","data-type":"string",caption:"Status Kehadiran"}),Object(n["createVNode"])(l,{allowFiltering:!1,width:100,"data-field":"id",caption:"Aksi","cell-template":"cellTemplate"}),Object(n["createVNode"])(u,{"page-size":20}),Object(n["createVNode"])(d,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20,50]})]})),_:1},8,["data-source","onSelectionChanged"])}var ee="/distributor-activities",te=function(){return _["a"].get(ee)},ae=function(e){return _["a"].post(ee,e)},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return _["a"].put(ee+"/".concat(e),t)},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return _["a"].delete(ee+"/".concat(e))},oe={get:te,add:ae,update:ne,destroy:re},ie=Object(n["defineComponent"])({components:{DxDataGrid:x["DxDataGrid"],DxColumn:x["DxColumn"],DxPaging:x["DxPaging"],DxPager:x["DxPager"],DxSorting:x["DxSorting"],DxHeaderFilter:x["DxHeaderFilter"],DxFilterRow:x["DxFilterRow"]},emits:["selectionChanged"],setup:function(e,t){var a=this,r=t.emit,o=Object(V["b"])(),i=Object(n["ref"])(null),c=o.state.auth.user,l=Object(X["a"])();function u(e){return void 0!==e&&null!==e&&""!==e}var d=Object(n["inject"])("env"),s=new k.a({key:"id",load:function(e){var t="?";return["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(a){a in e&&u(e[a])&&(t+="".concat(a,"=").concat(JSON.stringify(e[a]),"&"))})),t=t.slice(0,-1),_["a"].get("".concat(d["VUE_APP_API_ENDPOINT"],"/distributor-activities").concat(t)).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),b=function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:l.$confirm("Hapus data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,oe.destroy(t).then((function(e){w.a.success({title:"Success",message:"Data berhasil dihapus",position:"bottom-right"}),p()})).catch((function(e){w.a.error({title:"Failed",message:e.data.message,position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})))).catch((function(){}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e){var t=e.selectedRowsData;r("selectionChanged",t[0])},p=function(){i.value.instance.refresh()},v=function(){i.value.instance.clearSelection()},O=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:p.bind(a)}})};return{customStore:s,onSelectionChanged:f,onToolbarPreparing:O,refreshDataGrid:p,clearSelection:v,root:i,user:c,destroy:b}}});const ce=S()(ie,[["render",Z]]);var le=ce,ue=Object(n["defineComponent"])({components:{DocumentForm:O["a"],FormItem:z["a"],DataGrid:le},setup:function(){var e,t=Object(Q["d"])(),a=(t.state.auth.user,Object(X["a"])()),r=Object(n["ref"])(null),o=Object(n["ref"])(null),i=Object(n["ref"])(!1),c=Object(n["inject"])("env"),l=Object(n["ref"])([]),u=Object(n["reactive"])(Object(K["a"])({},M)),d={activityId:{required:H["c"]},file_path:{required:H["c"]}},s=Object(L["a"])(d,Object(n["toRefs"])(u));Object(n["onMounted"])(Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i.value=!0,e.next=3,J["a"].all().then((function(e){l.value=e.data.data})).finally((function(){i.value=!1}));case 3:case"end":return e.stop()}}),e)}))));var b=function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.value.$touch(),s.value.$invalid?w.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):a.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i.value=!0,e.next=3,Y.read_distributor(u).then((function(e){w.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),o.value.refreshDataGrid()})).catch((function(e){w.a.error({title:"Data gagal disimpan",message:e.data.message,position:"bottom-right"})})).finally((function(){i.value=!1}));case 3:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(e,t,a){u.file_path=e.id},p=function(e){var t=window.open(c["VUE_APP_API_ENDPOINT"]+"/files?filePath="+e.url,"_blank");t.focus()},v=function(){o.value.refreshDataGrid()};return e={env:c,formData:u,validate:s,loading:i,add:b},Object(q["a"])(e,"add",b),Object(q["a"])(e,"onUploadSuccees",f),Object(q["a"])(e,"elUpload",r),Object(q["a"])(e,"handlePreview",p),Object(q["a"])(e,"activities",l),Object(q["a"])(e,"refreshDataGrid",v),Object(q["a"])(e,"dataGrid",o),e}});const de=S()(ue,[["render",U]]);var se=de,be=(a("b0c0"),{class:"p-5"}),fe={class:""},pe={class:"grid grid-cols-1 mb-4"},me={class:"sm:grid grid-cols-2 gap-5 mb-4"},ve={class:"sm:grid grid-cols-1 mb-4"},Oe={class:"sm:grid grid-cols-1 mb-4"},je={class:"sm:grid grid-cols-1 mb-4"},ge=Object(n["createTextVNode"])("Click to upload"),he={class:"flex w-full px-5"},De={class:"ml-auto"};function we(e,t,a,r,o,i){var c=Object(n["resolveComponent"])("el-option"),l=Object(n["resolveComponent"])("el-select"),u=Object(n["resolveComponent"])("form-item"),d=Object(n["resolveComponent"])("el-date-picker"),s=Object(n["resolveComponent"])("el-button"),b=Object(n["resolveComponent"])("el-upload"),f=Object(n["resolveComponent"])("DataGrid"),p=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],null,[Object(n["createVNode"])("div",be,[Object(n["createVNode"])("div",fe,[Object(n["createVNode"])("div",pe,[Object(n["createVNode"])(u,{label:"Distributor",validationData:e.validate.distributor_id},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])(l,{filterable:"",class:["form-control",{"border-theme-6":e.validate.distributor_id.$error}],modelValue:e.formData.distributor_id,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.formData.distributor_id=t})},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.distributors,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:e.id,value:e.id,label:e.business_entity_type+" - "+e.name+" ("+e.sap_id+")"},null,8,["value","label"])})),128))]})),_:1},8,["modelValue","class"]),[[p,e.loadingDistributor]])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",me,[Object(n["createVNode"])(u,{label:"Nama Produsen",validationData:e.validate.producer_id},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])(l,{class:["form-control",{"border-theme-6":e.validate.producer_id.$error}],modelValue:e.formData.producer_id,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.formData.producer_id=t})},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.producers,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:e.id,value:e.id,label:e.name},null,8,["value","label"])})),128))]})),_:1},8,["modelValue","class"]),[[p,e.loadingProducer]])]})),_:1},8,["validationData"]),Object(n["createVNode"])(u,{label:"Tanggal",validationData:e.validate.sanction_date},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(d,{modelValue:e.validate.sanction_date.$model,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.validate.sanction_date.$model=t}),class:{"border-theme-6":e.validate.sanction_date.$error},type:"date",placeholder:"Pick a day",format:"YYYY-MM-DD"},null,8,["modelValue","class"])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",ve,[Object(n["createVNode"])(u,{label:"Nama Sanksi","rules-text":"Required",validationData:e.validate.sanction_name},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{placeholder:"Nama Sanksi",class:["form-control",{"border-theme-6":e.validate.sanction_name.$error}],"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.validate.sanction_name.$model=t})},null,2),[[n["vModelText"],e.validate.sanction_name.$model]])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",Oe,[Object(n["createVNode"])(u,{label:"Keterangan","rules-text":"Required",validationData:e.validate.sanction_description},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{placeholder:"Keterangan",class:["form-control",{"border-theme-6":e.validate.sanction_description.$error}],"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.validate.sanction_description.$model=t})},null,2),[[n["vModelText"],e.validate.sanction_description.$model]])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",je,[Object(n["createVNode"])(u,{label:"File Sanksi",validationData:e.validate.file_path},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(b,{ref:"elUpload",class:"upload-demo",action:e.env["VUE_APP_API_ENDPOINT"]+"/files","with-credentials":!0,"on-success":e.onUploadSuccees,"on-preview":e.handlePreview,headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},"file-list":null!=e.formData.file_path?[{name:"file-sanksi",url:e.formData.file_path}]:[]},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(s,{size:"small",type:"primary"},{default:Object(n["withCtx"])((function(){return[ge]})),_:1})]})),_:1},8,["action","on-success","on-preview","file-list"])]})),_:1},8,["validationData"])])])]),Object(n["createVNode"])("div",he,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-outline-secondary mr-2",onClick:t[6]||(t[6]=function(){var t;return e.dataGrid.clearSelection&&(t=e.dataGrid).clearSelection.apply(t,arguments)})}," Clear Selection ")):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])("div",De,[e.updateMode?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-primary w-24 mr-2",onClick:t[7]||(t[7]=function(){return e.save&&e.save.apply(e,arguments)})}," Save ",512)),[[p,e.loadingDistributor&&e.loadingProducer]]):Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:1,type:"button",class:"btn btn-primary w-24 mr-2",onClick:t[8]||(t[8]=function(){return e.add&&e.add.apply(e,arguments)})}," Add ",512)),[[p,e.loadingDistributor&&e.loadingProducer]])])]),Object(n["createVNode"])(f,{ref:"dataGrid",class:"m-5",onSelectionChanged:e.onSelectionChanged},null,8,["onSelectionChanged"])],64)}var xe=a("15fd"),Ce={id:null,distributor_id:null,producer_id:null,sanction_date:null,sanction_name:null,sanction_description:null,file_path:null},ke=a("1e9c"),_e=a("de0c"),Ne=a("de53"),Ve="/distributor-sanctions",ye=function(){return _["a"].get(Ve)},Pe=function(e){return _["a"].post(Ve,e)},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return _["a"].put(Ve+"/".concat(e),t)},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return _["a"].delete(Ve+"/".concat(e))},Be={get:ye,add:Pe,update:Se,destroy:Re};function Te(e,t,a,r,o,i){var c=Object(n["resolveComponent"])("DxFilterRow"),l=Object(n["resolveComponent"])("DxColumn"),u=Object(n["resolveComponent"])("DxPaging"),d=Object(n["resolveComponent"])("DxPager"),s=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(s,{ref:"root","data-source":e.customStore,"show-borders":!0,"remote-operations":{paging:!0,filtering:!0,sorting:!0},selection:{mode:"single"},onSelectionChanged:e.onSelectionChanged,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)})},{cellTemplate:Object(n["withCtx"])((function(t){var a=t.data;return[Object(n["createVNode"])("button",{onClick:function(t){return e.destroy(a.data.id)},class:"btn btn-sm bg-theme-6 rounded-lg text-white"}," Delete ",8,["onClick"])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{visible:!0}),Object(n["createVNode"])(l,{"data-field":"producer.name","data-type":"string",caption:"Produsen"}),Object(n["createVNode"])(l,{"data-field":"distributor.sap_id","data-type":"string",caption:"Nomor Customer"}),Object(n["createVNode"])(l,{"data-field":"distributor.name","data-type":"string",caption:"Nama Distributor"}),Object(n["createVNode"])(l,{"data-field":"sanction_name","data-type":"string",caption:"Nama Sanksi"}),Object(n["createVNode"])(l,{"data-field":"sanction_date","data-type":"string",caption:"Tanggal Sanksi"}),Object(n["createVNode"])(l,{allowFiltering:!1,width:100,"data-field":"id",caption:"Aksi","cell-template":"cellTemplate"}),Object(n["createVNode"])(u,{"page-size":20}),Object(n["createVNode"])(d,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20,50]})]})),_:1},8,["data-source","onSelectionChanged"])}var Fe=Object(n["defineComponent"])({components:{DxDataGrid:x["DxDataGrid"],DxColumn:x["DxColumn"],DxPaging:x["DxPaging"],DxPager:x["DxPager"],DxSorting:x["DxSorting"],DxHeaderFilter:x["DxHeaderFilter"],DxFilterRow:x["DxFilterRow"]},emits:["selectionChanged"],setup:function(e,t){var a=this,r=t.emit,o=Object(V["b"])(),i=Object(n["ref"])(null),c=o.state.auth.user,l=Object(X["a"])();function u(e){return void 0!==e&&null!==e&&""!==e}var d=Object(n["inject"])("env"),s=new k.a({key:"id",load:function(e){var t="?";return["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(a){a in e&&u(e[a])&&(t+="".concat(a,"=").concat(JSON.stringify(e[a]),"&"))})),t=t.slice(0,-1),_["a"].get("".concat(d["VUE_APP_API_ENDPOINT"],"/distributor-sanctions").concat(t)).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),b=function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:l.$confirm("Hapus data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Be.destroy(t).then((function(e){w.a.success({title:"Success",message:"Data berhasil dihapus",position:"bottom-right"}),p()})).catch((function(e){w.a.error({title:"Failed",message:e.data.message,position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})))).catch((function(){}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e){var t=e.selectedRowsData;r("selectionChanged",t[0])},p=function(){i.value.instance.refresh()},v=function(){i.value.instance.clearSelection()},O=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:p.bind(a)}})};return{customStore:s,onSelectionChanged:f,onToolbarPreparing:O,refreshDataGrid:p,clearSelection:v,root:i,user:c,destroy:b}}});const Ge=S()(Fe,[["render",Te]]);var $e=Ge,Ae=["id"],Ie=Object(n["defineComponent"])({components:{DocumentForm:O["a"],FormItem:z["a"],DataGrid:$e},setup:function(){var e=Object(Q["d"])(),t=(e.state.auth.user,Object(X["a"])()),a=Object(n["ref"])(null),r=Object(n["ref"])(null),o=Object(n["ref"])(!1),i=Object(n["ref"])(!1),c=Object(n["ref"])(!1),l=Object(n["ref"])(!1),u=Object(n["inject"])("env"),d={distributor_id:{required:H["c"]},producer_id:{required:H["c"]},sanction_date:{required:H["c"]},sanction_name:{required:H["c"]},sanction_description:{required:H["c"]},file_path:{required:H["c"]}},s=Object(ke["a"])(Ce,d),b=s.formData,f=s.validate,p=s.resetFormData,v=Object(n["ref"])([]),O=Object(n["ref"])([]),j=Object(n["ref"])([]);Object(n["onMounted"])(Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o.value=!0,i.value=!0,e.next=4,Ne["a"].getAllDistributorsByRegion().then((function(e){O.value=e.data})).finally((function(){o.value=!1}));case 4:return e.next=6,_e["a"].all().then((function(e){j.value=e.data})).finally((function(){i.value=!1}));case 6:case"end":return e.stop()}}),e)}))));var g=function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:f.value.$touch(),f.value.$invalid?w.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):t.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c.value=!0,e.next=3,Be.add(b).then((function(e){w.a.success({title:"Data berhasil disimpan",message:"Data sanksi distributor berhasil disimpan!",position:"bottom-right"}),a.value.refreshDataGrid(),p()})).catch((function(e){w.a.error({title:"Data gagal disimpan",message:e.data.message,position:"bottom-right"})})).finally((function(){c.value=!1}));case 3:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:f.value.$touch(),f.value.$invalid?w.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):t.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(m["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return b.id,t=Object(xe["a"])(b,Ae),c.value=!0,e.next=4,Be.update(b.id,t).then((function(e){w.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),a.value.clearSelection(),a.value.refreshDataGrid(),p()})).catch((function(e){w.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){c.value=!1}));case 4:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(e){var t=Object(n["toRefs"])(b);for(var a in Ce)Object.hasOwnProperty.call(e,a)&&(t[a].value="sanction_date"===a?e["original_date"]:e[a])},x=function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!=t?(D(t),l.value=!0):(p(),l.value=!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function C(e){x(e)}Object(n["provide"])("updateFormData",x);var k=function(e,t,a){b.file_path=e.id},_=function(e){var t=window.open(u["VUE_APP_API_ENDPOINT"]+"/files?filePath="+e.url,"_blank");t.focus()},N=function(){a.value.refreshDataGrid()};return{env:u,formData:b,validate:f,dataGrid:a,add:g,save:h,onUploadSuccees:k,elUpload:r,handlePreview:_,onSelectionChanged:C,refreshDataGrid:N,activities:v,distributors:O,producers:j,loading:c,loadingDistributor:o,loadingProducer:i,updateMode:l}}});const Ee=S()(Ie,[["render",we]]);var Ue=Ee,qe=Object(v["c"])({components:{DocumentForm:O["a"],DataGrid:B,AttendanceForm:se,SanctionForm:Ue},setup:function(){var e=Object(v["p"])(null),t=Object(v["p"])(!0),a=Object(v["o"])({evaluation_period_id:null});Object(v["m"])(Object(m["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,j["a"].getActive().then((function(t){e.value=t.data,a.evaluation_period_id=t.data.id})).finally((function(){t.value=!1}));case 2:case"end":return n.stop()}}),n)}))));var n=Object(v["e"])("env"),r=function(){var e="?evaluationPeriod=".concat(a.evaluation_period_id);window.open("".concat(n["VUE_APP_API_ENDPOINT"],"/download-evaluation-report").concat(e),"_blank")};return{evaluationPeriod:e,exportEvaluationData:r,activeQuartal:Object(v["a"])((function(){if(!t.value)return[e.value.active_kuartal]}))}}});const Ke=S()(qe,[["render",p]]);t["default"]=Ke},de0c:function(e,t,a){"use strict";var n=a("c953"),r="/producer",o=function(){return n["a"].get("".concat(r))};t["a"]={all:o}}}]);