(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8d0f3f3a"],{"15fd":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("a4d3"),a("b64b");function n(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}function i(e,t){if(null==e)return{};var a,i,r=n(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)a=o[i],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}},"1a40":function(e,t,a){"use strict";var n=a("c953"),i="/demplot-reports",r=function(){return n["a"].get(i)},o=function(e){return n["a"].post(i,e)},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n["a"].delete(i+"/".concat(e))},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return n["a"].put(i+"/".concat(e),t)};t["a"]={get:r,add:o,update:c,destroy:l}},"1d8d":function(e,t,a){"use strict";var n=a("c953"),i="/teritorial",r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n["a"].get(i+"/province/".concat(e))},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n["a"].get(i+"/city/".concat(e))},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n["a"].get(i+"/district/".concat(e))},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n["a"].get(i+"/village/".concat(e))};t["a"]={province:r,city:o,district:l,village:c}},9565:function(e,t,a){"use strict";a.r(t);var n=a("7a23"),i={class:"grid grid-cols-12 gap-6"};function r(e,t,a,r,o,l){var c=Object(n["resolveComponent"])("socializationPanel"),d=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createBlock"])("div",null,[Object(n["withDirectives"])(Object(n["createVNode"])("div",i,[e.loading?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:0,evaluationPeriod:e.evaluationPeriod},null,8,["evaluationPeriod"]))],512),[[d,e.loading]])])}var o=a("1da1"),l=(a("96cf"),a("99af"),{class:"intro-y col-span-12 lg:col-span-12"}),c={class:"p-5"},d={class:"mt-3"},u={class:"sm:grid grid-cols-2 gap-5"},s={class:"mt-3"},p={class:"sm:grid grid-cols-2 gap-5"},f={class:"mt-3"},m={class:"grid grid-cols-2 gap-5"},b={class:"sm:grid grid-cols-2 gap-5 mt-3"},v={class:"sm:grid grid-cols-2 gap-5 mt-3"},g={class:"sm:grid grid-cols gap-5"},h={key:0,class:"mt-3"},O=Object(n["createVNode"])("label",{class:"form-label"},"Maps",-1),j={class:"h-40 xxl:h-56 image-fit"},_={class:"mt-3"},w={class:"sm:grid grid-cols gap-5"},D={class:"mt-3"},k={class:"sm:grid grid-cols-2 gap-5"},V=Object(n["createTextVNode"])("Click to upload"),x={class:"mt-3"},y={class:"sm:grid grid-cols-2 gap-5"},N=Object(n["createTextVNode"])("Click to upload"),C=Object(n["createTextVNode"])("Click to upload"),P={class:"flex w-full px-5"},R={key:1,class:"ml-auto"},S={key:1};function B(e,t,a,i,r,o){var B=Object(n["resolveComponent"])("form-item"),T=Object(n["resolveComponent"])("el-date-picker"),$=Object(n["resolveComponent"])("el-option"),F=Object(n["resolveComponent"])("el-select"),U=Object(n["resolveComponent"])("el-button"),M=Object(n["resolveComponent"])("el-upload"),q=Object(n["resolveComponent"])("DataGrid"),A=Object(n["resolveComponent"])("document-form-penilaian"),z=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createBlock"])("div",l,[Object(n["withDirectives"])(Object(n["createVNode"])(A,{title:"Laporan Hasil Demplot",evaluationPeriod:e.evaluationPeriod,itemType:e.EvaluationAspectType.DemplotReport},{default:Object(n["withCtx"])((function(a){var i=a.allowManage;a.isAvailableByQuartal;return[Object(n["createVNode"])("div",c,[Object(n["createVNode"])("div",d,[Object(n["createVNode"])("div",u,[Object(n["createVNode"])(B,{label:"Nama Petani",validationData:e.validate.farmer_name},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{type:"text",placeholder:"",class:["form-control w-full",{"border-theme-6":e.validate.farmer_name.$error}],"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.validate.farmer_name.$model=t})},null,2),[[n["vModelText"],e.validate.farmer_name.$model]])]})),_:1},8,["validationData"]),Object(n["createVNode"])(B,{label:"Nama Kelompok Tani",validationData:e.validate.farmer_group},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{type:"text",class:["form-control w-full",{"border-theme-6":e.validate.farmer_group.$error}],placeholder:"","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.validate.farmer_group.$model=t})},null,2),[[n["vModelText"],e.validate.farmer_group.$model]])]})),_:1},8,["validationData"])])]),Object(n["createVNode"])("div",s,[Object(n["createVNode"])("div",p,[Object(n["createVNode"])(B,{label:"Tanggal Mulai Demplot",validationData:e.validate.demplot_start_date},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(T,{class:["form-control w-full",{"border-theme-6":e.validate.demplot_start_date.$error}],modelValue:e.validate.demplot_start_date.$model,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.validate.demplot_start_date.$model=t}),placeholder:"YYYY/MM/DD"},null,8,["modelValue","class"])]})),_:1},8,["validationData"]),Object(n["createVNode"])(B,{label:"Tanggal Akhir Demplot",validationData:e.validate.demplot_end_date},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(T,{class:["form-control w-full",{"border-theme-6":e.validate.demplot_end_date.$error}],modelValue:e.validate.demplot_end_date.$model,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.validate.demplot_end_date.$model=t}),placeholder:"YYYY/MM/DD"},null,8,["modelValue","class"])]})),_:1},8,["validationData"])])]),Object(n["createVNode"])("div",f,[Object(n["createVNode"])("div",m,[Object(n["createVNode"])(B,{label:"Propinsi","rules-text":"Required",validationData:e.validate.province_id},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(F,{clearable:"",modelValue:e.formData.province_id,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.formData.province_id=t}),class:["form-control",{"border-theme-6":e.validate.province_id.$error}],filterable:"",onChange:e.getCities},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.provinces,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])($,{key:e.province_id,label:e.province_name,value:e.province_id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","class","onChange"])]})),_:1},8,["validationData"]),Object(n["createVNode"])(B,{label:"Kota/Kabupaten","rules-text":"Required",validationData:e.validate.city_id},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(F,{clearable:"",modelValue:e.formData.city_id,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.formData.city_id=t}),class:["form-control",{"border-theme-6":e.validate.city_id.$error}],filterable:"",disabled:null==e.validate.province_id.$model,onChange:e.getDistricts},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.cities,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])($,{key:e.city_id,label:"".concat(e.city_type," ").concat(e.city_name),value:e.city_id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","class","disabled","onChange"])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",b,[Object(n["createVNode"])(B,{label:"Kecamatan","rules-text":"Required",validationData:e.validate.district_id,class:"intro-y"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(F,{modelValue:e.formData.district_id,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.formData.district_id=t}),class:["form-control",{"border-theme-6":e.validate.district_id.$error}],disabled:null==e.validate.city_id.$model,filterable:"",onChange:e.getVillages},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.districts,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])($,{key:e.district_id,label:e.district_name,value:e.district_id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","class","disabled","onChange"])]})),_:1},8,["validationData"]),Object(n["createVNode"])(B,{label:"Kelurahan/Desa - Kode Pos","rules-text":"Required",validationData:e.validate.village_id,class:"intro-y"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(F,{class:["form-control",{"border-theme-6":e.validate.village_id.$error}],modelValue:e.formData.village_id,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.formData.village_id=t}),disabled:null==e.validate.district_id.$model,filterable:""},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.villages,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])($,{key:e.village_id,label:"".concat(e.village_name," - ").concat(e.postal_code),value:e.village_id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","class","disabled"])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",v,[Object(n["createVNode"])(B,{label:"Latitude",validationData:e.validate.latitude},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{type:"text",placeholder:"",class:["form-control w-full",{"border-theme-6":e.validate.latitude.$error}],"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.validate.latitude.$model=t})},null,2),[[n["vModelText"],e.validate.latitude.$model]])]})),_:1},8,["validationData"]),Object(n["createVNode"])(B,{label:"Longitude",validationData:e.validate.longitude},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{type:"text",class:["form-control w-full",{"border-theme-6":e.validate.longitude.$error}],placeholder:"","onUpdate:modelValue":t[10]||(t[10]=function(t){return e.validate.longitude.$model=t})},null,2),[[n["vModelText"],e.validate.longitude.$model]])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",g,[null!=e.formData.latitude&&null!=e.formData.longitude?(Object(n["openBlock"])(),Object(n["createBlock"])("div",h,[O,Object(n["createVNode"])("div",j,[Object(n["createVNode"])("iframe",{style:{width:"100%",height:"100%"},class:"rounded-md",id:"gmap_canvas",src:"https://maps.google.com/maps?q=".concat(e.formData.latitude,", ").concat(e.formData.longitude,"&t=&z=13&ie=UTF8&iwloc=&output=embed"),frameborder:"0",scrolling:"no",marginheight:"0",marginwidth:"0"},null,8,["src"])])])):Object(n["createCommentVNode"])("",!0)])]),Object(n["createVNode"])("div",_,[Object(n["createVNode"])("div",w,[Object(n["createVNode"])(B,{label:"Luasan Demplot ( ㎡ )",validationData:e.validate.demplot_area},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{type:"text",placeholder:"",class:["form-control w-full",{"border-theme-6":e.validate.demplot_area.$error}],"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.validate.demplot_area.$model=t})},null,2),[[n["vModelText"],e.validate.demplot_area.$model]])]})),_:1},8,["validationData"])])]),Object(n["createVNode"])("div",D,[Object(n["createVNode"])("div",k,[Object(n["createVNode"])(B,{label:"Tanggal Mulai Tanam",validationData:e.validate.planting_date},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(T,{class:["form-control w-full",{"border-theme-6":e.validate.planting_date.$error}],modelValue:e.validate.planting_date.$model,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.validate.planting_date.$model=t}),placeholder:"YYYY/MM/DD"},null,8,["modelValue","class"])]})),_:1},8,["validationData"]),Object(n["createVNode"])(B,{label:"File Foto Bukti Demplot",validationData:e.validate.demplot_photo_file_path},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(M,{ref:"elUpload",class:"upload-demo",action:e.env["VUE_APP_API_ENDPOINT"]+"/files",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},"with-credentials":!0,"on-success":e.onDemplotPhotoUploadSuccess,"file-list":null!=e.formData.demplot_photo_file_path?[{name:"file-foto-bukti-demplot",url:e.formData.demplot_photo_file_path}]:[],"on-preview":e.handlePreview},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(U,{size:"small",type:"primary"},{default:Object(n["withCtx"])((function(){return[V]})),_:1})]})),_:1},8,["action","on-success","file-list","on-preview"])]})),_:1},8,["validationData"])])]),Object(n["createVNode"])("div",x,[Object(n["createVNode"])("div",y,[Object(n["createVNode"])(B,{label:"File Laporan Demplot",validationData:e.validate.demplot_report_file_path},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(M,{ref:"elUpload",class:"upload-demo",action:e.env["VUE_APP_API_ENDPOINT"]+"/files",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},"with-credentials":!0,"on-success":e.onReportUploadSuccess,"file-list":null!=e.formData.demplot_report_file_path?[{name:"file-laporan-demplot",url:e.formData.demplot_report_file_path}]:[],"on-preview":e.handlePreview},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(U,{size:"small",type:"primary"},{default:Object(n["withCtx"])((function(){return[N]})),_:1})]})),_:1},8,["action","on-success","file-list","on-preview"])]})),_:1},8,["validationData"]),Object(n["createVNode"])(B,{label:"File Surat Pemantauan Demplot (Diketahui AAE)",validationData:e.validate.demplot_agreement_file_path},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(M,{ref:"elUpload",class:"upload-demo",action:e.env["VUE_APP_API_ENDPOINT"]+"/files",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},"with-credentials":!0,"on-success":e.onAgreementUploadSuccess,"file-list":null!=e.formData.demplot_agreement_file_path?[{name:"file-surat-perjanjian-kerjasama",url:e.formData.demplot_agreement_file_path}]:[],"on-preview":e.handlePreview},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(U,{size:"small",type:"primary"},{default:Object(n["withCtx"])((function(){return[C]})),_:1})]})),_:1},8,["action","on-success","file-list","on-preview"])]})),_:1},8,["validationData"])])])]),Object(n["createVNode"])("div",P,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-outline-secondary mr-2",onClick:t[13]||(t[13]=function(){var t;return e.dataGrid.clearSelection&&(t=e.dataGrid).clearSelection.apply(t,arguments)})}," Clear Selection ")):Object(n["createCommentVNode"])("",!0),i?(Object(n["openBlock"])(),Object(n["createBlock"])("div",R,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,disabled:e.loading,class:[{"cursor-not-allowed":e.loading},"btn btn-primary w-24 mr-2"],type:"button",onClick:t[14]||(t[14]=function(){return e.save&&e.save.apply(e,arguments)})}," Save ",10,["disabled"])):(Object(n["openBlock"])(),Object(n["createBlock"])("div",S,[Object(n["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-2",onClick:t[15]||(t[15]=function(){return e.resetFormData&&e.resetFormData.apply(e,arguments)})}," Reset "),Object(n["createVNode"])("button",{disabled:e.loading,class:[{"cursor-not-allowed":e.loading},"btn bg-theme-9 text-white w-24"],type:"button",onClick:t[16]||(t[16]=function(){return e.add&&e.add.apply(e,arguments)})}," Add ",10,["disabled"])]))])):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])(q,{ref:"dataGrid",class:"m-5",allowManage:i,onSelectionChanged:e.onSelectionChanged},null,8,["allowManage","onSelectionChanged"])]})),_:1},8,["evaluationPeriod","itemType"]),[[z,e.loading]])])}a("0cfa");var T=a("5040"),$=a.n(T),F=a("15fd"),U=a("5530"),M=(a("d3b7"),a("84df"));function q(e,t,a,i,r,o){var l=Object(n["resolveComponent"])("DxColumn"),c=Object(n["resolveComponent"])("DxPaging"),d=Object(n["resolveComponent"])("DxPager"),u=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(u,{ref:"root","data-source":e.store,"show-borders":!0,"remote-operations":!0,selection:{mode:"single"},onSelectionChanged:e.onSelectionChanged,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)}),"allow-column-reordering":!0,"allow-column-resizing":!0,"column-auto-width":!0},{filePathDemplot:Object(n["withCtx"])((function(t){var a=t.data;return[Object(n["createVNode"])("a",{href:e.env["VUE_APP_API_ENDPOINT"]+"/files?filePath="+a.data.demplot_report_file_path,class:"btn btn-sm bg-theme-9 rounded-lg text-white",target:"_blank"},"File Laporan",8,["href"])]})),filePathSPK:Object(n["withCtx"])((function(t){var a=t.data;return[Object(n["createVNode"])("a",{href:e.env["VUE_APP_API_ENDPOINT"]+"/files?filePath="+a.data.demplot_agreement_file_path,class:"btn btn-sm bg-theme-9 rounded-lg text-white",target:"_blank"},"File Surat Perjanjian Kerjasama",8,["href"])]})),cellTemplate:Object(n["withCtx"])((function(t){var a=t.data;return[Object(n["createVNode"])("button",{onClick:function(t){return e.destroy(a.data.id)},class:"btn btn-sm bg-theme-6 rounded-lg text-white"}," Delete ",8,["onClick"])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{"data-field":"farmer_name","data-type":"string",caption:"Nama Petani"}),Object(n["createVNode"])(l,{"data-field":"farmer_group","data-type":"string",caption:"Nama Kelompok Petani"}),Object(n["createVNode"])(l,{"data-field":"demplot_start_date","data-type":"string",caption:"Tanggal Mulai"}),Object(n["createVNode"])(l,{"data-field":"demplot_end_date","data-type":"string",caption:"Tanggal Berakhir"}),Object(n["createVNode"])(l,{"data-field":"demplot_report_file_path","data-type":"string",caption:"File Laporan","cell-template":"filePathDemplot"}),Object(n["createVNode"])(l,{"data-field":"demplot_agreement_file_path","data-type":"string",caption:"File Surat Perjanjian Kerjasama","cell-template":"filePathSPK"}),"distributor"==e.route.meta.role&&e.allowManage?(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:0,allowFiltering:!1,width:100,"data-field":"id",caption:"Aksi","cell-template":"cellTemplate"})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(c,{"page-size":5}),Object(n["createVNode"])(d,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20]})]})),_:1},8,["data-source","onSelectionChanged"])}var A=a("ade3"),z=(a("fb6a"),a("d30a")),E=a("2597"),G=a.n(E),K=a("6c02"),L=a("2611"),I=a("c953"),H=a("1a40"),Y=Object(n["defineComponent"])({components:{DxDataGrid:z["DxDataGrid"],DxColumn:z["DxColumn"],DxPaging:z["DxPaging"],DxPager:z["DxPager"],DxSorting:z["DxSorting"],DxHeaderFilter:z["DxHeaderFilter"],DxFilterRow:z["DxFilterRow"]},emits:["selectionChanged","openVerificationDialog"],props:["allowManage"],setup:function(e,t){var a=this,i=t.emit,r=Object(n["ref"])(null),l=Object(K["c"])(),c=Object(L["a"])();function d(e){return void 0!==e&&null!==e&&""!==e}Object(n["onMounted"])((function(){}));var u=Object(n["inject"])("env"),s=new G.a({key:"id",load:function(e){var t="?";["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(a){a in e&&d(e[a])&&(t+="".concat(a,"=").concat(JSON.stringify(e[a]),"&"))})),t=t.slice(0,-1),"admin"==l.meta.role&&(t+="&distributor_id=".concat(l.params.distributor_id));var a="".concat(u["VUE_APP_API_ENDPOINT"],"/demplot-reports").concat(t);return I["a"].get(a).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),p=(Object(n["inject"])("updateFormData"),function(e){var t=e.selectedRowsData;i("selectionChanged",t[0])}),f=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:c.$confirm("Hapus data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H["a"].destroy(t).then((function(e){$.a.success({title:"Success",position:"bottom-right"}),m()})).catch((function(e){$.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})))).catch((function(){}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){r.value.instance.refresh()},b=function(){r.value.instance.clearSelection()},v=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:m.bind(a)}})},g=function(e,t){e.recommended=t,i("openVerificationDialog",e)};return Object(A["a"])({env:u,route:l,store:s,onSelectionChanged:p,destroy:f,onToolbarPreparing:v,refreshDataGrid:m,clearSelection:b,root:r,openVerificationDialog:g},"route",l)}}),X=a("6b0d"),W=a.n(X);const J=W()(Y,[["render",q]]);var Q=J,Z=a("3c6f"),ee={id:null,farmer_name:null,farmer_group:null,demplot_start_date:null,demplot_end_date:null,province_id:null,city_id:null,district_id:null,village_id:null,latitude:null,longitude:null,demplot_area:null,planting_date:null,demplot_photo_file_path:null,demplot_report_file_path:null,demplot_agreement_file_path:null,evaluation_period_id:null,kuartal:null},te=a("25a0"),ae=a("e3e1"),ne=a("2022"),ie=a("1d8d"),re=a("5502"),oe=["id"],le=["id"],ce=Object(n["defineComponent"])({components:{DocumentFormPenilaian:M["a"],FormItem:ne["a"],DataGrid:Q},props:["evaluationPeriod"],setup:function(e){Object(K["c"])();var t=Object(re["d"])(),a=t.state.auth.user,i=Object(n["ref"])(!1),r=Object(n["ref"])(!0),l=Object(L["a"])(),c=Object(n["ref"])(null),d=Object(n["ref"])(null),u=Object(n["inject"])("env"),s=Object(n["reactive"])(Object(U["a"])({},ee)),p={farmer_name:{required:ae["c"]},farmer_group:{required:ae["c"]},demplot_start_date:{required:ae["c"]},demplot_end_date:{required:ae["c"]},province_id:{required:ae["c"]},city_id:{required:ae["c"]},district_id:{required:ae["c"]},village_id:{required:ae["c"]},latitude:{required:ae["c"]},longitude:{required:ae["c"]},demplot_area:{required:ae["c"]},planting_date:{required:ae["c"]},demplot_photo_file_path:{required:ae["c"]},demplot_report_file_path:{required:ae["c"]},demplot_agreement_file_path:{required:ae["c"]}},f=Object(te["a"])(p,Object(n["toRefs"])(s)),m=function(){for(var e in ee)s[e]=ee[e];f.value.$reset(),N()},b=function(e){var t=Object(n["toRefs"])(s);for(var a in ee)Object.hasOwnProperty.call(e,a)&&(t[a].value=e[a])},v=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null==t){e.next=15;break}return b(t),r.value=!0,i.value=!0,e.next=6,C(!1);case 6:return e.next=8,P(t.province_id,!1);case 8:return e.next=10,R(t.city_id,!1);case 10:return e.next=12,S(t.district_id,!1);case 12:null!=y.value&&(r.value=!1),e.next=17;break;case 15:m(),i.value=!1;case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:f.value.$touch(),f.value.$invalid?$.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):l.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s.id,t=Object(F["a"])(s,oe),t.distributor_id=a.distributor.id,r.value=!0,e.next=5,H["a"].update(s.id,t).then((function(e){$.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),c.value.clearSelection(),c.value.refreshDataGrid(),m()})).catch((function(e){$.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){r.value=!1}));case 5:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:f.value.$touch(),f.value.$invalid?$.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):l.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s.id,t=Object(F["a"])(s,le),t.distributor_id=a.distributor.id,r.value=!0,e.next=5,H["a"].add(t).then((function(e){$.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),d.value.clearFiles(),c.value.refreshDataGrid(),m()})).catch((function(e){$.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){r.value=!1}));case 5:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(e,t,a){s.demplot_report_file_path=e.id},j=function(e,t,a){s.demplot_agreement_file_path=e.id},_=function(e,t,a){s.demplot_photo_file_path=e.id},w=function(e){var t=window.open(u["VUE_APP_API_ENDPOINT"]+"/files?filePath="+e.url,"_blank");t.focus()};function D(e){v(e)}Object(n["provide"])("updateFormData",v);var k=Object(n["ref"])([]),V=Object(n["ref"])([]),x=Object(n["ref"])([]),y=Object(n["ref"])([]);Object(n["onMounted"])(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:C(),null!=k.value&&(r.value=!1,N());case 2:case"end":return e.stop()}}),e)}))));var N=function(){s.evaluation_period_id=e.evaluationPeriod.id,s.kuartal=e.evaluationPeriod.active_kuartal},C=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ie["a"].province().then((function(e){k.value=e.data})).finally((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return V.value=[],e.next=3,ie["a"].city(s.province_id).then((function(e){V.value=e.data})).finally((function(){}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return x.value=[],e.next=3,ie["a"].district(s.city_id).then((function(e){x.value=e.data})).finally((function(){}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return y.value=[],e.next=3,ie["a"].village(s.district_id).then((function(e){y.value=e.data})).finally((function(){}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=Object(n["ref"])(!1),T=Object(n["ref"])(null),M=Object(n["reactive"])({notes:""}),q=function(e){B.value=!0,T.value=e},A=function(){c.value.refreshDataGrid()};return{env:u,formData:s,validate:f,dataGrid:c,updateMode:i,loading:r,save:g,add:h,resetFormData:m,onReportUploadSuccess:O,onAgreementUploadSuccess:j,onDemplotPhotoUploadSuccess:_,elUpload:d,handlePreview:w,onSelectionChanged:D,dialogVisible:B,dialogData:T,dialogFormData:M,openVerificationDialog:q,refreshDataGrid:A,provinces:k,cities:V,districts:x,villages:y,getCities:P,getDistricts:R,getVillages:S,EvaluationAspectType:Z["a"]}},data:function(){return{}}});const de=W()(ce,[["render",B]]);var ue=de,se={class:"intro-y col-span-12 lg:col-span-12"},pe={class:"p-5"},fe={class:"mt-3"},me={class:"sm:grid grid-cols-2 gap-5"},be={class:"mt-3"},ve={class:"grid grid-cols-2 gap-5"},ge={class:"sm:grid grid-cols-2 gap-5 mt-3"},he={class:"sm:grid grid-cols-2 gap-5 mt-3"},Oe={class:"sm:grid grid-cols gap-5"},je={key:0,class:"mt-3"},_e=Object(n["createVNode"])("label",{class:"form-label"},"Maps",-1),we={class:"h-40 xxl:h-56 image-fit"},De={class:"mt-3"},ke={class:"sm:grid grid-cols-2 gap-5"},Ve=Object(n["createTextVNode"])("Click to upload"),xe={class:"mt-3"},ye={class:"sm:grid grid-cols-2 gap-5"},Ne=Object(n["createTextVNode"])("Click to upload"),Ce=Object(n["createTextVNode"])("Click to upload"),Pe={class:"flex w-full px-5"},Re={key:1,class:"ml-auto"},Se={key:1};function Be(e,t,a,i,r,o){var l=Object(n["resolveComponent"])("form-item"),c=Object(n["resolveComponent"])("el-date-picker"),d=Object(n["resolveComponent"])("el-option"),u=Object(n["resolveComponent"])("el-select"),s=Object(n["resolveComponent"])("el-button"),p=Object(n["resolveComponent"])("el-upload"),f=Object(n["resolveComponent"])("DataGrid"),m=Object(n["resolveComponent"])("document-form-penilaian"),b=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createBlock"])("div",se,[Object(n["withDirectives"])(Object(n["createVNode"])(m,{title:"Kegiatan Sosialisasi",evaluationPeriod:e.evaluationPeriod,itemType:e.EvaluationAspectType.SocializationReport},{default:Object(n["withCtx"])((function(a){var i=a.allowManage;return[Object(n["createVNode"])("div",pe,[Object(n["createVNode"])("div",fe,[Object(n["createVNode"])("div",me,[Object(n["createVNode"])(l,{label:"Nama Kegiatan",validationData:e.validate.socialization_name},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{type:"text",placeholder:"",class:["form-control w-full",{"border-theme-6":e.validate.socialization_name.$error}],"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.validate.socialization_name.$model=t})},null,2),[[n["vModelText"],e.validate.socialization_name.$model]])]})),_:1},8,["validationData"]),Object(n["createVNode"])(l,{label:"Tanggal Kegiatan",validationData:e.validate.socialization_date},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{class:["form-control w-full",{"border-theme-6":e.validate.socialization_date.$error}],modelValue:e.validate.socialization_date.$model,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.validate.socialization_date.$model=t}),placeholder:"YYYY/MM/DD"},null,8,["modelValue","class"])]})),_:1},8,["validationData"])])]),Object(n["createVNode"])("div",be,[Object(n["createVNode"])("div",ve,[Object(n["createVNode"])(l,{label:"Propinsi","rules-text":"Required",validationData:e.validate.province_id},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(u,{clearable:"",modelValue:e.formData.province_id,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.formData.province_id=t}),class:["form-control",{"border-theme-6":e.validate.province_id.$error}],filterable:"",onChange:e.getCities},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.provinces,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:e.province_id,label:e.province_name,value:e.province_id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","class","onChange"])]})),_:1},8,["validationData"]),Object(n["createVNode"])(l,{label:"Kota/Kabupaten","rules-text":"Required",validationData:e.validate.city_id},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(u,{clearable:"",modelValue:e.formData.city_id,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.formData.city_id=t}),class:["form-control",{"border-theme-6":e.validate.city_id.$error}],filterable:"",disabled:null==e.validate.province_id.$model,onChange:e.getDistricts},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.cities,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:e.city_id,label:"".concat(e.city_type," ").concat(e.city_name),value:e.city_id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","class","disabled","onChange"])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",ge,[Object(n["createVNode"])(l,{label:"Kecamatan","rules-text":"Required",validationData:e.validate.district_id,class:"intro-y"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(u,{modelValue:e.formData.district_id,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.formData.district_id=t}),class:["form-control",{"border-theme-6":e.validate.district_id.$error}],disabled:null==e.validate.city_id.$model,filterable:"",onChange:e.getVillages},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.districts,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:e.district_id,label:e.district_name,value:e.district_id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","class","disabled","onChange"])]})),_:1},8,["validationData"]),Object(n["createVNode"])(l,{label:"Kelurahan/Desa - Kode Pos","rules-text":"Required",validationData:e.validate.village_id,class:"intro-y"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(u,{class:["form-control",{"border-theme-6":e.validate.village_id.$error}],modelValue:e.formData.village_id,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.formData.village_id=t}),disabled:null==e.validate.district_id.$model,filterable:""},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.villages,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:e.village_id,label:"".concat(e.village_name," - ").concat(e.postal_code),value:e.village_id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","class","disabled"])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",he,[Object(n["createVNode"])(l,{label:"Latitude",validationData:e.validate.latitude},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{type:"text",placeholder:"",class:["form-control w-full",{"border-theme-6":e.validate.latitude.$error}],"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.validate.latitude.$model=t})},null,2),[[n["vModelText"],e.validate.latitude.$model]])]})),_:1},8,["validationData"]),Object(n["createVNode"])(l,{label:"Longitude",validationData:e.validate.longitude},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{type:"text",class:["form-control w-full",{"border-theme-6":e.validate.longitude.$error}],placeholder:"","onUpdate:modelValue":t[8]||(t[8]=function(t){return e.validate.longitude.$model=t})},null,2),[[n["vModelText"],e.validate.longitude.$model]])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",Oe,[null!=e.formData.latitude&&null!=e.formData.longitude?(Object(n["openBlock"])(),Object(n["createBlock"])("div",je,[_e,Object(n["createVNode"])("div",we,[Object(n["createVNode"])("iframe",{style:{width:"100%",height:"100%"},class:"rounded-md",id:"gmap_canvas",src:"https://maps.google.com/maps?q=".concat(e.formData.latitude,", ").concat(e.formData.longitude,"&t=&z=13&ie=UTF8&iwloc=&output=embed"),frameborder:"0",scrolling:"no",marginheight:"0",marginwidth:"0"},null,8,["src"])])])):Object(n["createCommentVNode"])("",!0)])]),Object(n["createVNode"])("div",De,[Object(n["createVNode"])("div",ke,[Object(n["createVNode"])(l,{label:"Jumlah Peserta Sosialisasi",validationData:e.validate.socialization_attendee},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{type:"number",class:["form-control w-full",{"border-theme-6":e.validate.socialization_attendee.$error}],placeholder:"","onUpdate:modelValue":t[9]||(t[9]=function(t){return e.validate.socialization_attendee.$model=t})},null,2),[[n["vModelText"],e.validate.socialization_attendee.$model]])]})),_:1},8,["validationData"]),Object(n["createVNode"])(l,{label:"File Laporan Kegiatan Sosialisasi",validationData:e.validate.socialization_report_file_path},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(p,{ref:"elUpload",class:"upload-demo",action:e.env["VUE_APP_API_ENDPOINT"]+"/files",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},"with-credentials":!0,"on-success":e.onReportUploadSuccess,"file-list":null!=e.formData.socialization_report_file_path?[{name:"file-laporan-sosialisasi",url:e.formData.socialization_report_file_path}]:[],"on-preview":e.handlePreview},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(s,{size:"small",type:"primary"},{default:Object(n["withCtx"])((function(){return[Ve]})),_:1})]})),_:1},8,["action","on-success","file-list","on-preview"])]})),_:1},8,["validationData"])])]),Object(n["createVNode"])("div",xe,[Object(n["createVNode"])("div",ye,[Object(n["createVNode"])(l,{label:"Upload Bukti Foto Sosialisasi",validationData:e.validate.bukti_foto},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(p,{ref:"elUpload",class:"upload-demo",action:e.env["VUE_APP_API_ENDPOINT"]+"/files",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},"with-credentials":!0,"on-success":e.buktiFotoUploadSukses,"file-list":null!=e.formData.bukti_foto?[{name:"file-bukti-foto",url:e.formData.bukti_foto}]:[],"on-preview":e.handlePreview},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(s,{size:"small",type:"primary"},{default:Object(n["withCtx"])((function(){return[Ne]})),_:1})]})),_:1},8,["action","on-success","file-list","on-preview"])]})),_:1},8,["validationData"]),Object(n["createVNode"])(l,{label:"Upload Daftar Hadir Sosialisasi",validationData:e.validate.file_daftar_hadir},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(p,{ref:"elUpload",class:"upload-demo",action:e.env["VUE_APP_API_ENDPOINT"]+"/files",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},"with-credentials":!0,"on-success":e.uploadDaftarHadir,"file-list":null!=e.formData.file_daftar_hadir?[{name:"file-daftar-hadir",url:e.formData.file_daftar_hadir}]:[],"on-preview":e.handlePreview},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(s,{size:"small",type:"primary"},{default:Object(n["withCtx"])((function(){return[Ce]})),_:1})]})),_:1},8,["action","on-success","file-list","on-preview"])]})),_:1},8,["validationData"])])])]),Object(n["createVNode"])("div",Pe,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-outline-secondary mr-2",onClick:t[10]||(t[10]=function(){var t;return e.dataGrid.clearSelection&&(t=e.dataGrid).clearSelection.apply(t,arguments)})}," Clear Selection ")):Object(n["createCommentVNode"])("",!0),i?(Object(n["openBlock"])(),Object(n["createBlock"])("div",Re,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,disabled:e.loading,class:[{"cursor-not-allowed":e.loading},"btn btn-primary w-24 mr-2"],type:"button",onClick:t[11]||(t[11]=function(){return e.save&&e.save.apply(e,arguments)})}," Save ",10,["disabled"])):(Object(n["openBlock"])(),Object(n["createBlock"])("div",Se,[Object(n["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-2",onClick:t[12]||(t[12]=function(){return e.resetFormData&&e.resetFormData.apply(e,arguments)})}," Reset "),Object(n["createVNode"])("button",{disabled:e.loading,class:[{"cursor-not-allowed":e.loading},"btn bg-theme-9 text-white w-24"],type:"button",onClick:t[13]||(t[13]=function(){return e.add&&e.add.apply(e,arguments)})}," Add ",10,["disabled"])]))])):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])(f,{ref:"dataGrid",class:"m-5",allowManage:i,onSelectionChanged:e.onSelectionChanged},null,8,["allowManage","onSelectionChanged"])]})),_:1},8,["evaluationPeriod","itemType"]),[[b,e.loading]])])}function Te(e,t,a,i,r,o){var l=Object(n["resolveComponent"])("DxColumn"),c=Object(n["resolveComponent"])("DxPaging"),d=Object(n["resolveComponent"])("DxPager"),u=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(u,{ref:"root","data-source":e.store,"show-borders":!0,"remote-operations":!0,selection:{mode:"single"},onSelectionChanged:e.onSelectionChanged,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)}),"allow-column-reordering":!0,"allow-column-resizing":!0,"column-auto-width":!0},{filePath:Object(n["withCtx"])((function(t){var a=t.data;return[Object(n["createVNode"])("a",{href:e.env["VUE_APP_API_ENDPOINT"]+"/files?filePath="+a.data.socialization_report_file_path,class:"btn btn-sm bg-theme-9 rounded-lg text-white",target:"_blank"},"File Laporan",8,["href"])]})),pathFotoSosialisasi:Object(n["withCtx"])((function(t){var a=t.data;return[Object(n["createVNode"])("a",{href:e.env["VUE_APP_API_ENDPOINT"]+"/files?filePath="+a.data.bukti_foto,class:"btn btn-sm bg-theme-9 rounded-lg text-white",target:"_blank"},"Foto Sosialiasi",8,["href"])]})),pathDaftarHadir:Object(n["withCtx"])((function(t){var a=t.data;return[Object(n["createVNode"])("a",{href:e.env["VUE_APP_API_ENDPOINT"]+"/files?filePath="+a.data.file_daftar_hadir,class:"btn btn-sm bg-theme-9 rounded-lg text-white",target:"_blank"},"File Daftar Hadir ",8,["href"])]})),cellTemplate:Object(n["withCtx"])((function(t){var a=t.data;return[Object(n["createVNode"])("button",{onClick:function(t){return e.destroy(a.data.id)},class:"btn btn-sm bg-theme-6 rounded-lg text-white"}," Delete ",8,["onClick"])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{"data-field":"socialization_name","data-type":"string",caption:"Nama Kegiatan"}),Object(n["createVNode"])(l,{"data-field":"socialization_date_formatted","data-type":"string",caption:"Tanggal Kegiatan"}),Object(n["createVNode"])(l,{"data-field":"socialization_report_file_path","data-type":"string",caption:"File Laporan","cell-template":"filePath"}),Object(n["createVNode"])(l,{"data-field":"bukti_foto","data-type":"string",caption:"File Foto Sosialisasi","cell-template":"pathFotoSosialisasi"}),Object(n["createVNode"])(l,{"data-field":"bukti_foto","data-type":"string",caption:"File Daftar Sosialisasi","cell-template":"pathDaftarHadir"}),"distributor"==e.route.meta.role&&e.allowManage?(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:0,allowFiltering:!1,width:100,"data-field":"id",caption:"Aksi","cell-template":"cellTemplate"})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(c,{"page-size":5}),Object(n["createVNode"])(d,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20]})]})),_:1},8,["data-source","onSelectionChanged"])}var $e="/socialization-reports",Fe=function(){return I["a"].get($e)},Ue=function(e){return I["a"].post($e,e)},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return I["a"].delete($e+"/".concat(e))},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return I["a"].put($e+"/".concat(e),t)},Ae={get:Fe,add:Ue,update:qe,destroy:Me},ze=Object(n["defineComponent"])({components:{DxDataGrid:z["DxDataGrid"],DxColumn:z["DxColumn"],DxPaging:z["DxPaging"],DxPager:z["DxPager"],DxSorting:z["DxSorting"],DxHeaderFilter:z["DxHeaderFilter"],DxFilterRow:z["DxFilterRow"]},emits:["selectionChanged","openVerificationDialog"],props:["allowManage"],setup:function(e,t){var a=this,i=t.emit,r=Object(n["ref"])(null),l=Object(K["c"])(),c=Object(L["a"])();function d(e){return void 0!==e&&null!==e&&""!==e}Object(n["onMounted"])((function(){}));var u=Object(n["inject"])("env"),s=new G.a({key:"id",load:function(e){var t="?";["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(a){a in e&&d(e[a])&&(t+="".concat(a,"=").concat(JSON.stringify(e[a]),"&"))})),t=t.slice(0,-1),"admin"==l.meta.role&&(t+="&distributor_id=".concat(l.params.distributor_id));var a="".concat(u["VUE_APP_API_ENDPOINT"],"/socialization-reports").concat(t);return I["a"].get(a).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),p=(Object(n["inject"])("updateFormData"),function(e){var t=e.selectedRowsData;i("selectionChanged",t[0])}),f=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:c.$confirm("Hapus data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ae.destroy(t).then((function(e){$.a.success({title:"Success",position:"bottom-right"}),m()})).catch((function(e){$.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})))).catch((function(){}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){r.value.instance.refresh()},b=function(){r.value.instance.clearSelection()},v=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:m.bind(a)}})},g=function(e,t){e.recommended=t,i("openVerificationDialog",e)};return Object(A["a"])({env:u,route:l,store:s,onSelectionChanged:p,destroy:f,onToolbarPreparing:v,refreshDataGrid:m,clearSelection:b,root:r,openVerificationDialog:g},"route",l)}});const Ee=W()(ze,[["render",Te]]);var Ge=Ee,Ke={id:null,socialization_name:null,socialization_date:null,province_id:null,city_id:null,district_id:null,village_id:null,latitude:null,longitude:null,socialization_report_file_path:null,socialization_attendee:null,bukti_foto:null,file_daftar_hadir:null,evaluation_period_id:null,kuartal:null},Le=["id"],Ie=["id"],He=Object(n["defineComponent"])({components:{DocumentFormPenilaian:M["a"],FormItem:ne["a"],DataGrid:Ge},props:["evaluationPeriod"],setup:function(e){Object(K["c"])();var t=Object(re["d"])(),a=t.state.auth.user,i=Object(n["ref"])(!1),r=Object(n["ref"])(!0),l=Object(L["a"])(),c=Object(n["ref"])(null),d=Object(n["ref"])(null),u=Object(n["inject"])("env"),s=Object(n["reactive"])(Object(U["a"])({},Ke)),p={socialization_name:{required:ae["c"]},socialization_date:{required:ae["c"]},province_id:{required:ae["c"]},city_id:{required:ae["c"]},district_id:{required:ae["c"]},village_id:{required:ae["c"]},latitude:{required:ae["c"]},longitude:{required:ae["c"]},socialization_report_file_path:{required:ae["c"]},socialization_attendee:{required:ae["c"]},bukti_foto:{required:ae["c"]},file_daftar_hadir:{required:ae["c"]}},f=Object(te["a"])(p,Object(n["toRefs"])(s)),m=function(){for(var e in Ke)s[e]=Ke[e];f.value.$reset(),N()},b=function(e){var t=Object(n["toRefs"])(s);for(var a in Ke)Object.hasOwnProperty.call(e,a)&&(t[a].value=e[a])},v=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null==t){e.next=15;break}return b(t),r.value=!0,i.value=!0,e.next=6,C(!1);case 6:return e.next=8,P(t.province_id,!1);case 8:return e.next=10,R(t.city_id,!1);case 10:return e.next=12,S(t.district_id,!1);case 12:null!=y.value&&(r.value=!1),e.next=17;break;case 15:m(),i.value=!1;case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:f.value.$touch(),f.value.$invalid?$.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):l.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s.id,t=Object(F["a"])(s,Le),t.distributor_id=a.distributor.id,r.value=!0,e.next=5,Ae.update(s.id,t).then((function(e){$.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),c.value.clearSelection(),c.value.refreshDataGrid(),m()})).catch((function(e){$.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){r.value=!1}));case 5:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:f.value.$touch(),f.value.$invalid?$.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):l.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s.id,t=Object(F["a"])(s,Ie),t.distributor_id=a.distributor.id,r.value=!0,e.next=5,Ae.add(t).then((function(e){$.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),d.value.clearFiles(),c.value.refreshDataGrid(),m()})).catch((function(e){$.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){r.value=!1}));case 5:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(e,t,a){s.socialization_report_file_path=e.id},j=function(e){s.bukti_foto=e.id},_=function(e){s.file_daftar_hadir=e.id},w=function(e){var t=window.open(u["VUE_APP_API_ENDPOINT"]+"/files?filePath="+e.url,"_blank");t.focus()};function D(e){v(e)}Object(n["provide"])("updateFormData",v);var k=Object(n["ref"])([]),V=Object(n["ref"])([]),x=Object(n["ref"])([]),y=Object(n["ref"])([]);Object(n["onMounted"])(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:C(),null!=k.value&&(r.value=!1,N());case 2:case"end":return e.stop()}}),e)}))));var N=function(){s.evaluation_period_id=e.evaluationPeriod.id,s.kuartal=e.evaluationPeriod.active_kuartal},C=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ie["a"].province().then((function(e){k.value=e.data})).finally((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return V.value=[],e.next=3,ie["a"].city(s.province_id).then((function(e){V.value=e.data})).finally((function(){}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return x.value=[],e.next=3,ie["a"].district(s.city_id).then((function(e){x.value=e.data})).finally((function(){}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return y.value=[],e.next=3,ie["a"].village(s.district_id).then((function(e){y.value=e.data})).finally((function(){}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=Object(n["ref"])(!1),T=Object(n["ref"])(null),M=Object(n["reactive"])({notes:""}),q=function(e){B.value=!0,T.value=e},A=function(){c.value.refreshDataGrid()};return{env:u,formData:s,validate:f,dataGrid:c,updateMode:i,loading:r,save:g,add:h,resetFormData:m,onReportUploadSuccess:O,elUpload:d,handlePreview:w,onSelectionChanged:D,dialogVisible:B,dialogData:T,dialogFormData:M,openVerificationDialog:q,refreshDataGrid:A,provinces:k,cities:V,districts:x,villages:y,getCities:P,getDistricts:R,getVillages:S,buktiFotoUploadSukses:j,uploadDaftarHadir:_,EvaluationAspectType:Z["a"]}},data:function(){return{}}});const Ye=W()(He,[["render",Be]]);var Xe=Ye,We=a("730f"),Je=Object(n["defineComponent"])({components:{DemplotPanel:ue,SocializationPanel:Xe},setup:function(){var e=Object(n["ref"])(null),t=Object(n["ref"])(!0);return Object(n["onMounted"])(Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.value=!0,a.next=3,We["a"].getActive().then((function(t){e.value=t.data}));case 3:t.value=!1;case 4:case"end":return a.stop()}}),a)})))),{evaluationPeriod:e,loading:t}}});const Qe=W()(Je,[["render",r]]);t["default"]=Qe}}]);