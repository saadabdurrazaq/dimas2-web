(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2965c641"],{"15fd":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a("a4d3"),a("b64b");function n(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}function o(e,t){if(null==e)return{};var a,o,r=n(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)a=i[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}},d383:function(e,t,a){"use strict";a.r(t);var n=a("7a23"),o={class:"grid grid-cols-12 gap-6"};function r(e,t,a,r,i,c){var l=Object(n["resolveComponent"])("media-reportation-panel"),d=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createBlock"])("div",null,[Object(n["withDirectives"])(Object(n["createVNode"])("div",o,[e.loading?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:0,evaluationPeriod:e.evaluationPeriod},null,8,["evaluationPeriod"]))],512),[[d,e.loading]])])}var i=a("1da1"),c=(a("96cf"),{class:"intro-y col-span-12 lg:col-span-12"}),l={class:"p-5"},d={class:"mt-3"},u={class:"sm:grid grid-cols gap-5"},s={class:"mt-3"},b={class:"sm:grid grid-cols-2 gap-5"},p={class:"mt-3"},f={class:"sm:grid grid-cols-2 gap-5"},m=Object(n["createTextVNode"])("Click to upload"),v={class:"flex w-full px-5"},O={key:1,class:"ml-auto"},j={key:1};function h(e,t,a,o,r,i){var h=Object(n["resolveComponent"])("form-item"),g=Object(n["resolveComponent"])("el-date-picker"),w=Object(n["resolveComponent"])("el-option"),k=Object(n["resolveComponent"])("el-select"),_=Object(n["resolveComponent"])("el-button"),D=Object(n["resolveComponent"])("el-upload"),C=Object(n["resolveComponent"])("DataGrid"),x=Object(n["resolveComponent"])("document-form-penilaian"),y=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createBlock"])("div",c,[Object(n["withDirectives"])(Object(n["createVNode"])(x,{title:"Pemberitaan Media",evaluationPeriod:e.evaluationPeriod,itemType:e.EvaluationAspectType.DistributorPositiveNews},{default:Object(n["withCtx"])((function(a){var o=a.allowManage;return[Object(n["createVNode"])("div",l,[Object(n["createVNode"])("div",d,[Object(n["createVNode"])("div",u,[Object(n["createVNode"])(h,{label:"Headline",validationData:e.validate.headline},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{type:"text",placeholder:"",class:["form-control w-full",{"border-theme-6":e.validate.headline.$error}],"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.validate.headline.$model=t})},null,2),[[n["vModelText"],e.validate.headline.$model]])]})),_:1},8,["validationData"])])]),Object(n["createVNode"])("div",s,[Object(n["createVNode"])("div",b,[Object(n["createVNode"])(h,{label:"Tanggal Berita",validationData:e.validate.news_date},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(g,{class:["form-control w-full",{"border-theme-6":e.validate.news_date.$error}],modelValue:e.validate.news_date.$model,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.validate.news_date.$model=t}),placeholder:"YYYY/MM/DD"},null,8,["modelValue","class"])]})),_:1},8,["validationData"]),Object(n["createVNode"])(h,{label:"Jenis Media","rules-text":"Required",validationData:e.validate.media_type},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(k,{clearable:"",modelValue:e.formData.media_type,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.formData.media_type=t}),class:["form-control",{"border-theme-6":e.validate.media_type.$error}],filterable:""},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(w,{label:"Koran",value:"Koran"}),Object(n["createVNode"])(w,{label:"Website",value:"Website"}),Object(n["createVNode"])(w,{label:"Social Media",value:"Social Media"})]})),_:1},8,["modelValue","class"])]})),_:1},8,["validationData"])])]),Object(n["createVNode"])("div",p,[Object(n["createVNode"])("div",f,[Object(n["createVNode"])(h,{label:"URL","rules-text":"Optional",validationData:e.validate.news_url},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{type:"text",placeholder:"",class:["form-control w-full",{"border-theme-6":e.validate.news_url.$error}],"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.validate.news_url.$model=t})},null,2),[[n["vModelText"],e.validate.news_url.$model]])]})),_:1},8,["validationData"]),Object(n["createVNode"])(h,{label:"Bukti Media",validationData:e.validate.news_evidence_file_path},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(D,{ref:"elUpload",class:"upload-demo",action:e.env["VUE_APP_API_ENDPOINT"]+"/files",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},"with-credentials":!0,"on-success":e.onEvidenceUploadSuccess,"file-list":null!=e.formData.news_evidence_file_path?[{name:"file-bukti-media",url:e.formData.news_evidence_file_path}]:[],"on-preview":e.handlePreview},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(_,{size:"small",type:"primary"},{default:Object(n["withCtx"])((function(){return[m]})),_:1})]})),_:1},8,["action","on-success","file-list","on-preview"])]})),_:1},8,["validationData"])])])]),Object(n["createVNode"])("div",v,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-outline-secondary mr-2",onClick:t[5]||(t[5]=function(){var t;return e.dataGrid.clearSelection&&(t=e.dataGrid).clearSelection.apply(t,arguments)})}," Clear Selection ")):Object(n["createCommentVNode"])("",!0),o?(Object(n["openBlock"])(),Object(n["createBlock"])("div",O,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,disabled:e.loading,class:[{"cursor-not-allowed":e.loading},"btn btn-primary w-24 mr-2"],type:"button",onClick:t[6]||(t[6]=function(){return e.save&&e.save.apply(e,arguments)})}," Save ",10,["disabled"])):(Object(n["openBlock"])(),Object(n["createBlock"])("div",j,[Object(n["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-2",onClick:t[7]||(t[7]=function(){return e.resetFormData&&e.resetFormData.apply(e,arguments)})}," Reset "),Object(n["createVNode"])("button",{disabled:e.loading,class:[{"cursor-not-allowed":e.loading},"btn bg-theme-9 text-white w-24"],type:"button",onClick:t[8]||(t[8]=function(){return e.add&&e.add.apply(e,arguments)})}," Add ",10,["disabled"])]))])):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])(C,{ref:"dataGrid",class:"m-5",allowManage:o,onSelectionChanged:e.onSelectionChanged},null,8,["allowManage","onSelectionChanged"])]})),_:1},8,["evaluationPeriod","itemType"]),[[y,e.loading]])])}a("0cfa");var g=a("5040"),w=a.n(g),k=a("15fd"),_=a("5530"),D=(a("d3b7"),a("84df")),C={key:0};function x(e,t,a,o,r,i){var c=Object(n["resolveComponent"])("DxColumn"),l=Object(n["resolveComponent"])("DxPaging"),d=Object(n["resolveComponent"])("DxPager"),u=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(u,{ref:"root","data-source":e.store,"show-borders":!0,"remote-operations":!0,selection:{mode:"single"},onSelectionChanged:e.onSelectionChanged,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)}),"allow-column-reordering":!0,"allow-column-resizing":!0,"column-auto-width":!0},{filePath:Object(n["withCtx"])((function(t){var a=t.data;return[Object(n["createVNode"])("a",{href:e.env["VUE_APP_API_ENDPOINT"]+"/files?filePath="+a.data.news_evidence_file_path,class:"btn btn-sm bg-theme-9 rounded-lg text-white",target:"_blank"},"File Bukti Media",8,["href"])]})),cellTemplate:Object(n["withCtx"])((function(t){var a=t.data;return[Object(n["createVNode"])("button",{onClick:function(t){return e.destroy(a.data.id)},class:"btn btn-sm bg-theme-6 rounded-lg text-white"}," Delete ",8,["onClick"])]})),vaCellTemplate:Object(n["withCtx"])((function(t){var a=t.data;return[null==a.data.bundle_item_detail_verification.is_verified?(Object(n["openBlock"])(),Object(n["createBlock"])("div",C,[Object(n["createVNode"])("button",{onClick:function(t){return e.openVerificationDialog(a.data,!0)},class:"btn btn-sm bg-theme-9 rounded-lg text-white"}," Approved ",8,["onClick"]),Object(n["createVNode"])("button",{onClick:function(t){return e.openVerificationDialog(a.data,!1)},class:"btn btn-sm bg-theme-6 rounded-lg text-white"}," Reject ",8,["onClick"])])):Object(n["createCommentVNode"])("",!0)]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{"data-field":"headline","data-type":"string",caption:"Headline"}),Object(n["createVNode"])(c,{"data-field":"news_date","data-type":"string",caption:"Tanggal Berita"}),Object(n["createVNode"])(c,{"data-field":"media_type","data-type":"string",caption:"Jenis Media"}),Object(n["createVNode"])(c,{"data-field":"news_evidence_file_path","data-type":"string",caption:"File Bukti Media","cell-template":"filePath"}),"distributor"==e.route.meta.role&&e.allowManage?(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:0,allowFiltering:!1,width:100,"data-field":"id",caption:"Aksi","cell-template":"cellTemplate"})):Object(n["createCommentVNode"])("",!0),"admin"==e.route.meta.role?(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:1,"data-field":"bundle_item_detail_verification",caption:"Verifikasi","cell-template":"vaCellTemplate"})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(l,{"page-size":5}),Object(n["createVNode"])(d,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20]})]})),_:1},8,["data-source","onSelectionChanged"])}var y=a("ade3"),V=(a("99af"),a("fb6a"),a("d30a")),N=a("2597"),P=a.n(N),S=a("c953"),B="/distributor-positive-news",R=function(){return S["a"].get(B)},M=function(e){return S["a"].post(B,e)},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return S["a"].delete(B+"/".concat(e))},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return S["a"].put(B+"/".concat(e),t)},F={get:R,add:M,update:$,destroy:T},G=a("6c02"),A=a("2611"),E=Object(n["defineComponent"])({components:{DxDataGrid:V["DxDataGrid"],DxColumn:V["DxColumn"],DxPaging:V["DxPaging"],DxPager:V["DxPager"],DxSorting:V["DxSorting"],DxHeaderFilter:V["DxHeaderFilter"],DxFilterRow:V["DxFilterRow"]},emits:["selectionChanged","openVerificationDialog"],props:["allowManage"],setup:function(e,t){var a=this,o=t.emit,r=Object(n["ref"])(null),c=Object(G["c"])(),l=Object(A["a"])();function d(e){return void 0!==e&&null!==e&&""!==e}Object(n["onMounted"])((function(){}));var u=Object(n["inject"])("env"),s=new P.a({key:"id",load:function(e){var t="?";["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(a){a in e&&d(e[a])&&(t+="".concat(a,"=").concat(JSON.stringify(e[a]),"&"))})),t=t.slice(0,-1),"admin"==c.meta.role&&(t+="&distributor_id=".concat(c.params.distributor_id));var a="".concat(u["VUE_APP_API_ENDPOINT"],"/distributor-positive-news").concat(t);return S["a"].get(a).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),b=(Object(n["inject"])("updateFormData"),function(e){var t=e.selectedRowsData;o("selectionChanged",t[0])}),p=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:l.$confirm("Hapus data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,F.destroy(t).then((function(e){w.a.success({title:"Success",position:"bottom-right"}),f()})).catch((function(e){w.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})))).catch((function(){}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){r.value.instance.refresh()},m=function(){r.value.instance.clearSelection()},v=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:f.bind(a)}})},O=function(e,t){e.recommended=t,o("openVerificationDialog",e)};return Object(y["a"])({env:u,route:c,store:s,onSelectionChanged:b,destroy:p,onToolbarPreparing:v,refreshDataGrid:f,clearSelection:m,root:r,openVerificationDialog:O},"route",c)}}),U=a("6b0d"),I=a.n(U);const q=I()(E,[["render",x]]);var K=q,H={id:null,headline:null,news_date:null,media_type:null,news_url:null,news_evidence_file_path:null,evaluation_period_id:null,kuartal:null},L=a("25a0"),z=a("e3e1"),J=a("2022"),Y=a("5502"),W=a("3c6f"),X=["id"],Q=["id"],Z=Object(n["defineComponent"])({components:{DocumentFormPenilaian:D["a"],FormItem:J["a"],DataGrid:K},props:["evaluationPeriod"],setup:function(e){Object(G["c"])();var t=Object(Y["d"])(),a=t.state.auth.user,o=Object(n["ref"])(!1),r=Object(n["ref"])(!1),c=Object(A["a"])(),l=Object(n["ref"])(null),d=Object(n["ref"])(null),u=Object(n["inject"])("env"),s=Object(n["reactive"])(Object(_["a"])({},H)),b={headline:{required:z["c"]},news_date:{required:z["c"]},media_type:{required:z["c"]},news_url:{},news_evidence_file_path:{required:z["c"]}},p=Object(L["a"])(b,Object(n["toRefs"])(s)),f=function(){for(var e in H)s[e]=H[e];p.value.$reset()},m=function(e){var t=Object(n["toRefs"])(s);for(var a in H)Object.hasOwnProperty.call(e,a)&&(t[a].value=e[a])},v=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!=t?(m(t),o.value=!0):(f(),o.value=!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:p.value.$touch(),p.value.$invalid?w.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):c.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s.id,t=Object(k["a"])(s,X),t.distributor_id=a.distributor.id,r.value=!0,e.next=5,F.update(s.id,t).then((function(e){w.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),l.value.clearSelection(),l.value.refreshDataGrid(),f()})).catch((function(e){w.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){r.value=!1}));case 5:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:p.value.$touch(),p.value.$invalid?w.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):c.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s.id,t=Object(k["a"])(s,Q),t.distributor_id=a.distributor.id,r.value=!0,e.next=5,F.add(t).then((function(e){w.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),d.value.clearFiles(),l.value.refreshDataGrid(),f()})).catch((function(e){w.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){r.value=!1}));case 5:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(e,t,a){s.news_evidence_file_path=e.id},g=function(e){var t=window.open(u["VUE_APP_API_ENDPOINT"]+"/files?filePath="+e.url,"_blank");t.focus()};function D(e){v(e)}Object(n["provide"])("updateFormData",v),Object(n["onMounted"])(Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s.evaluation_period_id=e.evaluationPeriod.id,s.kuartal=e.evaluationPeriod.active_kuartal;case 2:case"end":return t.stop()}}),t)}))));var C=Object(n["ref"])(!1),x=Object(n["ref"])(null),y=Object(n["reactive"])({notes:""}),V=function(e){C.value=!0,x.value=e},N=function(){l.value.refreshDataGrid()};return{env:u,formData:s,validate:p,dataGrid:l,updateMode:o,loading:r,save:O,add:j,resetFormData:f,onEvidenceUploadSuccess:h,elUpload:d,handlePreview:g,onSelectionChanged:D,dialogVisible:C,dialogData:x,dialogFormData:y,openVerificationDialog:V,refreshDataGrid:N,EvaluationAspectType:W["a"]}},data:function(){return{}}});const ee=I()(Z,[["render",h]]);var te=ee,ae=a("730f"),ne=Object(n["defineComponent"])({components:{MediaReportationPanel:te},setup:function(){var e=Object(n["ref"])(null),t=Object(n["ref"])(!0);return Object(n["onMounted"])(Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.value=!0,a.next=3,ae["a"].getActive().then((function(t){e.value=t.data}));case 3:t.value=!1;case 4:case"end":return a.stop()}}),a)})))),{evaluationPeriod:e,loading:t}}});const oe=I()(ne,[["render",r]]);t["default"]=oe}}]);