(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8807c720"],{"0470":function(e,t,a){"use strict";(function(e){a("d81d"),a("4fad");var r=a("72dd"),n=a("d30a"),o=a("4360"),c=a("6c02");t["a"]=Object(r["c"])({props:{templateData:{default:Object(r["p"])([])}},components:{DxDataGrid:n["DxDataGrid"],DxColumn:n["DxColumn"]},setup:function(t){var a=Object(r["p"])([]),n=Object(r["p"])(0),i=Object(o["b"])(),u=(Object(c["c"])(),i.state.auth.user,Object(r["a"])((function(){return t.templateData.data.status_per_region?Object.entries(t.templateData.data.status_per_region).map((function(e){return e[1]})):[]})));function l(t){"data"==t.rowType&&(t.data.has_active_data||e(t.rowElement).addClass("bg-theme-6 text-white"))}return{dataSource:a,regionSelection:n,statusPerRegion:u,onRowPrepared:l}}})}).call(this,a("e409"))},"0a1e":function(e,t,a){"use strict";a.r(t);a("b0c0");var r=a("7a23"),n={class:"intro-y col-span-12 lg:col-span-12"},o={class:"p-5"},c={key:1},i={key:0,class:"border border-t-0 p-5 flex items-center"},u=Object(r["createVNode"])("p",null," Harap lengkapi dokumen mandatory yang belum terisi terlebih dahulu, sebelum melakukan pengajuan verifikasi data. ",-1),l={key:1},s={class:"border border-t-0 border-b-0 p-5 flex items-center"},d={class:"mr-4"},p=Object(r["createVNode"])("p",null," Saya menyatakan bahwa seluruh pernyataan data dan informasi beserta seluruh dokumen yang saya lampirkan dalam berkas verifikasi adalah benar ",-1),b={key:2,class:"p-5 text-center"};function m(e,t,a,m,j,O){var v=Object(r["resolveComponent"])("DocumentList"),f=Object(r["resolveComponent"])("AlertCircleIcon"),g=Object(r["resolveComponent"])("document-form"),k=Object(r["resolveDirective"])("loading");return Object(r["openBlock"])(),Object(r["createBlock"])("div",n,[Object(r["withDirectives"])(Object(r["createVNode"])(g,{title:"Status Verifikasi Dokumen",useVerificationButtons:!1},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("div",o,[e.loading?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])(v,{key:0,hasActiveProposal:e.approvalAction.has_active_proposal,regions:e.regions,ref:"documentListTable"},null,8,["hasActiveProposal","regions"])),"admin"==e.route.meta.role||e.approvalAction.has_active_proposal?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])("div",c,[e.approvalAction.all_documents_fulfilled?(Object(r["openBlock"])(),Object(r["createBlock"])("div",l,[Object(r["createVNode"])("div",s,[Object(r["createVNode"])("div",d,[Object(r["withDirectives"])(Object(r["createVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.isAgree=t}),type:"checkbox"},null,512),[[r["vModelCheckbox"],e.isAgree]])]),p]),Object(r["createVNode"])("button",{onClick:t[2]||(t[2]=function(){return e.submitForVerification&&e.submitForVerification.apply(e,arguments)}),disabled:!e.isAgree,class:[{"disabled:opacity-50 cursor-not-allowed":!e.isAgree},"btn rounded-none text-white bg-theme-9 w-full"]}," Ajukan Verifikasi Data ",10,["disabled"])])):(Object(r["openBlock"])(),Object(r["createBlock"])("div",i,[Object(r["createVNode"])(f,{class:"mr-4"}),u]))])),"admin"==e.route.meta.role&&"vp_sales_region"===e.user.role.name&&e.approvalAction.allow_approve?(Object(r["openBlock"])(),Object(r["createBlock"])("div",b,[e.approvalAction.allow_reject?(Object(r["openBlock"])(),Object(r["createBlock"])("button",{key:0,onClick:t[3]||(t[3]=function(){return e.reject&&e.reject.apply(e,arguments)}),class:"btn bg-theme-6 text-white w-24 mx-2"}," Tolak ")):Object(r["createCommentVNode"])("",!0),e.approvalAction.allow_approve?(Object(r["openBlock"])(),Object(r["createBlock"])("button",{key:1,onClick:t[4]||(t[4]=function(){return e.approve&&e.approve.apply(e,arguments)}),class:"btn bg-theme-9 text-white w-24 mx-2"}," Setuju ")):Object(r["createCommentVNode"])("",!0)])):Object(r["createCommentVNode"])("",!0)])]})),_:1},512),[[k,e.loading]])])}a("0cfa");var j=a("5040"),O=a.n(j),v=a("1da1"),f=(a("43ea"),a("424b")),g=a.n(f),k=(a("398c"),a("b27e")),x=a.n(k),h=(a("96cf"),a("72dd")),w=a("c45b"),D=Object(r["createVNode"])("p",{class:"mb-4 uppercase tracking-widest text-xs"},"Status Approval",-1),B={class:"w-100 mb-1"},C={key:0,class:"bg-theme-9 text-white uppercase px-2 rounded-md"},y={key:1,class:"bg-theme-4 text-white uppercase px-2 rounded-md"},V={key:2,class:"bg-theme-6 text-white uppercase px-2 rounded-md"},N={class:"mb-2"},R={class:"mr-2"},A={class:"text-gray-600"},P={key:1,class:"mr-2"},T={key:0,class:"flex flex-col"},S={class:"flex flex-col"},G={key:0,class:"flex flex-col"},M=Object(r["createVNode"])("span",null,"Notes",-1),L={key:1,class:"flex flex-col"},I=Object(r["createVNode"])("span",null,"Notes",-1),E={key:2,class:"flex flex-col"},F=Object(r["createVNode"])("span",null,"Notes",-1),$={key:0,class:"my-2"},K={key:1,class:"my-2"};function U(e,t,a,n,o,c){var i=Object(r["resolveComponent"])("DxColumn"),u=Object(r["resolveComponent"])("DxMasterDetail"),l=Object(r["resolveComponent"])("el-card"),s=Object(r["resolveComponent"])("el-timeline-item"),d=Object(r["resolveComponent"])("el-timeline"),p=Object(r["resolveComponent"])("DxDataGrid");return Object(r["openBlock"])(),Object(r["createBlock"])(p,{ref:"root","data-source":e.customStore,"show-borders":!0,"remote-operations":{filtering:!1,paging:!1,sorting:!1},"column-auto-width":!0,onToolbarPreparing:t[2]||(t[2]=function(t){return e.onToolbarPreparing(t)})},Object(r["createSlots"])({default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,{"data-field":"region.name","data-type":"string",caption:"Region"}),Object(r["createVNode"])(i,{"data-field":"approval_data.in_progress_status_text",caption:"Status Approval"}),"distributor"!==e.user.role.name?(Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:0,class:"bg-white",enabled:!0,template:"approvalHistoryTemplate",autoExpandAll:!1})):Object(r["createCommentVNode"])("",!0)]})),_:2},["distributor"!==e.user.role.name?{name:"approvalHistoryTemplate",fn:Object(r["withCtx"])((function(a){var n=a.data;return[Object(r["createVNode"])("div",null,[D,Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(n.data.approval_history,(function(a,o){return Object(r["openBlock"])(),Object(r["createBlock"])(s,{key:a.id,"hide-timestamp":!0,type:e.getItemType(n.data,a),placement:"top"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("div",B,["success"===e.getItemType(n.data,a)?(Object(r["openBlock"])(),Object(r["createBlock"])("span",C,"Approved")):Object(r["createCommentVNode"])("",!0),"primary"===e.getItemType(n.data,a)?(Object(r["openBlock"])(),Object(r["createBlock"])("span",y,"In Progress")):Object(r["createCommentVNode"])("",!0),"danger"===e.getItemType(n.data,a)?(Object(r["openBlock"])(),Object(r["createBlock"])("span",V,"REJECTED")):Object(r["createCommentVNode"])("",!0)]),Object(r["createVNode"])("div",N,[null!=a.approval_status?(Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],{key:0},[Object(r["createVNode"])("span",R,Object(r["toDisplayString"])(a.in_progress_status_text)+" - "+Object(r["toDisplayString"])(a.approval_status.created_by_user_email),1),Object(r["createVNode"])("div",A,Object(r["toDisplayString"])(a.approval_status.created_at),1)],64)):(Object(r["openBlock"])(),Object(r["createBlock"])("span",P,Object(r["toDisplayString"])(a.in_progress_status_text),1))]),"vp_sales_region"!==e.user.role.name?(Object(r["openBlock"])(),Object(r["createBlock"])("div",T,[Object(r["createVNode"])("div",S,[n.data.level<a.level&&null!=a.approval_status?(Object(r["openBlock"])(),Object(r["createBlock"])("div",G,[M,Object(r["withDirectives"])(Object(r["createVNode"])("textarea",{readonly:n.data.level!==a.level,class:"form-control",rows:"2","onUpdate:modelValue":function(e){return a.approval_status.notes=e}},null,8,["readonly","onUpdate:modelValue"]),[[r["vModelText"],a.approval_status.notes]])])):"DITERIMA"===n.data.verification_status||null!=a.approval_status&&null!=a.approval_status.is_approved?(Object(r["openBlock"])(),Object(r["createBlock"])("div",L,[I,Object(r["withDirectives"])(Object(r["createVNode"])("textarea",{readonly:!0,class:"form-control",rows:"2","onUpdate:modelValue":function(e){return a.approval_status.notes=e}},null,8,["onUpdate:modelValue"]),[[r["vModelText"],a.approval_status.notes]])])):n.data.level===a.level&&n.data.allow_approval_action?(Object(r["openBlock"])(),Object(r["createBlock"])("div",E,[F,Object(r["withDirectives"])(Object(r["createVNode"])("textarea",{class:"form-control",rows:"2","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.approvalNote=t})},null,512),[[r["vModelText"],e.approvalNote]])])):Object(r["createCommentVNode"])("",!0)]),n.data.level===a.level&&n.data.allow_approval_action&&null==a.approval_status&&3!==a.level?(Object(r["openBlock"])(),Object(r["createBlock"])("div",$,[Object(r["createVNode"])("button",{onClick:function(t){return e.rejectBundle(n.data.id)},class:"bg-theme-6 text-white px-4 py-1 rounded-md mr-2"}," Reject ",8,["onClick"]),Object(r["createVNode"])("button",{onClick:function(t){return e.approveBundle(n.data.id)},class:"bg-theme-9 text-white px-4 py-1 rounded-md"}," Approve ",8,["onClick"])])):Object(r["createCommentVNode"])("",!0),n.data.level===a.level&&n.data.allow_approval_action&&null==a.approval_status&&3===a.level?(Object(r["openBlock"])(),Object(r["createBlock"])("div",K,[Object(r["createVNode"])("button",{onClick:function(t){return e.rejectBundle(n.data.id)},class:"bg-theme-6 text-white px-4 py-1 rounded-md mr-2"}," Not Recommended ",8,["onClick"]),Object(r["createVNode"])("button",{onClick:function(t){return e.approveBundle(n.data.id)},class:"bg-theme-9 text-white px-4 py-1 rounded-md"}," Recommended ",8,["onClick"])])):Object(r["createCommentVNode"])("",!0)])):Object(r["createCommentVNode"])("",!0)]})),_:2},1024)]})),_:2},1032,["type"])})),128))]})),_:2},1024)])]}))}:void 0]),1032,["data-source"])}a("99af");var q=a("d30a"),H=a("2597"),z=a.n(H),J=a("c953"),Q=a("6c02"),W=a("4360"),X=a("0c92"),Y=a("2611"),Z=Object(r["defineComponent"])({components:{DxDataGrid:q["DxDataGrid"],DxColumn:q["DxColumn"],DxPaging:q["DxPaging"],DxPager:q["DxPager"],DxSorting:q["DxSorting"],DxHeaderFilter:q["DxHeaderFilter"],DxFilterRow:q["DxFilterRow"],DxMasterDetail:q["DxMasterDetail"]},props:{regionCode:{default:null}},setup:function(e,t){var a=this,n=(t.emit,Object(r["ref"])(null)),o=Object(Q["c"])(),c=Object(W["b"])(),i=c.state.auth.user,u=Object(r["ref"])(null),l=Object(r["ref"])(0),s=Object(Y["a"])();console.log(o,i);var d="";d="admin"==o.meta.role?o.params.distributor_id:i.distributor.id,Object(r["onMounted"])((function(){console.log(n.value)}));var p=Object(r["inject"])("env"),b=new z.a({key:"id",load:function(t){var a="".concat(p["VUE_APP_API_ENDPOINT"],"/distributors/").concat(d,"/bundles"),r={};return null!=e.regionCode&&(r.region_code=e.regionCode),"admin"==o.meta.role&&(r.registration_period=o.query.registration_period),J["a"].get(a,{params:r}).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),m=function(){n.value.instance.refresh()},j=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:m.bind(a)}})},f=function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.$confirm("Setujui Approval Bundle?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(v["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,X["a"].approveBundle(t,u.value,l.value).then((function(e){O.a.success({title:"Bundle berhasil disetujui",position:"bottom-right"}),u.value=null,l.value=0,m()})).catch((function(){O.a.error({title:"Bundle gagal disetujui",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.$confirm("Tolak Approval Bundle?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(v["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,X["a"].rejectBundle(t,u.value).then((function(e){O.a.success({title:"Bundle berhasil ditolak",position:"bottom-right"}),u.value=null,l.value=0,m()})).catch((function(){O.a.error({title:"Proses gagal",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(e,t){if("DITERIMA"===e.verification_status)return"success";if(console.log(t.approval_status),null!=t.approval_status){if(e.level>t.level&&t.approval_status.is_approved)return"success";if(!t.approval_status.is_approved)return"danger"}return e.level===t.level?"primary":"info"};return{customStore:b,refreshDataGrid:m,onToolbarPreparing:j,root:n,route:o,user:i,approveBundle:f,rejectBundle:g,getItemType:k,approvalNote:u,allocation:l}}});Z.render=U;var ee=Z,te=a("191b");function ae(e,t,a,n,o,c){var i=Object(r["resolveComponent"])("DxColumn"),u=Object(r["resolveComponent"])("DxMasterDetail"),l=Object(r["resolveComponent"])("DetailTemplate"),s=Object(r["resolveComponent"])("DxPaging"),d=Object(r["resolveComponent"])("DxDataGrid");return Object(r["openBlock"])(),Object(r["createBlock"])(d,{ref:"dataGrid",id:"grid-container","show-borders":!0,"data-source":e.dataSource,"key-expr":"id",paging:{enabled:!1,pageSize:50},onRowPrepared:e.onRowPrepared},{masterDetailTemplate:Object(r["withCtx"])((function(e){var t=e.data;return[Object(r["createVNode"])(l,{templateData:t},null,8,["templateData"])]})),default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,{"data-field":"document_name",caption:"Nama Dokumen"}),Object(r["createVNode"])(i,{width:100,"data-field":"is_mandatory",caption:"Harus diisi","data-type":"boolean"}),Object(r["createVNode"])(u,{enabled:!0,template:"masterDetailTemplate",autoExpandAll:!0}),Object(r["createVNode"])(s,{"page-size":50})]})),_:1},8,["data-source","onRowPrepared"])}function re(e,t,a,n,o,c){var i=Object(r["resolveComponent"])("DxColumn"),u=Object(r["resolveComponent"])("DxDataGrid");return Object(r["openBlock"])(),Object(r["createBlock"])("div",null,[Object(r["createVNode"])(u,{"data-source":e.statusPerRegion,"show-borders":!0,"column-auto-width":!0,onRowPrepared:e.onRowPrepared},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,{caption:"Region","data-field":"name"}),Object(r["createVNode"])(i,{caption:"Sudah diisi","data-field":"has_active_data"}),Object(r["createVNode"])(i,{"data-field":"verification_status",caption:"Status Verifikasi"})]})),_:1},8,["data-source","onRowPrepared"])])}var ne=a("0470");ne["a"].render=re;var oe=ne["a"],ce=Object(h["c"])({components:{DxDataGrid:q["DxDataGrid"],DxColumn:q["DxColumn"],DxMasterDetail:q["DxMasterDetail"],DetailTemplate:oe,DxPaging:q["DxPaging"]},setup:function(){var e=Object(h["p"])([]),t=Object(W["b"])(),a=t.state.auth.user,r=Object(h["p"])(!1),n=Object(Q["c"])(),o=Object(h["p"])({}),c=Object(h["p"])(null);Object(h["k"])(Object(v["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:case"end":return e.stop()}}),e)}))));var i=function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="",r="admin"==n.meta.role?n.params.distributor_id:a.distributor.id,t.next=4,te["a"].getActiveDocuments(r).then((function(t){e.value=t.data.documents,o.value=t.data.approval_action,u.value=_.sortBy(t.data.documents,"id")}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),u=Object(h["p"])([]),l=function(e){};return{activeDocumentList:e,isAgree:r,user:a,route:n,approvalAction:o,dataSource:u,onRowPrepared:l,dataGrid:c}}});ce.render=ae;var ie=ce,ue={key:0},le=Object(r["createVNode"])("p",null,"Bundles",-1),se=Object(r["createVNode"])("p",null,"Documents",-1);function de(e,t,a,n,o,c){var i=Object(r["resolveComponent"])("DxColumn"),u=Object(r["resolveComponent"])("DxMasterDetail"),l=Object(r["resolveComponent"])("ApprovalBundle"),s=Object(r["resolveComponent"])("DetailTemplate"),d=Object(r["resolveComponent"])("DxPaging"),p=Object(r["resolveComponent"])("DxDataGrid");return Object(r["openBlock"])(),Object(r["createBlock"])(p,{ref:"dataGrid",id:"grid-container","show-borders":!0,"data-source":e.dataSource,"key-expr":"code",paging:{enabled:!1,pageSize:50},onRowPrepared:e.onRowPrepared,"column-auto-width":!0},{masterDetailTemplate:Object(r["withCtx"])((function(t){var a=t.data;return[Object(r["createVNode"])("div",null,[e.hasActiveProposal?(Object(r["openBlock"])(),Object(r["createBlock"])("div",ue,[le,Object(r["createVNode"])(l,{ref:"approvalBundleDataGrid",class:"mb-4",regionCode:a.data.code},null,8,["regionCode"])])):Object(r["createCommentVNode"])("",!0),se,Object(r["createVNode"])(s,{templateData:e.activeDocumentList,regionCode:a.data.code},null,8,["templateData","regionCode"])])]})),default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,{"data-field":"name",caption:"Region"}),Object(r["createVNode"])(u,{class:"bg-white",enabled:!0,template:"masterDetailTemplate",autoExpandAll:!0}),Object(r["createVNode"])(d,{"page-size":50})]})),_:1},8,["data-source","onRowPrepared"])}var pe=Object(r["createVNode"])("div",{class:"flex items-center mt-5"},[Object(r["createVNode"])("div",{class:"bg-theme-6 w-5 h-5 mr-2"}),Object(r["createVNode"])("p",null,"Document belum diisi")],-1);function be(e,t,a,n,o,c){var i=Object(r["resolveComponent"])("DxColumn"),u=Object(r["resolveComponent"])("router-link"),l=Object(r["resolveComponent"])("DxPaging"),s=Object(r["resolveComponent"])("DxDataGrid");return Object(r["openBlock"])(),Object(r["createBlock"])("div",null,[Object(r["createVNode"])(s,{"data-source":e.documents,"show-borders":!0,"column-auto-width":!0,onRowPrepared:e.onRowPrepared},{documentName:Object(r["withCtx"])((function(t){var a=t.data;return[Object(r["createVNode"])("div",null,["admin"!=e.route.meta.role?(Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:0,target:"_blank",to:e.mapDistributorRoute()[a.data.id]},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(a.data.document_name),1)]})),_:2},1032,["to"])):(Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:1,target:"_blank",to:e.mapAdminRoute(e.route.params.distributor_id,e.route.query.registration_period)[a.data.id]},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(a.data.document_name),1)]})),_:2},1032,["to"]))])]})),default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,{width:"300",caption:"Dokumen","data-field":"document_name",cellTemplate:"documentName"}),Object(r["createVNode"])(i,{"data-type":"boolean",caption:"Mandatory","data-field":"status_per_region.region_"+e.regionCode+".is_mandatory"},null,8,["data-field"]),Object(r["createVNode"])(i,{"data-field":"status_per_region.region_"+e.regionCode+".verification_status","data-type":"boolean",caption:"Status Verifikasi",class:"status_verifikasi"},null,8,["data-field"]),Object(r["createVNode"])(i,{"data-field":"status_per_region.region_"+e.regionCode+".notes",caption:"Notes"},null,8,["data-field"]),Object(r["createVNode"])(l,{enabled:!1})]})),_:1},8,["data-source","onRowPrepared"]),pe])}var me=a("3b34");me["a"].render=be;var je=me["a"],Oe=Object(h["c"])({components:{DxDataGrid:q["DxDataGrid"],DxColumn:q["DxColumn"],DxMasterDetail:q["DxMasterDetail"],DetailTemplate:je,DxPaging:q["DxPaging"],ApprovalBundle:ee},props:{hasActiveProposal:{default:!1}},setup:function(){var e=Object(h["p"])([]),t=Object(W["b"])(),a=t.state.auth.user,r=Object(h["p"])(!1),n=Object(Q["c"])(),o=Object(h["p"])({}),c=Object(h["p"])(null),i=Object(h["p"])(null);Object(h["k"])(Object(v["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:case"end":return e.stop()}}),e)}))));var u=function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="",r="admin"==n.meta.role?n.params.distributor_id:a.distributor.id,t.next=4,te["a"].getActiveDocuments(r).then((function(t){e.value=t.data.documents,o.value=t.data.approval_action,l.value=_.sortBy(t.data.regions,"code")}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=Object(h["p"])([]),s=function(e){};return{activeDocumentList:e,isAgree:r,user:a,route:n,approvalAction:o,dataSource:l,onRowPrepared:s,dataGrid:c,getDocumentList:u,approvalBundleDataGrid:i}}});Oe.render=de;var ve=Oe;function fe(e,t,a,n,o,c){var i=Object(r["resolveComponent"])("detail-template");return Object(r["openBlock"])(),Object(r["createBlock"])("div",null,[Object(r["createVNode"])(i,{templateData:e.activeDocumentList,regions:e.regions},null,8,["templateData","regions"])])}var ge={key:0},ke={key:0},xe={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mx-auto text-green-800",viewBox:"0 0 20 20",fill:"currentColor"},he=Object(r["createVNode"])("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1),we={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mx-auto text-red-800",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},De=Object(r["createVNode"])("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1),_e={key:2},Be={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mx-auto text-green-800",viewBox:"0 0 20 20",fill:"currentColor"},Ce=Object(r["createVNode"])("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1),ye={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mx-auto text-red-800",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Ve=Object(r["createVNode"])("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1),Ne={key:2};function Re(e,t,a,n,o,c){var i=Object(r["resolveComponent"])("DxColumn"),u=Object(r["resolveComponent"])("router-link"),l=Object(r["resolveComponent"])("DxPaging"),s=Object(r["resolveComponent"])("DxDataGrid");return e.templateData.length?(Object(r["openBlock"])(),Object(r["createBlock"])("div",ge,[Object(r["createVNode"])(s,{"data-source":e.documents,"show-borders":!0,"column-auto-width":!0,onRowPrepared:e.onRowPrepared},{documentName:Object(r["withCtx"])((function(t){var a=t.data;return[Object(r["createVNode"])("div",null,["admin"!=e.route.meta.role?(Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:0,target:"_blank",to:e.mapDistributorRoute()[a.data.id]},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(a.data.document_name)+" ",1),a.data.is_mandatory?(Object(r["openBlock"])(),Object(r["createBlock"])("span",ke,"*")):Object(r["createCommentVNode"])("",!0)]})),_:2},1032,["to"])):(Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:1,target:"_blank",to:e.mapAdminRoute(e.route.params.distributor_id,e.route.query.registration_period)[a.data.id]},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(a.data.document_name),1)]})),_:2},1032,["to"]))])]})),verificationStatus:Object(r["withCtx"])((function(e){var t=e.data;return["SUDAH_DIVERIFIKASI"===t.data["status_per_region"]["region_".concat(t.column.key)]["verification_status"]?(Object(r["openBlock"])(),Object(r["createBlock"])("svg",xe,[he])):"DITOLAK"===t.data["status_per_region"]["region_".concat(t.column.key)]["verification_status"]?(Object(r["openBlock"])(),Object(r["createBlock"])("svg",we,[De])):(Object(r["openBlock"])(),Object(r["createBlock"])("span",_e,"-"))]})),revisionStatus:Object(r["withCtx"])((function(e){var t=e.data;return["SUDAH_DIREVISI"===t.data["status_per_region"]["region_".concat(t.column.key)]["revision_status"]?(Object(r["openBlock"])(),Object(r["createBlock"])("svg",Be,[Ce])):"PERLU_DIREVISI"===t.data["status_per_region"]["region_".concat(t.column.key)]["revision_status"]?(Object(r["openBlock"])(),Object(r["createBlock"])("svg",ye,[Ve])):(Object(r["openBlock"])(),Object(r["createBlock"])("span",Ne,"-"))]})),default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,{fixed:!0,caption:"Dokumen","data-field":"document_name",cellTemplate:"documentName"}),Object(r["createVNode"])(i,{caption:"Status Verifikasi"},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.regions,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(i,{key:e.code,caption:e.name,alignment:"center","data-field":"status_per_region.region_".concat(e.code,".verification_status"),cellTemplate:"verificationStatus"},null,8,["caption","data-field"])})),128))]})),_:1}),Object(r["createVNode"])(i,{caption:"Status Revisi"},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.regions,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(i,{key:e.code,caption:e.name,alignment:"center","data-field":"status_per_region.region_".concat(e.code,".revision_status"),cellTemplate:"revisionStatus"},null,8,["caption","data-field"])})),128))]})),_:1}),Object(r["createVNode"])(l,{enabled:!1})]})),_:1},8,["data-source","onRowPrepared"])])):Object(r["createCommentVNode"])("",!0)}var Ae=a("8cb1"),Pe=Object(h["c"])({props:{templateData:{default:Object(h["p"])([])},regions:{required:!0}},components:{DxDataGrid:q["DxDataGrid"],DxColumn:q["DxColumn"],DxPaging:q["DxPaging"]},setup:function(e){console.log(e);var t=Object(h["p"])([]),a=Object(h["p"])(0),r=Object(W["b"])(),n=(r.state.auth.user,Object(Q["c"])()),o=Object(h["a"])((function(){return _.sortBy(e.templateData,"id")}));function c(e){console.log(e.data),e.rowType}return{dataSource:t,regionSelection:a,documents:o,onRowPrepared:c,regionCode:e.regionCode,mapDistributorRoute:Ae["b"],mapAdminRoute:Ae["a"],route:n}}});Pe.render=Re;var Te=Pe,Se=Object(h["c"])({components:{DxDataGrid:q["DxDataGrid"],DxColumn:q["DxColumn"],DxMasterDetail:q["DxMasterDetail"],DetailTemplate:Te,DxPaging:q["DxPaging"],ApprovalBundle:ee},props:{hasActiveProposal:{default:!1},regions:{required:!0}},setup:function(){var e=Object(h["p"])([]),t=Object(W["b"])(),a=t.state.auth.user,r=Object(h["p"])(!1),n=Object(Q["c"])(),o=Object(h["p"])({}),c=Object(h["p"])(null),i=Object(h["p"])(null);Object(h["k"])(Object(v["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:case"end":return e.stop()}}),e)}))));var u=function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="",r="admin"==n.meta.role?n.params.distributor_id:a.distributor.id,t.next=4,te["a"].getActiveDocuments(r).then((function(t){e.value=t.data.documents,o.value=t.data.approval_action,l.value=_.sortBy(t.data.regions,"code")}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=Object(h["p"])([]),s=function(e){};return{activeDocumentList:e,isAgree:r,user:a,route:n,approvalAction:o,dataSource:l,onRowPrepared:s,dataGrid:c,getDocumentList:u,approvalBundleDataGrid:i}}});Se.render=fe;var Ge=Se,Me=Object(h["c"])({components:{DocumentForm:w["a"],ElTabs:x.a,ElTabPane:g.a,ApprovalBundle:ee,DocumentRegion:ie,RegionDocument:ve,DocumentList:Ge},setup:function(){var e=Object(h["p"])([]),t=Object(W["b"])(),a=t.state.auth.user,r=Object(h["p"])(!1),n=Object(Q["c"])(),o=Object(h["p"])({}),c=Object(h["p"])(null),i=Object(h["p"])(null),u=Object(Y["a"])(),l=Object(h["p"])(!1),s=Object(h["p"])([]);Object(h["k"])(Object(v["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return l.value=!0,e.prev=1,e.next=4,d();case 4:e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](1);case 8:return e.prev=8,l.value=!1,e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[1,6,8,11]])}))));var d=function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="",r="admin"==n.meta.role?n.params.distributor_id:a.distributor.id,t.next=4,te["a"].getActiveDocuments(r).then((function(t){e.value=t.data.documents,o.value=t.data.approval_action,s.value=t.data.regions}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),p=function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:u.$confirm("Ajukan verifikasi data proposal kedistributoran. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(v["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return l.value=!0,e.prev=1,e.next=4,X["a"].submitBundleForVerification().then(function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](1);case 8:return e.prev=8,l.value=!1,e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[1,6,8,11]])}))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:u.$confirm("Setujui proses verifikasi dokumen. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(v["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,X["a"].approveDistributorBundle(n.params.distributor_id,n.query.registration_period).then(function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return O.a.success({title:"Verifikasi dokumen berhasil disetujui",position:"bottom-right"}),e.next=3,i.value.getDocumentList();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:u.$confirm("Tolak proses verifikasi dokumen. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(v["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,X["a"].rejectDistributorBundle(n.params.distributor_id,n.query.registration_period).then(function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return O.a.success({title:"Verifikasi dokumen berhasil ditolak",position:"bottom-right"}),e.next=3,i.value.getDocumentList();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,X["a"].verifyAll(n.params.distributor_id,n.query.registration_period).then(function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t.data),e.next=3,i.value.getDocumentList();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=Object(h["p"])([]),g=function(e){};return{activeDocumentList:e,isAgree:r,user:a,route:n,approve:b,reject:m,submitForVerification:p,approvalAction:o,dataSource:f,onRowPrepared:g,dataGrid:c,verifyAll:j,regionDocumentView:i,loading:l,regions:s}}});Me.render=m;t["default"]=Me},"0c92":function(e,t,a){"use strict";var r=a("c953"),n=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return r["a"].post("/bundle/".concat(e,"/approve"),{notes:t,allocation:a})},o=function(e,t){return r["a"].post("/bundle/".concat(e,"/reject"),{notes:t})},c=function(e,t){return r["a"].post("/distributors/".concat(e,"/bundle/approve"),{},{params:{registration_period:t}})},i=function(e,t){return r["a"].post("/distributors/".concat(e,"/bundle/reject"),{},{params:{registration_period:t}})},u=function(e,t){return r["a"].post("/distributors/".concat(e,"/bundle-items/verify-all"),{},{params:{registration_period:t}})},l=function(){return r["a"].post("/verification-bundle")};t["a"]={approveBundle:n,rejectBundle:o,approveDistributorBundle:c,rejectDistributorBundle:i,verifyAll:u,submitBundleForVerification:l}},2611:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var r=a("72dd");function n(){return{$show:Object(r["e"])("$messageBox"),$prompt:Object(r["e"])("$prompt"),$alert:Object(r["e"])("$alert"),$confirm:Object(r["e"])("$confirm")}}},"3b34":function(e,t,a){"use strict";(function(e){var r=a("72dd"),n=a("d30a"),o=a("4360"),c=a("8cb1"),i=a("6c02");t["a"]=Object(r["c"])({props:{templateData:{default:Object(r["p"])([])},regionCode:{required:!0}},components:{DxDataGrid:n["DxDataGrid"],DxColumn:n["DxColumn"],DxPaging:n["DxPaging"]},setup:function(t){console.log(t);var a=Object(r["p"])([]),n=Object(r["p"])(0),u=Object(o["b"])(),l=(u.state.auth.user,Object(i["c"])()),s=Object(r["a"])((function(){return _.sortBy(t.templateData,"id")}));function d(a){console.log(a.data),"data"==a.rowType&&a.data.hasOwnProperty("status_per_region")&&!a.data.status_per_region["region_".concat(t.regionCode)]["has_active_data"]&&a.data.status_per_region["region_".concat(t.regionCode)]["is_mandatory"]&&e(a.rowElement).addClass("bg-theme-6 text-white")}return{dataSource:a,regionSelection:n,documents:s,onRowPrepared:d,regionCode:t.regionCode,mapDistributorRoute:c["b"],mapAdminRoute:c["a"],route:l}}})}).call(this,a("e409"))},d81d:function(e,t,a){"use strict";var r=a("23e7"),n=a("b727").map,o=a("1dde"),c=o("map");r({target:"Array",proto:!0,forced:!c},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);