(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d9d61a6"],{1380:function(e,t,a){},1407:function(e,t,a){"use strict";a("9034")},"15fd":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a("a4d3"),a("b64b");function n(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}function o(e,t){if(null==e)return{};var a,o,r=n(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)a=i[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}},2611:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a("72dd");function o(){return{$show:Object(n["e"])("$messageBox"),$prompt:Object(n["e"])("$prompt"),$alert:Object(n["e"])("$alert"),$confirm:Object(n["e"])("$confirm")}}},2658:function(e,t,a){"use strict";a("90ba")},9034:function(e,t,a){},"90ba":function(e,t,a){},f288:function(e,t,a){"use strict";a.r(t);var n=a("7a23"),o={class:"grid grid-cols-12 gap-6"};function r(e,t,a,r,i,c){var l=Object(n["resolveComponent"])("SPKP"),u=Object(n["resolveComponent"])("SPT");return Object(n["openBlock"])(),Object(n["createBlock"])("div",null,[Object(n["createVNode"])("div",o,[Object(n["createVNode"])(l),Object(n["createVNode"])(u)])])}var i=a("c45b"),c={class:"intro-y col-span-12 lg:col-span-12"},l={class:"p-5"},u={class:""},s={class:"sm:grid grid-cols-2 gap-2"},d={class:""},b={class:""},p={class:"mt-3"},f={class:"sm:grid grid-cols-2 gap-2"},m={class:""},v={class:""},O={class:"mt-3"},j=Object(n["createTextVNode"])("Click to upload"),h={class:"mt-4 grid grid-cols-2 gap-5 pb-5 border-b"},g={class:"intro-y input-form"},k=Object(n["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"},"Status",-1),_={class:"intro-y input-form"},w=Object(n["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"},"Status Verifikasi ",-1),D={class:"flex w-full pt-5"},x={key:1,class:"ml-auto"},y={key:1};function N(e,t,a,o,r,i){var N=Object(n["resolveComponent"])("form-item"),V=Object(n["resolveComponent"])("el-date-picker"),C=Object(n["resolveComponent"])("el-button"),S=Object(n["resolveComponent"])("el-upload"),P=Object(n["resolveComponent"])("DataGrid"),B=Object(n["resolveComponent"])("document-form"),R=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createBlock"])("div",c,[Object(n["withDirectives"])(Object(n["createVNode"])(B,{title:"SPKP",itemType:20},{default:Object(n["withCtx"])((function(a){var o=a.allowManage;return[Object(n["createVNode"])("div",l,[Object(n["createVNode"])("div",u,[Object(n["createVNode"])("div",s,[Object(n["createVNode"])("div",d,[Object(n["createVNode"])(N,{label:"Dikeluarkan Oleh","rules-text":"Required",validationData:e.validate.issued_by},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{placeholder:"Dikeluarkan Oleh",class:["form-control",{"border-theme-6":e.validate.issued_by.$error}],"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.validate.issued_by.$model=t})},null,2),[[n["vModelText"],e.validate.issued_by.$model]])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",b,[Object(n["createVNode"])(N,{label:"Nomor Dokumen","rules-text":"Required",validationData:e.validate.document_number},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{placeholder:"Nomor Dokumen",class:["form-control",{"border-theme-6":e.validate.document_number.$error}],"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.validate.document_number.$model=t})},null,2),[[n["vModelText"],e.validate.document_number.$model]])]})),_:1},8,["validationData"])])])]),Object(n["createVNode"])("div",p,[Object(n["createVNode"])("div",f,[Object(n["createVNode"])("div",m,[Object(n["createVNode"])(N,{label:"Berlaku Sejak","rules-text":"Required",validationData:e.validate.valid_from},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(V,{modelValue:e.validate.valid_from.$model,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.validate.valid_from.$model=t}),class:{"border-theme-6":e.validate.valid_from.$error},type:"date",placeholder:"Pick a day",format:"YYYY-MM-DD"},null,8,["modelValue","class"])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",v,[Object(n["createVNode"])(N,{label:"Berlaku Sampai","rules-text":"Required",validationData:e.validate.valid_until},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(V,{modelValue:e.validate.valid_until.$model,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.validate.valid_until.$model=t}),class:{"border-theme-6":e.validate.valid_until.$error},type:"date",placeholder:"Pick a day",format:"YYYY-MM-DD"},null,8,["modelValue","class"])]})),_:1},8,["validationData"])])])]),Object(n["createVNode"])("div",O,[Object(n["createVNode"])(N,{label:"File SPKP","rules-text":"Required",validationData:e.validate.spkp_file,class:"intro-y"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(S,{ref:"elUpload",class:"upload-demo form-control",action:e.env["VUE_APP_API_ENDPOINT"]+"/files",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},"on-success":e.onUploadSuccees,"with-credentials":!0,"file-list":null!=e.formData.spkp_file?[{name:"file-spkp",url:e.formData.spkp_file}]:[],"on-preview":e.handlePreview},{tip:Object(n["withCtx"])((function(){return[]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(C,{size:"small",type:"primary"},{default:Object(n["withCtx"])((function(){return[j]})),_:1})]})),_:1},8,["action","on-success","file-list","on-preview"])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",h,[Object(n["createVNode"])("div",g,[k,Object(n["createVNode"])("input",{value:e.formData.is_active?"Active":"Not Activated",type:"text",readonly:"",class:"form-control"},null,8,["value"])]),Object(n["createVNode"])("div",_,[w,Object(n["createVNode"])("input",{value:e.formData.verification_status,type:"text",readonly:"",class:"form-control"},null,8,["value"])])]),Object(n["createVNode"])("div",D,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-outline-secondary mr-2",onClick:t[5]||(t[5]=function(){var t;return e.dataGrid.clearSelection&&(t=e.dataGrid).clearSelection.apply(t,arguments)})}," Clear Selection ")):Object(n["createCommentVNode"])("",!0),o?(Object(n["openBlock"])(),Object(n["createBlock"])("div",x,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-primary w-24 mr-2",onClick:t[6]||(t[6]=function(){return e.save&&e.save.apply(e,arguments)})}," Save ")):(Object(n["openBlock"])(),Object(n["createBlock"])("div",y,[Object(n["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-2",onClick:t[7]||(t[7]=function(){return e.resetFormData&&e.resetFormData.apply(e,arguments)})}," Reset "),Object(n["createVNode"])("button",{type:"button",class:"btn bg-theme-9 text-white w-24",onClick:t[8]||(t[8]=function(){return e.add&&e.add.apply(e,arguments)})}," Add ")]))])):Object(n["createCommentVNode"])("",!0)])]),Object(n["createVNode"])(P,{ref:"dataGrid",class:"m-5",allowManage:o},null,8,["allowManage"])]})),_:1},512),[[R,e.loading]])])}a("0cfa");var V=a("5040"),C=a.n(V),S=a("15fd"),P=a("1da1"),B=a("5530"),R=(a("d3b7"),a("96cf"),{key:0}),$={key:1};function T(e,t,a,o,r,i){var c=Object(n["resolveComponent"])("DxColumn"),l=Object(n["resolveComponent"])("DxPaging"),u=Object(n["resolveComponent"])("DxPager"),s=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(s,{ref:"root","data-source":e.store,"show-borders":!0,"remote-operations":!0,selection:{mode:"single"},onSelectionChanged:e.onSelectionChanged,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)})},{statusAktivasiCellTemplate:Object(n["withCtx"])((function(e){var t=e.data;return[t.data.is_active?(Object(n["openBlock"])(),Object(n["createBlock"])("span",R," Active ")):(Object(n["openBlock"])(),Object(n["createBlock"])("span",$," Non-Active "))]})),cellTemplate:Object(n["withCtx"])((function(t){var a=t.data;return[a.data.is_active?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:1,onClick:function(t){return e.deactivate(a.data.id)},class:"btn btn-sm bg-theme-6 rounded-lg text-white"}," Deactivate ",8,["onClick"])):(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,onClick:function(t){return e.activate(a.data.id)},class:"btn btn-sm bg-theme-9 rounded-lg text-white"}," Activate ",8,["onClick"]))]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{"data-field":"document_number","data-type":"string",caption:"Nomor Dokumen"}),Object(n["createVNode"])(c,{"data-field":"issued_by","data-type":"string",caption:"Dikeluarkan Oleh"}),Object(n["createVNode"])(c,{"data-field":"valid_from","data-type":"string",caption:"Berlaku Sejak"}),Object(n["createVNode"])(c,{"data-field":"valid_until","data-type":"string",caption:"Berlaku Sampai"}),Object(n["createVNode"])(c,{allowFiltering:!1,"data-field":"is_active",caption:"Status Aktivasi","data-type":"boolean","cell-template":"statusAktivasiCellTemplate"}),"distributor"==e.route.meta.role&&e.allowManage?(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:0,allowFiltering:!1,width:100,"data-field":"id",caption:"Aksi","cell-template":"cellTemplate"})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(l,{"page-size":5}),Object(n["createVNode"])(u,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20]})]})),_:1},8,["data-source","onSelectionChanged"])}a("99af"),a("fb6a");var F=a("d30a"),A=a("2597"),G=a.n(A),M=a("c953"),q="/taxes/",U=function(){return M["a"].get(q+"spkp")},E=function(e){return M["a"].post(q+"spkp",e)},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return M["a"].put(q+"spkp/".concat(e),t)},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return M["a"].put(q+"spkp/".concat(e,"/activate"),t)},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return M["a"].put(q+"spkp/".concat(e,"/deactivate"),t)},z=function(){return M["a"].get(q+"skf")},L=function(e){return M["a"].post(q+"skf",e)},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return M["a"].put(q+"skf/".concat(e),t)},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return M["a"].put(q+"skf/".concat(e,"/activate"),t)},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return M["a"].put(q+"skf/".concat(e,"/deactivate"),t)},W=function(){return M["a"].get(q+"spt")},Q=function(e){return M["a"].post(q+"spt",e)},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return M["a"].put(q+"spt/".concat(e),t)},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return M["a"].put(q+"spt/".concat(e,"/activate"),t)},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return M["a"].put(q+"spt/".concat(e,"/deactivate"),t)},ae={get_spkp:U,add_spkp:E,update_spkp:I,activate_spkp:Y,deactivate_spkp:K,get_skf:z,add_skf:L,update_skf:H,activate_skf:X,deactivate_skf:J,get_spt:W,add_spt:Q,update_spt:Z,activate_spt:ee,deactivate_spt:te},ne=a("6c02"),oe=Object(n["defineComponent"])({components:{DxDataGrid:F["DxDataGrid"],DxColumn:F["DxColumn"],DxPaging:F["DxPaging"],DxPager:F["DxPager"],DxSorting:F["DxSorting"],DxHeaderFilter:F["DxHeaderFilter"],DxFilterRow:F["DxFilterRow"]},props:["allowManage"],setup:function(e,t){var a=this,o=(t.emit,Object(n["ref"])(null)),r=Object(ne["c"])();function i(e){return void 0!==e&&null!==e&&""!==e}Object(n["onMounted"])((function(){console.log(o.value)}));var c=Object(n["inject"])("env");console.log(c);var l=new G.a({key:"id",load:function(e){var t="?";["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(a){a in e&&i(e[a])&&(t+="".concat(a,"=").concat(JSON.stringify(e[a]),"&"))})),t=t.slice(0,-1);var a="".concat(c["VUE_APP_API_ENDPOINT"],"/taxes/spkp").concat(t);return"admin"==r.meta.role&&(a="".concat(c["VUE_APP_API_ENDPOINT"],"/distributor/").concat(r.params.distributor_id,"/item-details-data/item-type/20")),M["a"].get(a).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),u=Object(n["inject"])("updateFormData");console.log(o);var s=function(e){var t=e.selectedRowsData;u(t[0])},d=function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ae.activate_spkp(t).then((function(e){C.a.success({title:"Success",position:"bottom-right"}),p()})).catch((function(e){C.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ae.deactivate_spkp(t).then((function(e){C.a.success({title:"Success",position:"bottom-right"}),p()})).catch((function(e){C.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){o.value.instance.refresh()},f=function(){o.value.instance.clearSelection()},m=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:p.bind(a)}})};return{store:l,onSelectionChanged:s,activate:d,deactivate:b,onToolbarPreparing:m,refreshDataGrid:p,clearSelection:f,root:o,route:r}}});oe.render=T;var re=oe,ie={id:null,issued_by:null,document_number:null,valid_from:null,valid_until:null,spkp_file:null,verification_status:null,is_active:!0},ce=a("25a0"),le=a("e3e1"),ue=a("2022"),se=a("5502"),de=a("2611"),be=(a("af50"),Object(n["defineComponent"])({components:{DocumentForm:i["a"],DataGrid:re,FormItem:ue["a"]},setup:function(){Object(ne["c"])();var e=Object(se["d"])(),t=e.state.auth.user,a=Object(de["a"])(),o=Object(n["ref"])(!1),r=Object(n["ref"])(!1),i=Object(n["ref"])(null),c=Object(n["ref"])(null),l=Object(n["inject"])("env"),u=Object(n["reactive"])(Object(B["a"])({},ie)),s={issued_by:{required:le["c"]},document_number:{required:le["c"]},valid_from:{required:le["c"]},valid_until:{required:le["c"]},spkp_file:{required:le["c"]}},d=Object(ce["a"])(s,Object(n["toRefs"])(u)),b=function(){var e=Object(n["toRefs"])(u);for(var t in ie)e[t].value=ie[t];d.value.$reset()},p=function(e){var t=Object(n["toRefs"])(u);for(var a in ie)Object.hasOwnProperty.call(e,a)&&(t[a].value=e[a])},f=function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!=t?(p(t),o.value=!0):(b(),o.value=!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:d.value.$touch(),d.value.$invalid?C.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):a.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(P["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.id,a=Object(S["a"])(u,["id"]),a.distributor_id=t.distributor.id,r.value=!0,e.next=5,ae.update_spkp(u.id,a).then((function(e){C.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),c.value.clearFiles(),i.value.refreshDataGrid(),b()})).catch((function(e){C.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){r.value=!1}));case 5:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:d.value.$touch(),d.value.$invalid?(console.log(u),C.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})):a.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(P["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.id,a=Object(S["a"])(u,["id"]),console.log(a),a.distributor_id=t.distributor.id,console.log(a),r.value=!0,e.next=7,ae.add_spkp(a).then((function(e){C.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),c.value.clearFiles(),i.value.refreshDataGrid(),b()})).catch((function(e){console.log(e),C.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){r.value=!1}));case 7:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(e,t,a){u.spkp_file=e.id},j=function(e){var t=window.open(l["VUE_APP_API_ENDPOINT"]+"/files?filePath="+e.url,"_blank");t.focus()};return Object(n["provide"])("updateFormData",f),{env:l,formData:u,validate:d,dataGrid:i,updateMode:o,loading:r,save:m,add:v,resetFormData:b,onUploadSuccees:O,elUpload:c,handlePreview:j}}}));a("1407");be.render=N;var pe=be,fe={class:"intro-y col-span-12 lg:col-span-12"},me={class:"p-5"},ve={class:""},Oe={class:"sm:grid grid-cols-2 gap-2"},je={class:""},he={class:""},ge={class:"mt-3"},ke={class:"mt-3"},_e=Object(n["createTextVNode"])("Click to upload"),we={class:"mt-4 grid grid-cols-2 gap-5 pb-5 border-b"},De={class:"intro-y input-form"},xe=Object(n["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"},"Status",-1),ye={class:"intro-y input-form"},Ne=Object(n["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"},"Status Verifikasi ",-1),Ve={class:"flex w-full pt-5"},Ce={key:1,class:"ml-auto"},Se={key:1};function Pe(e,t,a,o,r,i){var c=Object(n["resolveComponent"])("form-item"),l=Object(n["resolveComponent"])("el-date-picker"),u=Object(n["resolveComponent"])("el-button"),s=Object(n["resolveComponent"])("el-upload"),d=Object(n["resolveComponent"])("DataGrid"),b=Object(n["resolveComponent"])("document-form"),p=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createBlock"])("div",fe,[Object(n["withDirectives"])(Object(n["createVNode"])(b,{title:"SPT Tahunan",itemType:21},{default:Object(n["withCtx"])((function(a){var o=a.allowManage;return[Object(n["createVNode"])("div",me,[Object(n["createVNode"])("div",ve,[Object(n["createVNode"])("div",Oe,[Object(n["createVNode"])("div",je,[Object(n["createVNode"])(c,{label:"Dikeluarkan Oleh","rules-text":"Required",validationData:e.validate.issued_by},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{placeholder:"Dikeluarkan Oleh",class:["form-control",{"border-theme-6":e.validate.issued_by.$error}],"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.validate.issued_by.$model=t})},null,2),[[n["vModelText"],e.validate.issued_by.$model]])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",he,[Object(n["createVNode"])(c,{label:"Nomor Dokumen","rules-text":"Required",validationData:e.validate.document_number},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{placeholder:"Nomor Dokumen",class:["form-control",{"border-theme-6":e.validate.document_number.$error}],"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.validate.document_number.$model=t})},null,2),[[n["vModelText"],e.validate.document_number.$model]])]})),_:1},8,["validationData"])])])]),Object(n["createVNode"])("div",ge,[Object(n["createVNode"])(c,{label:"Berlaku Sejak","rules-text":"Required",validationData:e.validate.valid_from},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{modelValue:e.validate.valid_from.$model,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.validate.valid_from.$model=t}),class:{"border-theme-6":e.validate.valid_from.$error},type:"date",placeholder:"Pick a day",format:"YYYY-MM-DD"},null,8,["modelValue","class"])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",ke,[Object(n["createVNode"])(c,{label:"File SPT","rules-text":"Required",validationData:e.validate.spt_file,class:"intro-y"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(s,{ref:"elUpload",class:"upload-demo form-control",action:e.env["VUE_APP_API_ENDPOINT"]+"/files",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},"on-success":e.onUploadSuccees,"with-credentials":!0,"file-list":null!=e.formData.spt_file?[{name:"file-spt-tahunan",url:e.formData.spt_file}]:[],"on-preview":e.handlePreview},{tip:Object(n["withCtx"])((function(){return[]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(u,{size:"small",type:"primary"},{default:Object(n["withCtx"])((function(){return[_e]})),_:1})]})),_:1},8,["action","on-success","file-list","on-preview"])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",we,[Object(n["createVNode"])("div",De,[xe,Object(n["createVNode"])("input",{value:e.formData.is_active?"Active":"Not Activated",type:"text",readonly:"",class:"form-control"},null,8,["value"])]),Object(n["createVNode"])("div",ye,[Ne,Object(n["createVNode"])("input",{value:e.formData.verification_status,type:"text",readonly:"",class:"form-control"},null,8,["value"])])]),Object(n["createVNode"])("div",Ve,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-outline-secondary mr-2",onClick:t[4]||(t[4]=function(){var t;return e.dataGrid.clearSelection&&(t=e.dataGrid).clearSelection.apply(t,arguments)})}," Clear Selection ")):Object(n["createCommentVNode"])("",!0),o?(Object(n["openBlock"])(),Object(n["createBlock"])("div",Ce,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-primary w-24 mr-2",onClick:t[5]||(t[5]=function(){return e.save&&e.save.apply(e,arguments)})}," Save ")):(Object(n["openBlock"])(),Object(n["createBlock"])("div",Se,[Object(n["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-2",onClick:t[6]||(t[6]=function(){return e.resetFormData&&e.resetFormData.apply(e,arguments)})}," Reset "),Object(n["createVNode"])("button",{type:"button",class:"btn bg-theme-9 text-white w-24",onClick:t[7]||(t[7]=function(){return e.add&&e.add.apply(e,arguments)})}," Add ")]))])):Object(n["createCommentVNode"])("",!0)])]),Object(n["createVNode"])(d,{ref:"dataGrid",class:"m-5",allowManage:o},null,8,["allowManage"])]})),_:1},512),[[p,e.loading]])])}var Be={key:0},Re={key:1};function $e(e,t,a,o,r,i){var c=Object(n["resolveComponent"])("DxColumn"),l=Object(n["resolveComponent"])("DxPaging"),u=Object(n["resolveComponent"])("DxPager"),s=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(s,{ref:"root","data-source":e.store,"show-borders":!0,"remote-operations":!0,selection:{mode:"single"},onSelectionChanged:e.onSelectionChanged,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)})},{statusAktivasiCellTemplate:Object(n["withCtx"])((function(e){var t=e.data;return[t.data.is_active?(Object(n["openBlock"])(),Object(n["createBlock"])("span",Be," Active ")):(Object(n["openBlock"])(),Object(n["createBlock"])("span",Re," Non-Active "))]})),cellTemplate:Object(n["withCtx"])((function(t){var a=t.data;return[a.data.is_active?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:1,onClick:function(t){return e.deactivate(a.data.id)},class:"btn btn-sm bg-theme-6 rounded-lg text-white"}," Deactivate ",8,["onClick"])):(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,onClick:function(t){return e.activate(a.data.id)},class:"btn btn-sm bg-theme-9 rounded-lg text-white"}," Activate ",8,["onClick"]))]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{"data-field":"document_number","data-type":"string",caption:"Nomor Dokumen"}),Object(n["createVNode"])(c,{"data-field":"issued_by","data-type":"string",caption:"Dikeluarkan Oleh"}),Object(n["createVNode"])(c,{"data-field":"valid_from","data-type":"string",caption:"Berlaku Sejak"}),Object(n["createVNode"])(c,{allowFiltering:!1,"data-field":"is_active",caption:"Status Aktivasi","data-type":"boolean","cell-template":"statusAktivasiCellTemplate"}),"distributor"==e.route.meta.role&&e.allowManage?(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:0,allowFiltering:!1,width:100,"data-field":"id",caption:"Aksi","cell-template":"cellTemplate"})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(l,{"page-size":5}),Object(n["createVNode"])(u,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20]})]})),_:1},8,["data-source","onSelectionChanged"])}var Te=Object(n["defineComponent"])({components:{DxDataGrid:F["DxDataGrid"],DxColumn:F["DxColumn"],DxPaging:F["DxPaging"],DxPager:F["DxPager"],DxSorting:F["DxSorting"],DxHeaderFilter:F["DxHeaderFilter"],DxFilterRow:F["DxFilterRow"]},props:["allowManage"],setup:function(e,t){var a=this,o=(t.emit,Object(n["ref"])(null)),r=Object(ne["c"])();function i(e){return void 0!==e&&null!==e&&""!==e}Object(n["onMounted"])((function(){console.log(o.value)}));var c=Object(n["inject"])("env");console.log(c);var l=new G.a({key:"id",load:function(e){var t="?";["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(a){a in e&&i(e[a])&&(t+="".concat(a,"=").concat(JSON.stringify(e[a]),"&"))})),t=t.slice(0,-1);var a="".concat(c["VUE_APP_API_ENDPOINT"],"/taxes/spt").concat(t);return"admin"==r.meta.role&&(a="".concat(c["VUE_APP_API_ENDPOINT"],"/distributor/").concat(r.params.distributor_id,"/item-details-data/item-type/21")),M["a"].get(a).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),u=Object(n["inject"])("updateFormData");console.log(o);var s=function(e){var t=e.selectedRowsData;u(t[0])},d=function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ae.activate_spt(t).then((function(e){C.a.success({title:"Success",position:"bottom-right"}),p()})).catch((function(e){C.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ae.deactivate_spt(t).then((function(e){C.a.success({title:"Success",position:"bottom-right"}),p()})).catch((function(e){C.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){o.value.instance.refresh()},f=function(){o.value.instance.clearSelection()},m=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:p.bind(a)}})};return{store:l,onSelectionChanged:s,activate:d,deactivate:b,onToolbarPreparing:m,refreshDataGrid:p,clearSelection:f,root:o,route:r}}});Te.render=$e;var Fe=Te,Ae={id:null,issued_by:null,document_number:null,valid_from:null,spt_file:null,verification_status:null,is_active:!0},Ge=Object(n["defineComponent"])({components:{DocumentForm:i["a"],DataGrid:Fe,FormItem:ue["a"]},setup:function(){Object(ne["c"])();var e=Object(se["d"])(),t=e.state.auth.user,a=Object(de["a"])(),o=Object(n["ref"])(!1),r=Object(n["ref"])(!1),i=Object(n["ref"])(null),c=Object(n["ref"])(null),l=Object(n["inject"])("env"),u=Object(n["reactive"])(Object(B["a"])({},Ae)),s={issued_by:{required:le["c"]},document_number:{required:le["c"]},valid_from:{required:le["c"]},spt_file:{required:le["c"]}},d=Object(ce["a"])(s,Object(n["toRefs"])(u)),b=function(){var e=Object(n["toRefs"])(u);for(var t in Ae)e[t].value=Ae[t];d.value.$reset()},p=function(e){var t=Object(n["toRefs"])(u);for(var a in Ae)Object.hasOwnProperty.call(e,a)&&(t[a].value=e[a])},f=function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!=t?(p(t),o.value=!0):(b(),o.value=!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:d.value.$touch(),d.value.$invalid?C.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):a.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(P["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.id,a=Object(S["a"])(u,["id"]),a.distributor_id=t.distributor.id,r.value=!0,e.next=5,ae.update_spt(u.id,a).then((function(e){C.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),c.value.clearFiles(),i.value.refreshDataGrid(),b()})).catch((function(e){C.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){r.value=!1}));case 5:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:d.value.$touch(),d.value.$invalid?(console.log(u),C.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})):a.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(P["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.id,a=Object(S["a"])(u,["id"]),console.log(a),a.distributor_id=t.distributor.id,console.log(a),r.value=!0,e.next=7,ae.add_spt(a).then((function(e){C.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),c.value.clearFiles(),i.value.refreshDataGrid(),b()})).catch((function(e){console.log(e),C.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){r.value=!1}));case 7:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(e,t,a){u.spt_file=e.id},j=function(e){var t=window.open(l["VUE_APP_API_ENDPOINT"]+"/files?filePath="+e.url,"_blank");t.focus()};return Object(n["provide"])("updateFormData",f),{env:l,formData:u,validate:d,dataGrid:i,updateMode:o,loading:r,save:m,add:v,resetFormData:b,onUploadSuccees:O,elUpload:c,handlePreview:j}}});a("ff09");Ge.render=Pe;var Me=Ge,qe={class:"intro-y col-span-12 lg:col-span-12"},Ue={class:"p-5"},Ee={class:""},Ie={class:"sm:grid grid-cols-2 gap-2"},Ye={class:""},Ke={class:""},ze={class:"mt-3"},Le={class:"sm:grid grid-cols-2 gap-2"},He={class:""},Xe={class:""},Je={class:"mt-3"},We=Object(n["createTextVNode"])("Click to upload"),Qe={class:"mt-4 grid grid-cols-2 gap-5 pb-5 border-b"},Ze={class:"intro-y input-form"},et=Object(n["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"},"Status",-1),tt={class:"intro-y input-form"},at=Object(n["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"},"Status Verifikasi ",-1),nt={class:"flex w-full pt-5"},ot={class:"ml-auto"},rt={key:1};function it(e,t,a,o,r,i){var c=Object(n["resolveComponent"])("form-item"),l=Object(n["resolveComponent"])("el-date-picker"),u=Object(n["resolveComponent"])("el-button"),s=Object(n["resolveComponent"])("el-upload"),d=Object(n["resolveComponent"])("DataGrid"),b=Object(n["resolveComponent"])("document-form");return Object(n["openBlock"])(),Object(n["createBlock"])("div",qe,[Object(n["createVNode"])(b,{title:"Surat Keterangan Fiskal"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("div",Ue,[Object(n["createVNode"])("div",Ee,[Object(n["createVNode"])("div",Ie,[Object(n["createVNode"])("div",Ye,[Object(n["createVNode"])(c,{label:"Dikeluarkan Oleh","rules-text":"Required",validationData:e.validate.issued_by},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{placeholder:"Dikeluarkan Oleh",class:["form-control",{"border-theme-6":e.validate.issued_by.$error}],"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.validate.issued_by.$model=t})},null,2),[[n["vModelText"],e.validate.issued_by.$model]])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",Ke,[Object(n["createVNode"])(c,{label:"Nomor Dokumen","rules-text":"Required",validationData:e.validate.document_number},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{placeholder:"Nomor Dokumen",class:["form-control",{"border-theme-6":e.validate.document_number.$error}],"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.validate.document_number.$model=t})},null,2),[[n["vModelText"],e.validate.document_number.$model]])]})),_:1},8,["validationData"])])])]),Object(n["createVNode"])("div",ze,[Object(n["createVNode"])("div",Le,[Object(n["createVNode"])("div",He,[Object(n["createVNode"])(c,{label:"Berlaku Sejak","rules-text":"Required",validationData:e.validate.valid_from},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{modelValue:e.validate.valid_from.$model,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.validate.valid_from.$model=t}),class:{"border-theme-6":e.validate.valid_from.$error},type:"date",placeholder:"Pick a day",format:"YYYY-MM-DD"},null,8,["modelValue","class"])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",Xe,[Object(n["createVNode"])(c,{label:"Berlaku Sampai","rules-text":"Required",validationData:e.validate.valid_until},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{modelValue:e.validate.valid_until.$model,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.validate.valid_until.$model=t}),class:{"border-theme-6":e.validate.valid_until.$error},type:"date",placeholder:"Pick a day",format:"YYYY-MM-DD"},null,8,["modelValue","class"])]})),_:1},8,["validationData"])])])]),Object(n["createVNode"])("div",Je,[Object(n["createVNode"])(c,{label:"File Surat Keterangan Fiskal","rules-text":"Required",validationData:e.validate.skf_file,class:"intro-y"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(s,{ref:"elUpload",class:"upload-demo form-control",action:e.env["VUE_APP_API_ENDPOINT"]+"/files",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},"on-success":e.onUploadSuccees,"with-credentials":!0,"file-list":null!=e.formData.skf_file?[{name:"file-surat-keterangan-fiskal",url:e.formData.skf_file}]:[],"on-preview":e.handlePreview},{tip:Object(n["withCtx"])((function(){return[]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(u,{size:"small",type:"primary"},{default:Object(n["withCtx"])((function(){return[We]})),_:1})]})),_:1},8,["action","on-success","file-list","on-preview"])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",Qe,[Object(n["createVNode"])("div",Ze,[et,Object(n["createVNode"])("input",{value:e.formData.is_active?"Active":"Not Activated",type:"text",readonly:"",class:"form-control"},null,8,["value"])]),Object(n["createVNode"])("div",tt,[at,Object(n["createVNode"])("input",{value:e.formData.verification_status,type:"text",readonly:"",class:"form-control"},null,8,["value"])])]),Object(n["createVNode"])("div",nt,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-outline-secondary mr-2",onClick:t[5]||(t[5]=function(){var t;return e.dataGrid.clearSelection&&(t=e.dataGrid).clearSelection.apply(t,arguments)})},"Clear Selection")):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])("div",ot,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-primary w-24 mr-2",onClick:t[6]||(t[6]=function(){return e.save&&e.save.apply(e,arguments)})},"Save")):(Object(n["openBlock"])(),Object(n["createBlock"])("div",rt,[Object(n["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-2",onClick:t[7]||(t[7]=function(){return e.resetFormData&&e.resetFormData.apply(e,arguments)})},"Reset"),Object(n["createVNode"])("button",{type:"button",class:"btn bg-theme-9 text-white w-24",onClick:t[8]||(t[8]=function(){return e.add&&e.add.apply(e,arguments)})},"Add")]))])])]),Object(n["createVNode"])(d,{ref:"dataGrid",class:"m-5"},null,512)]})),_:1})])}function ct(e,t,a,o,r,i){var c=Object(n["resolveComponent"])("DxColumn"),l=Object(n["resolveComponent"])("DxPaging"),u=Object(n["resolveComponent"])("DxPager"),s=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(s,{ref:"root","data-source":e.store,"show-borders":!0,"remote-operations":!0,selection:{mode:"single"},onSelectionChanged:e.onSelectionChanged,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)})},{cellTemplate:Object(n["withCtx"])((function(t){var a=t.data;return[a.data.is_active?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:1,onClick:function(t){return e.deactivate(a.data.id)},class:"btn btn-sm bg-theme-6 rounded-lg text-white"}," Deactivate ",8,["onClick"])):(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,onClick:function(t){return e.activate(a.data.id)},class:"btn btn-sm bg-theme-9 rounded-lg text-white"}," Activate ",8,["onClick"]))]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{"data-field":"document_number","data-type":"string",caption:"Nomor Dokumen"}),Object(n["createVNode"])(c,{"data-field":"issued_by","data-type":"string",caption:"Dikeluarkan Oleh"}),Object(n["createVNode"])(c,{"data-field":"valid_from","data-type":"string",caption:"Berlaku Sejak"}),Object(n["createVNode"])(c,{"data-field":"valid_until","data-type":"string",caption:"Berlaku Sampai"}),Object(n["createVNode"])(c,{width:100,"data-field":"id",caption:"Aktivasi","cell-template":"cellTemplate"}),Object(n["createVNode"])(l,{"page-size":5}),Object(n["createVNode"])(u,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20]})]})),_:1},8,["data-source","onSelectionChanged"])}var lt=Object(n["defineComponent"])({components:{DxDataGrid:F["DxDataGrid"],DxColumn:F["DxColumn"],DxPaging:F["DxPaging"],DxPager:F["DxPager"],DxSorting:F["DxSorting"],DxHeaderFilter:F["DxHeaderFilter"],DxFilterRow:F["DxFilterRow"]},setup:function(e,t){var a=this,o=(t.emit,Object(n["ref"])(null)),r=Object(ne["c"])();function i(e){return void 0!==e&&null!==e&&""!==e}Object(n["onMounted"])((function(){console.log(o.value)}));var c=Object(n["inject"])("env");console.log(c);var l=new G.a({key:"id",load:function(e){var t="?";["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(a){a in e&&i(e[a])&&(t+="".concat(a,"=").concat(JSON.stringify(e[a]),"&"))})),t=t.slice(0,-1);var a="".concat(c["VUE_APP_API_ENDPOINT"],"/taxes/skf").concat(t);return"admin"==r.meta.role&&(a="".concat(c["VUE_APP_API_ENDPOINT"],"/distributor/").concat(r.params.distributor_id,"/item-details-data/item-type/22")),M["a"].get(a).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),u=Object(n["inject"])("updateFormData");console.log(o);var s=function(e){var t=e.selectedRowsData;u(t[0])},d=function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ae.activate_skf(t).then((function(e){C.a.success({title:"Success",position:"bottom-right"}),p()})).catch((function(e){C.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ae.deactivate_skf(t).then((function(e){C.a.success({title:"Success",position:"bottom-right"}),p()})).catch((function(e){C.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){o.value.instance.refresh()},f=function(){o.value.instance.clearSelection()},m=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:p.bind(a)}})};return{store:l,onSelectionChanged:s,activate:d,deactivate:b,onToolbarPreparing:m,refreshDataGrid:p,clearSelection:f,root:o}}});lt.render=ct;var ut=lt,st={id:null,issued_by:null,document_number:null,valid_from:null,valid_until:null,skf_file:null,verification_status:null,is_active:!0},dt=Object(n["defineComponent"])({components:{DocumentForm:i["a"],DataGrid:ut,FormItem:ue["a"]},setup:function(){var e=Object(se["d"])(),t=e.state.auth.user,a=Object(n["ref"])(!1),o=Object(n["ref"])(!1),r=Object(n["ref"])(null),i=Object(n["ref"])(null),c=Object(n["inject"])("env"),l=Object(n["reactive"])(Object(B["a"])({},st)),u={issued_by:{required:le["c"]},document_number:{required:le["c"]},valid_from:{required:le["c"]},valid_until:{required:le["c"]},skf_file:{required:le["c"]}},s=Object(ce["a"])(u,Object(n["toRefs"])(l)),d=function(){var e=Object(n["toRefs"])(l);for(var t in st)e[t].value=st[t];s.value.$reset()},b=function(e){var t=Object(n["toRefs"])(l);for(var a in st)Object.hasOwnProperty.call(e,a)&&(t[a].value=e[a])},p=function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!=t?(b(t),a.value=!0):(d(),a.value=!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s.value.$touch(),s.value.$invalid){e.next=9;break}return l.id,a=Object(S["a"])(l,["id"]),a.distributor_id=t.distributor.id,o.value=!0,e.next=7,ae.update_skf(l.id,a).then((function(e){C.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),i.value.clearFiles(),r.value.refreshDataGrid(),d()})).catch((function(e){C.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){o.value=!1}));case 7:e.next=10;break;case 9:C.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(P["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s.value.$touch(),s.value.$invalid){e.next=11;break}return l.id,a=Object(S["a"])(l,["id"]),console.log(a),a.distributor_id=t.distributor.id,console.log(a),o.value=!0,e.next=9,ae.add_skf(a).then((function(e){C.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),i.value.clearFiles(),r.value.refreshDataGrid(),d()})).catch((function(e){console.log(e),C.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){o.value=!1}));case 9:e.next=13;break;case 11:console.log(l),C.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(e,t,a){l.skf_file=e.id},O=function(e){var t=window.open(c["VUE_APP_API_ENDPOINT"]+"/files?filePath="+e.url,"_blank");t.focus()};return Object(n["provide"])("updateFormData",p),{env:c,formData:l,validate:s,dataGrid:r,updateMode:a,loading:o,save:f,add:m,resetFormData:d,onUploadSuccees:v,elUpload:i,handlePreview:O}}});a("2658");dt.render=it;var bt=dt,pt=Object(n["defineComponent"])({components:{DocumentForm:i["a"],SPKP:pe,SPT:Me,FiscalCertificate:bt}});pt.render=r;t["default"]=pt},ff09:function(e,t,a){"use strict";a("1380")}}]);