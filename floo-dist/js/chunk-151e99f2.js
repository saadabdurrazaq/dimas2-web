(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-151e99f2"],{"0c92":function(e,t,r){"use strict";var n=r("c953"),a=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return n["a"].post("/bundle/".concat(e,"/approve"),{notes:t,allocation:r})},o=function(e,t){return n["a"].post("/bundle/".concat(e,"/reject"),{notes:t})},c=function(e,t){return n["a"].post("/distributors/".concat(e,"/bundle/approve"),{},{params:{registration_period:t}})},i=function(e,t){return n["a"].post("/distributors/".concat(e,"/bundle/reject"),{},{params:{registration_period:t}})},u=function(e,t){return n["a"].post("/distributors/".concat(e,"/bundle-items/verify-all"),{},{params:{registration_period:t}})},l=function(){return n["a"].post("/verification-bundle")};t["a"]={approveBundle:a,rejectBundle:o,approveDistributorBundle:c,rejectDistributorBundle:i,verifyAll:u,submitBundleForVerification:l}},2611:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("72dd");function a(){return{$show:Object(n["e"])("$messageBox"),$prompt:Object(n["e"])("$prompt"),$alert:Object(n["e"])("$alert"),$confirm:Object(n["e"])("$confirm")}}},"3a95":function(e,t,r){"use strict";r.r(t);var n=r("7a23"),a={class:"intro-y col-span-12 lg:col-span-12"},o={class:"p-5"};function c(e,t,r,c,i,u){var l=Object(n["resolveComponent"])("DocumentList"),s=Object(n["resolveComponent"])("document-form"),d=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createBlock"])("div",a,[Object(n["withDirectives"])(Object(n["createVNode"])(s,{title:"Status Verifikasi Dokumen",useVerificationButtons:!1},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("div",o,[e.loading?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:0,onRefreshed:e.getDocumentList,hasActiveProposal:e.approvalAction.has_active_proposal,regions:e.regions,ref:"documentListTable"},null,8,["onRefreshed","hasActiveProposal","regions"]))])]})),_:1},512),[[d,e.loading]])])}r("0cfa");var i=r("5040"),u=r.n(i),l=r("1da1"),s=(r("43ea"),r("424b")),d=r.n(s),p=(r("398c"),r("b27e")),b=r.n(p),m=(r("96cf"),r("72dd")),f=r("c45b"),v=(r("b0c0"),Object(n["createVNode"])("p",{class:"mb-4 uppercase tracking-widest text-xs"},"Status Approval",-1)),j={class:"w-100 mb-1"},O={key:0,class:"bg-theme-9 text-white uppercase px-2 rounded-md"},g={key:1,class:"bg-theme-4 text-white uppercase px-2 rounded-md"},h={key:2,class:"bg-theme-6 text-white uppercase px-2 rounded-md"},w={class:"mb-2"},x={class:"mr-2"},k={class:"text-gray-600"},D={key:1,class:"mr-2"},y={key:0,class:"flex flex-col"},C={class:"flex flex-col"},R={key:0,class:"flex flex-col"},B=Object(n["createVNode"])("span",null,"Notes",-1),V={key:1,class:"flex flex-col"},N=Object(n["createVNode"])("span",null,"Notes",-1),P={key:2,class:"flex flex-col"},S=Object(n["createVNode"])("span",null,"Notes",-1),T={key:0,class:"my-2"},A={key:1,class:"my-2"};function G(e,t,r,a,o,c){var i=Object(n["resolveComponent"])("DxColumn"),u=Object(n["resolveComponent"])("DxMasterDetail"),l=Object(n["resolveComponent"])("el-card"),s=Object(n["resolveComponent"])("el-timeline-item"),d=Object(n["resolveComponent"])("el-timeline"),p=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(p,{ref:"root","data-source":e.customStore,"show-borders":!0,"remote-operations":{filtering:!1,paging:!1,sorting:!1},"column-auto-width":!0,onToolbarPreparing:t[2]||(t[2]=function(t){return e.onToolbarPreparing(t)})},Object(n["createSlots"])({default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(i,{"data-field":"region.name","data-type":"string",caption:"Region"}),Object(n["createVNode"])(i,{"data-field":"approval_data.in_progress_status_text",caption:"Status Approval"}),"distributor"!==e.user.role.name?(Object(n["openBlock"])(),Object(n["createBlock"])(u,{key:0,class:"bg-white",enabled:!0,template:"approvalHistoryTemplate",autoExpandAll:!1})):Object(n["createCommentVNode"])("",!0)]})),_:2},["distributor"!==e.user.role.name?{name:"approvalHistoryTemplate",fn:Object(n["withCtx"])((function(r){var a=r.data;return[Object(n["createVNode"])("div",null,[v,Object(n["createVNode"])(d,null,{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(a.data.approval_history,(function(r,o){return Object(n["openBlock"])(),Object(n["createBlock"])(s,{key:r.id,"hide-timestamp":!0,type:e.getItemType(a.data,r),placement:"top"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("div",j,["success"===e.getItemType(a.data,r)?(Object(n["openBlock"])(),Object(n["createBlock"])("span",O,"Approved")):Object(n["createCommentVNode"])("",!0),"primary"===e.getItemType(a.data,r)?(Object(n["openBlock"])(),Object(n["createBlock"])("span",g,"In Progress")):Object(n["createCommentVNode"])("",!0),"danger"===e.getItemType(a.data,r)?(Object(n["openBlock"])(),Object(n["createBlock"])("span",h,"REJECTED")):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])("div",w,[null!=r.approval_status?(Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],{key:0},[Object(n["createVNode"])("span",x,Object(n["toDisplayString"])(r.in_progress_status_text)+" - "+Object(n["toDisplayString"])(r.approval_status.created_by_user_email),1),Object(n["createVNode"])("div",k,Object(n["toDisplayString"])(r.approval_status.created_at),1)],64)):(Object(n["openBlock"])(),Object(n["createBlock"])("span",D,Object(n["toDisplayString"])(r.in_progress_status_text),1))]),"vp_sales_region"!==e.user.role.name?(Object(n["openBlock"])(),Object(n["createBlock"])("div",y,[Object(n["createVNode"])("div",C,[a.data.level<r.level&&null!=r.approval_status?(Object(n["openBlock"])(),Object(n["createBlock"])("div",R,[B,Object(n["withDirectives"])(Object(n["createVNode"])("textarea",{readonly:a.data.level!==r.level,class:"form-control",rows:"2","onUpdate:modelValue":function(e){return r.approval_status.notes=e}},null,8,["readonly","onUpdate:modelValue"]),[[n["vModelText"],r.approval_status.notes]])])):"DITERIMA"===a.data.verification_status||null!=r.approval_status&&null!=r.approval_status.is_approved?(Object(n["openBlock"])(),Object(n["createBlock"])("div",V,[N,Object(n["withDirectives"])(Object(n["createVNode"])("textarea",{readonly:!0,class:"form-control",rows:"2","onUpdate:modelValue":function(e){return r.approval_status.notes=e}},null,8,["onUpdate:modelValue"]),[[n["vModelText"],r.approval_status.notes]])])):a.data.level===r.level&&a.data.allow_approval_action?(Object(n["openBlock"])(),Object(n["createBlock"])("div",P,[S,Object(n["withDirectives"])(Object(n["createVNode"])("textarea",{class:"form-control",rows:"2","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.approvalNote=t})},null,512),[[n["vModelText"],e.approvalNote]])])):Object(n["createCommentVNode"])("",!0)]),a.data.level===r.level&&a.data.allow_approval_action&&null==r.approval_status&&3!==r.level?(Object(n["openBlock"])(),Object(n["createBlock"])("div",T,[Object(n["createVNode"])("button",{onClick:function(t){return e.rejectBundle(a.data.id)},class:"bg-theme-6 text-white px-4 py-1 rounded-md mr-2"}," Reject ",8,["onClick"]),Object(n["createVNode"])("button",{onClick:function(t){return e.approveBundle(a.data.id)},class:"bg-theme-9 text-white px-4 py-1 rounded-md"}," Approve ",8,["onClick"])])):Object(n["createCommentVNode"])("",!0),a.data.level===r.level&&a.data.allow_approval_action&&null==r.approval_status&&3===r.level?(Object(n["openBlock"])(),Object(n["createBlock"])("div",A,[Object(n["createVNode"])("button",{onClick:function(t){return e.rejectBundle(a.data.id)},class:"bg-theme-6 text-white px-4 py-1 rounded-md mr-2"}," Not Recommended ",8,["onClick"]),Object(n["createVNode"])("button",{onClick:function(t){return e.approveBundle(a.data.id)},class:"bg-theme-9 text-white px-4 py-1 rounded-md"}," Recommended ",8,["onClick"])])):Object(n["createCommentVNode"])("",!0)])):Object(n["createCommentVNode"])("",!0)]})),_:2},1024)]})),_:2},1032,["type"])})),128))]})),_:2},1024)])]}))}:void 0]),1032,["data-source"])}r("99af");var L=r("d30a"),M=r("2597"),I=r.n(M),E=r("c953"),F=r("6c02"),K=r("4360"),q=r("0c92"),$=r("2611"),U=Object(n["defineComponent"])({components:{DxDataGrid:L["DxDataGrid"],DxColumn:L["DxColumn"],DxPaging:L["DxPaging"],DxPager:L["DxPager"],DxSorting:L["DxSorting"],DxHeaderFilter:L["DxHeaderFilter"],DxFilterRow:L["DxFilterRow"],DxMasterDetail:L["DxMasterDetail"]},props:{regionCode:{default:null}},setup:function(e,t){var r=this,a=(t.emit,Object(n["ref"])(null)),o=Object(F["c"])(),c=Object(K["b"])(),i=c.state.auth.user,s=Object(n["ref"])(null),d=Object(n["ref"])(0),p=Object($["a"])();console.log(o,i);var b="";b="admin"==o.meta.role?o.params.distributor_id:i.distributor.id,Object(n["onMounted"])((function(){console.log(a.value)}));var m=Object(n["inject"])("env"),f=new I.a({key:"id",load:function(t){var r="".concat(m["VUE_APP_API_ENDPOINT"],"/distributors/").concat(b,"/bundles"),n={};return null!=e.regionCode&&(n.region_code=e.regionCode),"admin"==o.meta.role&&(n.registration_period=o.query.registration_period),E["a"].get(r,{params:n}).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),v=function(){a.value.instance.refresh()},j=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:v.bind(r)}})},O=function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:p.$confirm("Setujui Approval Bundle?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q["a"].approveBundle(t,s.value,d.value).then((function(e){u.a.success({title:"Bundle berhasil disetujui",position:"bottom-right"}),s.value=null,d.value=0,v()})).catch((function(){u.a.error({title:"Bundle gagal disetujui",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:p.$confirm("Tolak Approval Bundle?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q["a"].rejectBundle(t,s.value).then((function(e){u.a.success({title:"Bundle berhasil ditolak",position:"bottom-right"}),s.value=null,d.value=0,v()})).catch((function(){u.a.error({title:"Proses gagal",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(e,t){if("DITERIMA"===e.verification_status)return"success";if(console.log(t.approval_status),null!=t.approval_status){if(e.level>t.level&&t.approval_status.is_approved)return"success";if(!t.approval_status.is_approved)return"danger"}return e.level===t.level?"primary":"info"};return{customStore:f,refreshDataGrid:v,onToolbarPreparing:j,root:a,route:o,user:i,approveBundle:O,rejectBundle:g,getItemType:h,approvalNote:s,allocation:d}}});U.render=G;var H=U,z=r("191b");function J(e,t,r,a,o,c){var i=Object(n["resolveComponent"])("DxColumn"),u=Object(n["resolveComponent"])("DxMasterDetail"),l=Object(n["resolveComponent"])("DetailTemplate"),s=Object(n["resolveComponent"])("DxPaging"),d=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(d,{ref:"dataGrid",id:"grid-container","show-borders":!0,"data-source":e.dataSource,"key-expr":"id",paging:{enabled:!1,pageSize:50},onRowPrepared:e.onRowPrepared},{masterDetailTemplate:Object(n["withCtx"])((function(e){var t=e.data;return[Object(n["createVNode"])(l,{templateData:t},null,8,["templateData"])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(i,{"data-field":"document_name",caption:"Nama Dokumen"}),Object(n["createVNode"])(i,{width:100,"data-field":"is_mandatory",caption:"Harus diisi","data-type":"boolean"}),Object(n["createVNode"])(u,{enabled:!0,template:"masterDetailTemplate",autoExpandAll:!0}),Object(n["createVNode"])(s,{"page-size":50})]})),_:1},8,["data-source","onRowPrepared"])}function Q(e,t,r,a,o,c){var i=Object(n["resolveComponent"])("DxColumn"),u=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])("div",null,[Object(n["createVNode"])(u,{"data-source":e.statusPerRegion,"show-borders":!0,"column-auto-width":!0,onRowPrepared:e.onRowPrepared},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(i,{caption:"Region","data-field":"name"}),Object(n["createVNode"])(i,{caption:"Sudah diisi","data-field":"has_active_data"}),Object(n["createVNode"])(i,{"data-field":"verification_status",caption:"Status Verifikasi"})]})),_:1},8,["data-source","onRowPrepared"])])}var W=r("6093");W["a"].render=Q;var X=W["a"],Y=Object(m["c"])({components:{DxDataGrid:L["DxDataGrid"],DxColumn:L["DxColumn"],DxMasterDetail:L["DxMasterDetail"],DetailTemplate:X,DxPaging:L["DxPaging"]},setup:function(){var e=Object(m["p"])([]),t=Object(K["b"])(),r=t.state.auth.user,n=Object(m["p"])(!1),a=Object(F["c"])(),o=Object(m["p"])({}),c=Object(m["p"])(null);Object(m["k"])(Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:case"end":return e.stop()}}),e)}))));var i=function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="",n="admin"==a.meta.role?a.params.distributor_id:r.distributor.id,t.next=4,z["a"].getActiveDocuments(n).then((function(t){e.value=t.data.documents,o.value=t.data.approval_action,u.value=_.sortBy(t.data.documents,"id")}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),u=Object(m["p"])([]),s=function(e){};return{activeDocumentList:e,isAgree:n,user:r,route:a,approvalAction:o,dataSource:u,onRowPrepared:s,dataGrid:c}}});Y.render=J;var Z=Y,ee={key:0},te=Object(n["createVNode"])("p",null,"Bundles",-1),re=Object(n["createVNode"])("p",null,"Documents",-1);function ne(e,t,r,a,o,c){var i=Object(n["resolveComponent"])("DxColumn"),u=Object(n["resolveComponent"])("DxMasterDetail"),l=Object(n["resolveComponent"])("ApprovalBundle"),s=Object(n["resolveComponent"])("DetailTemplate"),d=Object(n["resolveComponent"])("DxPaging"),p=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(p,{ref:"dataGrid",id:"grid-container","show-borders":!0,"data-source":e.dataSource,"key-expr":"code",paging:{enabled:!1,pageSize:50},onRowPrepared:e.onRowPrepared,"column-auto-width":!0},{masterDetailTemplate:Object(n["withCtx"])((function(t){var r=t.data;return[Object(n["createVNode"])("div",null,[e.hasActiveProposal?(Object(n["openBlock"])(),Object(n["createBlock"])("div",ee,[te,Object(n["createVNode"])(l,{ref:"approvalBundleDataGrid",class:"mb-4",regionCode:r.data.code},null,8,["regionCode"])])):Object(n["createCommentVNode"])("",!0),re,Object(n["createVNode"])(s,{templateData:e.activeDocumentList,regionCode:r.data.code},null,8,["templateData","regionCode"])])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(i,{"data-field":"name",caption:"Region"}),Object(n["createVNode"])(u,{class:"bg-white",enabled:!0,template:"masterDetailTemplate",autoExpandAll:!0}),Object(n["createVNode"])(d,{"page-size":50})]})),_:1},8,["data-source","onRowPrepared"])}var ae=Object(n["createVNode"])("div",{class:"flex items-center mt-5"},[Object(n["createVNode"])("div",{class:"bg-theme-6 w-5 h-5 mr-2"}),Object(n["createVNode"])("p",null,"Document belum diisi")],-1);function oe(e,t,r,a,o,c){var i=Object(n["resolveComponent"])("DxColumn"),u=Object(n["resolveComponent"])("router-link"),l=Object(n["resolveComponent"])("DxPaging"),s=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])("div",null,[Object(n["createVNode"])(s,{"data-source":e.documents,"show-borders":!0,"column-auto-width":!0,onRowPrepared:e.onRowPrepared},{documentName:Object(n["withCtx"])((function(t){var r=t.data;return[Object(n["createVNode"])("div",null,["admin"!=e.route.meta.role?(Object(n["openBlock"])(),Object(n["createBlock"])(u,{key:0,target:"_blank",to:e.mapDistributorRoute()[r.data.id]},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(r.data.document_name),1)]})),_:2},1032,["to"])):(Object(n["openBlock"])(),Object(n["createBlock"])(u,{key:1,target:"_blank",to:e.mapAdminRoute(e.route.params.distributor_id,e.route.query.registration_period)[r.data.id]},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(r.data.document_name),1)]})),_:2},1032,["to"]))])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(i,{width:"300",caption:"Dokumen","data-field":"document_name",cellTemplate:"documentName"}),Object(n["createVNode"])(i,{"data-type":"boolean",caption:"Mandatory","data-field":"status_per_region.region_"+e.regionCode+".is_mandatory"},null,8,["data-field"]),Object(n["createVNode"])(i,{"data-field":"status_per_region.region_"+e.regionCode+".verification_status","data-type":"boolean",caption:"Status Verifikasi",class:"status_verifikasi"},null,8,["data-field"]),Object(n["createVNode"])(i,{"data-field":"status_per_region.region_"+e.regionCode+".notes",caption:"Notes"},null,8,["data-field"]),Object(n["createVNode"])(l,{enabled:!1})]})),_:1},8,["data-source","onRowPrepared"]),ae])}var ce=r("556c");ce["a"].render=oe;var ie=ce["a"],ue=Object(m["c"])({components:{DxDataGrid:L["DxDataGrid"],DxColumn:L["DxColumn"],DxMasterDetail:L["DxMasterDetail"],DetailTemplate:ie,DxPaging:L["DxPaging"],ApprovalBundle:H},props:{hasActiveProposal:{default:!1}},setup:function(){var e=Object(m["p"])([]),t=Object(K["b"])(),r=t.state.auth.user,n=Object(m["p"])(!1),a=Object(F["c"])(),o=Object(m["p"])({}),c=Object(m["p"])(null),i=Object(m["p"])(null);Object(m["k"])(Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:case"end":return e.stop()}}),e)}))));var u=function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="",n="admin"==a.meta.role?a.params.distributor_id:r.distributor.id,t.next=4,z["a"].getActiveDocuments(n).then((function(t){e.value=t.data.documents,o.value=t.data.approval_action,s.value=_.sortBy(t.data.regions,"code")}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=Object(m["p"])([]),d=function(e){};return{activeDocumentList:e,isAgree:n,user:r,route:a,approvalAction:o,dataSource:s,onRowPrepared:d,dataGrid:c,getDocumentList:u,approvalBundleDataGrid:i}}});ue.render=ne;var le=ue,se={class:"mb-4 border-b pb-4"},de=Object(n["createVNode"])("h4",null,"Region Distributor",-1),pe={class:"flex items-center mb-2"},be=Object(n["createVNode"])("h4",null,"Status Verifikasi Dokumen",-1),me={key:0,class:"p-5 text-center"},fe={key:1,class:"p-5 text-center"},ve={key:2},je={key:0,class:"border border-t-0 p-5 flex items-center"},Oe=Object(n["createVNode"])("p",null," Harap lengkapi dokumen mandatory yang belum terisi terlebih dahulu, sebelum melakukan pengajuan verifikasi data. ",-1),ge={key:1},he={class:"border border-t-0 border-b-0 p-5 flex items-center"},we={class:"mr-4"},xe=Object(n["createVNode"])("p",null," Saya menyatakan bahwa seluruh pernyataan data dan informasi beserta seluruh dokumen yang saya lampirkan dalam berkas verifikasi adalah benar ",-1);function ke(e,t,r,a,o,c){var i=Object(n["resolveComponent"])("distributor-regions"),u=Object(n["resolveComponent"])("detail-template"),l=Object(n["resolveComponent"])("AlertCircleIcon"),s=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createBlock"])("div",null,[Object(n["createVNode"])("div",se,[de,Object(n["createVNode"])(i)]),Object(n["withDirectives"])(Object(n["createVNode"])("div",null,[Object(n["createVNode"])("div",pe,[be,Object(n["createVNode"])("button",{onClick:t[1]||(t[1]=function(){return e.getDocumentList&&e.getDocumentList.apply(e,arguments)}),class:"btn px-4 ml-auto"},"Refresh")]),Object(n["createVNode"])(u,{ref:"documentListGrid",templateData:e.activeDocumentList,regions:e.regions,allowRevision:e.allowRevision},null,8,["templateData","regions","allowRevision"]),"svp_region"==e.user.role.name&&e.allowRevision?(Object(n["openBlock"])(),Object(n["createBlock"])("div",me,[Object(n["createVNode"])("button",{onClick:t[2]||(t[2]=function(){return e.proposeRevision&&e.proposeRevision.apply(e,arguments)}),class:"btn bg-yellow-400 px-4 py-2 text-yellow-700 my-4"},"Ajukan Revisi Dokumen Terpilih")])):Object(n["createCommentVNode"])("",!0),"admin"==e.route.meta.role&&"vp_sales_region"===e.user.role.name&&e.approvalAction.all_region_approved?(Object(n["openBlock"])(),Object(n["createBlock"])("div",fe,[e.approvalAction.allow_reject?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,onClick:t[3]||(t[3]=function(){return e.reject&&e.reject.apply(e,arguments)}),class:"btn bg-theme-6 text-white w-24 mx-2"}," Tolak ")):Object(n["createCommentVNode"])("",!0),e.approvalAction.allow_approve?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:1,onClick:t[4]||(t[4]=function(){return e.approve&&e.approve.apply(e,arguments)}),class:"btn bg-theme-9 text-white w-24 mx-2"}," Setuju ")):Object(n["createCommentVNode"])("",!0)])):Object(n["createCommentVNode"])("",!0),"admin"==e.route.meta.role||e.approvalAction.has_active_proposal?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])("div",ve,[e.approvalAction.all_documents_fulfilled?(Object(n["openBlock"])(),Object(n["createBlock"])("div",ge,[Object(n["createVNode"])("div",he,[Object(n["createVNode"])("div",we,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.isAgree=t}),type:"checkbox"},null,512),[[n["vModelCheckbox"],e.isAgree]])]),xe]),Object(n["createVNode"])("button",{onClick:t[6]||(t[6]=function(){return e.submitForVerification&&e.submitForVerification.apply(e,arguments)}),disabled:!e.isAgree,class:[{"disabled:opacity-50 cursor-not-allowed":!e.isAgree},"btn rounded-none text-white bg-theme-9 w-full"]}," Ajukan Verifikasi Data ",10,["disabled"])])):(Object(n["openBlock"])(),Object(n["createBlock"])("div",je,[Object(n["createVNode"])(l,{class:"mr-4"}),Oe]))]))],512),[[s,e.loading]])])}r("d81d");var De={key:0},_e={key:0},ye={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mx-auto text-green-800",viewBox:"0 0 20 20",fill:"currentColor"},Ce=Object(n["createVNode"])("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1),Re={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mx-auto text-red-800",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Be=Object(n["createVNode"])("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1),Ve={key:2},Ne={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mx-auto text-green-800",viewBox:"0 0 20 20",fill:"currentColor"},Pe=Object(n["createVNode"])("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1),Se={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mx-auto text-red-800",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Te=Object(n["createVNode"])("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1),Ae={key:2};function Ge(e,t,r,a,o,c){var i=Object(n["resolveComponent"])("DxSelection"),u=Object(n["resolveComponent"])("DxColumn"),l=Object(n["resolveComponent"])("router-link"),s=Object(n["resolveComponent"])("DxPaging"),d=Object(n["resolveComponent"])("DxDataGrid");return e.templateData.length?(Object(n["openBlock"])(),Object(n["createBlock"])("div",De,[Object(n["createVNode"])(d,{ref:"dataGrid","data-source":e.documents,"show-borders":!0,"column-auto-width":!0,onRowPrepared:e.onRowPrepared,onCellPrepared:e.onCellPrepared},{documentName:Object(n["withCtx"])((function(t){var r=t.data;return[Object(n["createVNode"])("div",null,["admin"!=e.route.meta.role?(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:0,target:"_blank",to:e.mapDistributorRoute()[r.data.id]},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(r.data.document_name)+" ",1),r.data.is_mandatory?(Object(n["openBlock"])(),Object(n["createBlock"])("span",_e,"*")):Object(n["createCommentVNode"])("",!0)]})),_:2},1032,["to"])):(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:1,target:"_blank",to:e.mapAdminRoute(e.route.params.distributor_id,e.route.query.registration_period)[r.data.id]},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(r.data.document_name),1)]})),_:2},1032,["to"]))])]})),verificationStatus:Object(n["withCtx"])((function(e){var t=e.data;return["SUDAH_DIVERIFIKASI"===t.data["status_per_region"]["region_".concat(t.column.key)]["verification_status"]?(Object(n["openBlock"])(),Object(n["createBlock"])("svg",ye,[Ce])):"DITOLAK"===t.data["status_per_region"]["region_".concat(t.column.key)]["verification_status"]?(Object(n["openBlock"])(),Object(n["createBlock"])("svg",Re,[Be])):(Object(n["openBlock"])(),Object(n["createBlock"])("span",Ve,"-"))]})),revisionStatus:Object(n["withCtx"])((function(e){var t=e.data;return["SUDAH_DIREVISI"===t.data["revision_status"]?(Object(n["openBlock"])(),Object(n["createBlock"])("svg",Ne,[Pe])):"PERLU_DIREVISI"===t.data["revision_status"]?(Object(n["openBlock"])(),Object(n["createBlock"])("svg",Se,[Te])):(Object(n["openBlock"])(),Object(n["createBlock"])("span",Ae,"-"))]})),default:Object(n["withCtx"])((function(){return["svp_region"==e.user.role.name&&e.allowRevision?(Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:0,mode:"multiple"})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(u,{fixed:!0,caption:"Dokumen","data-field":"document_name",cellTemplate:"documentName"}),Object(n["createVNode"])(u,{caption:"Status Verifikasi"},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.regions,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(u,{key:e.code,caption:e.name,alignment:"center","data-field":"status_per_region.region_".concat(e.code,".verification_status"),cellTemplate:"verificationStatus"},null,8,["caption","data-field"])})),128))]})),_:1}),Object(n["createVNode"])(u,{caption:"Status Revisi","data-field":"revision_status",cellTemplate:"revisionStatus",alignment:"center"}),Object(n["createVNode"])(s,{enabled:!1})]})),_:1},8,["data-source","onRowPrepared","onCellPrepared"])])):Object(n["createCommentVNode"])("",!0)}var Le=r("4172");Le["a"].render=Ge;var Me=Le["a"];function Ie(e,t,r,a,o,c){var i=Object(n["resolveComponent"])("DxColumn"),u=Object(n["resolveComponent"])("DxFilterRow"),l=Object(n["resolveComponent"])("DxPaging"),s=Object(n["resolveComponent"])("DxPager"),d=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(d,{ref:"root","data-source":e.customStore,"show-borders":!0,"remote-operations":!0,selection:{mode:"single"},"column-auto-width":!0,onSelectionChanged:e.onSelectionChanged,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)})},{cityNameCellTemplate:Object(n["withCtx"])((function(e){var t=e.data;return[Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(t.data.cities.city_type)+" "+Object(n["toDisplayString"])(t.data.cities.city_name),1)]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(i,{allowSorting:!1,"data-field":"region.name","data-type":"string",caption:"Region"}),Object(n["createVNode"])(i,{allowSorting:!1,"data-field":"provinces.province_name","data-type":"string",caption:"Provinsi"}),Object(n["createVNode"])(i,{allowSorting:!1,"data-field":"cities.city_name","data-type":"string",caption:"Kota/Kabupaten","cell-template":"cityNameCellTemplate"}),Object(n["createVNode"])(u,{visible:!0}),Object(n["createVNode"])(l,{"page-size":10}),Object(n["createVNode"])(s,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20]})]})),_:1},8,["data-source","onSelectionChanged"])}r("4de4"),r("fb6a");var Ee=r("fb27"),Fe=r("5502"),Ke=Object(n["defineComponent"])({components:{DxDataGrid:L["DxDataGrid"],DxColumn:L["DxColumn"],DxPaging:L["DxPaging"],DxPager:L["DxPager"],DxSorting:L["DxSorting"],DxHeaderFilter:L["DxHeaderFilter"],DxFilterRow:L["DxFilterRow"]},setup:function(e,t){var r=this,a=(t.emit,Object(n["ref"])(null)),o=Object(F["c"])(),c=Object(Fe["d"])();function i(e){return void 0!==e&&null!==e&&""!==e}Object(n["onMounted"])((function(){console.log(a.value)}));var s=Object(n["inject"])("env");console.log(s);var d=new I.a({key:"id",load:function(e){var t="?",r={};r.skip=e.skip,r.take=e.take,void 0!==e.filter&&(r.filter=[r.filter,"and",e.filter]),e.sort?r.sort=e.sort:r.sort=[{desc:!0,selector:"updated_at"}],r.requireTotalCount=!0,["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(e){e in r&&i(r[e])&&(t+="".concat(e,"=").concat(JSON.stringify(r[e]),"&"))})),t=t.slice(0,-1),0==t.length?t+="?distributor_id=".concat(o.params.distributor_id):t+="&distributor_id=".concat(o.params.distributor_id);var n="".concat(s["VUE_APP_API_ENDPOINT"],"/distributor-regions").concat(t);return E["a"].get(n).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),p=Object(n["inject"])("updateFormData");console.log(a);var b=function(e){var t=e.selectedRowsData;p(t[0])},m=function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(Ee["b"])(t).then((function(e){u.a.success({title:"Success",position:"bottom-right"}),v()})).catch((function(e){u.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(Ee["c"])(t).then((function(e){u.a.success({title:"Success",position:"bottom-right"}),v()})).catch((function(e){u.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){a.value.instance.refresh()},j=function(){a.value.instance.clearSelection()},O=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:v.bind(r)}})};return{store:c,customStore:d,onSelectionChanged:b,deleteRegion:m,onToolbarPreparing:O,refreshDataGrid:v,clearSelection:j,root:a,route:o,verifyRegion:f}}});Ke.render=Ie;var qe=Ke,$e=Object(m["c"])({components:{DxDataGrid:L["DxDataGrid"],DxColumn:L["DxColumn"],DxMasterDetail:L["DxMasterDetail"],DetailTemplate:Me,DxPaging:L["DxPaging"],ApprovalBundle:H,DistributorRegions:qe},props:{hasActiveProposal:{default:!1},regions:{required:!0}},setup:function(e,t){var r=t.emit,n=Object(m["p"])([]),a=Object(K["b"])(),o=a.state.auth.user,c=Object(m["p"])(!1),i=Object(F["c"])(),s=Object(m["p"])({}),d=Object(m["p"])(null),p=Object(m["p"])(null),b=Object(m["p"])(!1),f=Object($["a"])(),v=Object(m["p"])(null),j=Object(m["p"])({});Object(m["k"])(Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:case"end":return e.stop()}}),e)}))));var O=function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r("refreshed"),t="",t="admin"==i.meta.role?i.params.distributor_id:o.distributor.id,b.value=!0,e.prev=4,e.next=7,z["a"].getActiveDocuments(t).then((function(e){n.value=e.data.documents,s.value=e.data.approval_action,g.value=_.sortBy(e.data.regions,"code"),j.value=e.data}));case 7:return e.prev=7,b.value=!1,e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[4,,7,10]])})));return function(){return e.apply(this,arguments)}}(),g=Object(m["p"])([]),h=function(e){},w=function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:f.$confirm("Ajukan verifikasi data proposal kedistributoran. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return b.value=!0,e.prev=1,e.next=4,q["a"].submitBundleForVerification().then(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.a.success({title:"Success",message:"Proposal kedistributoran berhasil diajukan untuk verifikasi data.",position:"bottom-right"}),e.next=3,O();case 3:return e.next=5,a.dispatch("auth/refreshUserProfile");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](1);case 8:return e.prev=8,b.value=!1,e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[1,6,8,11]])}))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:f.$confirm("Setujui proses verifikasi dokumen. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q["a"].approveDistributorBundle(i.params.distributor_id,i.query.registration_period).then(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.a.success({title:"Verifikasi dokumen berhasil disetujui",position:"bottom-right"}),e.next=3,O();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:f.$confirm("Tolak proses verifikasi dokumen. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q["a"].rejectDistributorBundle(i.params.distributor_id,i.query.registration_period).then(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.a.success({title:"Verifikasi dokumen berhasil ditolak",position:"bottom-right"}),e.next=3,O();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q["a"].verifyAll(i.params.distributor_id,i.query.registration_period).then(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t.data),e.next=3,regionDocumentView.value.getDocumentList();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function y(){return C.apply(this,arguments)}function C(){return C=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(i.params),e.t0=z["a"],e.t1=i.params.distributor_id,e.next=5,v.value.dataGrid.instance.getSelectedRowsData();case 5:return e.t2=e.sent.map((function(e){return e.id})),e.next=8,e.t0.proposeDistributorBundleItemsRevision.call(e.t0,e.t1,e.t2);case 8:return e.t3=console,e.next=11,v.value.dataGrid.instance.getSelectedRowsData();case 11:return e.t4=e.sent,e.t3.log.call(e.t3,e.t4),e.next=15,O();case 15:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}return{activeDocumentList:n,isAgree:c,user:o,route:i,approvalAction:s,dataSource:g,onRowPrepared:h,dataGrid:d,getDocumentList:O,approvalBundleDataGrid:p,loading:b,verifyAll:D,approve:x,reject:k,submitForVerification:w,proposeRevision:y,documentListGrid:v,documentData:j,allowRevision:Object(m["a"])((function(){return!j.value.related_bundles_already_approved&&!j.value.related_bundles_on_revision_hold}))}}});$e.render=ke;var Ue=$e,He=Object(m["c"])({components:{DocumentForm:f["a"],ElTabs:b.a,ElTabPane:d.a,ApprovalBundle:H,DocumentRegion:Z,RegionDocument:le,DocumentList:Ue},setup:function(){var e=Object(m["p"])([]),t=Object(K["b"])(),r=t.state.auth.user,n=Object(m["p"])(!1),a=Object(F["c"])(),o=Object(m["p"])({}),c=Object(m["p"])(null),i=Object(m["p"])(null),s=Object($["a"])(),d=Object(m["p"])(!1),p=Object(m["p"])([]);Object(m["k"])(Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return d.value=!0,e.prev=1,e.next=4,b();case 4:e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](1);case 8:return e.prev=8,d.value=!1,e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[1,6,8,11]])}))));var b=function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="",n="admin"==a.meta.role?a.params.distributor_id:r.distributor.id,t.next=4,z["a"].getActiveDocuments(n).then((function(t){e.value=t.data.documents,o.value=t.data.approval_action,p.value=t.data.regions}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.$confirm("Ajukan verifikasi data proposal kedistributoran. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return d.value=!0,e.prev=1,e.next=4,q["a"].submitBundleForVerification().then(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:return e.next=4,t.dispatch("auth/refreshUserProfile");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](1);case 8:return e.prev=8,d.value=!1,e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[1,6,8,11]])}))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.$confirm("Setujui proses verifikasi dokumen. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q["a"].approveDistributorBundle(a.params.distributor_id,a.query.registration_period).then(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.a.success({title:"Verifikasi dokumen berhasil disetujui",position:"bottom-right"}),e.next=3,i.value.getDocumentList();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.$confirm("Tolak proses verifikasi dokumen. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q["a"].rejectDistributorBundle(a.params.distributor_id,a.query.registration_period).then(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.a.success({title:"Verifikasi dokumen berhasil ditolak",position:"bottom-right"}),e.next=3,i.value.getDocumentList();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q["a"].verifyAll(a.params.distributor_id,a.query.registration_period).then(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t.data),e.next=3,i.value.getDocumentList();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=Object(m["p"])([]),h=function(e){};return{activeDocumentList:e,isAgree:n,user:r,route:a,approve:v,reject:j,submitForVerification:f,approvalAction:o,dataSource:g,onRowPrepared:h,dataGrid:c,verifyAll:O,regionDocumentView:i,loading:d,regions:p}}});He.render=c;t["default"]=He},4172:function(e,t,r){"use strict";(function(e){var n=r("1da1"),a=r("b85c"),o=(r("96cf"),r("72dd")),c=r("d30a"),i=(r("191b"),r("4360")),u=r("8cb1"),l=r("6c02");t["a"]=Object(o["c"])({props:{templateData:{default:Object(o["p"])([])},regions:{required:!0},allowRevision:{required:!0}},components:{DxDataGrid:c["DxDataGrid"],DxColumn:c["DxColumn"],DxPaging:c["DxPaging"],DxSelection:c["DxSelection"]},setup:function(t){var r=Object(o["p"])([]),c=Object(o["p"])(0),s=Object(i["b"])(),d=s.state.auth.user,p=Object(l["c"])(),b=Object(o["p"])(null);Object(o["m"])((function(){}));var m=Object(o["a"])((function(){return _.sortBy(t.templateData,"id")}));function f(t){if("data"==t.rowType&&t.data.hasOwnProperty("any_empty_document")&&t.data.any_empty_document&&t.data.is_mandatory){console.log(t.rowElement);var r,n=Object(a["a"])(t.rowElement.cells);try{for(n.s();!(r=n.n()).done;){var o=r.value;e(o).css("background","rgb(211, 41, 41)"),e(o).css("color","white")}}catch(c){n.e(c)}finally{n.f()}}}function v(e){}function j(){return O.apply(this,arguments)}function O(){return O=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}return{dataSource:r,regionSelection:c,documents:m,onRowPrepared:f,regionCode:t.regionCode,mapDistributorRoute:u["b"],mapAdminRoute:u["a"],route:p,dataGrid:b,proposeRevision:j,user:d,onCellPrepared:v}}})}).call(this,r("e409"))},"556c":function(e,t,r){"use strict";(function(e){var n=r("72dd"),a=r("d30a"),o=r("4360"),c=r("8cb1"),i=r("6c02");t["a"]=Object(n["c"])({props:{templateData:{default:Object(n["p"])([])},regionCode:{required:!0}},components:{DxDataGrid:a["DxDataGrid"],DxColumn:a["DxColumn"],DxPaging:a["DxPaging"]},setup:function(t){console.log(t);var r=Object(n["p"])([]),a=Object(n["p"])(0),u=Object(o["b"])(),l=(u.state.auth.user,Object(i["c"])()),s=Object(n["a"])((function(){return _.sortBy(t.templateData,"id")}));function d(r){console.log(r.data),"data"==r.rowType&&r.data.hasOwnProperty("status_per_region")&&!r.data.status_per_region["region_".concat(t.regionCode)]["has_active_data"]&&r.data.status_per_region["region_".concat(t.regionCode)]["is_mandatory"]&&e(r.rowElement).addClass("bg-theme-6 text-white")}return{dataSource:r,regionSelection:a,documents:s,onRowPrepared:d,regionCode:t.regionCode,mapDistributorRoute:c["b"],mapAdminRoute:c["a"],route:l}}})}).call(this,r("e409"))},6093:function(e,t,r){"use strict";(function(e){r("d81d"),r("4fad");var n=r("72dd"),a=r("d30a"),o=r("4360"),c=r("6c02");t["a"]=Object(n["c"])({props:{templateData:{default:Object(n["p"])([])}},components:{DxDataGrid:a["DxDataGrid"],DxColumn:a["DxColumn"]},setup:function(t){var r=Object(n["p"])([]),a=Object(n["p"])(0),i=Object(o["b"])(),u=(Object(c["c"])(),i.state.auth.user,Object(n["a"])((function(){return t.templateData.data.status_per_region?Object.entries(t.templateData.data.status_per_region).map((function(e){return e[1]})):[]})));function l(t){"data"==t.rowType&&(t.data.has_active_data||e(t.rowElement).addClass("bg-theme-6 text-white"))}return{dataSource:r,regionSelection:a,statusPerRegion:u,onRowPrepared:l}}})}).call(this,r("e409"))},b85c:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0");var n=r("06c5");function a(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=Object(n["a"])(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,c=e},f:function(){try{i||null==r["return"]||r["return"]()}finally{if(u)throw c}}}}},d81d:function(e,t,r){"use strict";var n=r("23e7"),a=r("b727").map,o=r("1dde"),c=o("map");n({target:"Array",proto:!0,forced:!c},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},fb27:function(e,t,r){"use strict";r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return b}));var n=r("c953"),a="/distributor-regions",o=function(){return n["a"].get(a+"/regions")},c=function(){return n["a"].get(a+"/regions_by_vp")},i=function(){return n["a"].get(a+"/regions_by_wilayah")},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n["a"].get(a+"/regions-province/".concat(e))},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n["a"].get(a+"/producer-area/".concat(e))},s=function(e){return n["a"].post(a,e)},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return n["a"].put(a+"/".concat(e),t)},p=function(e){return n["a"].delete(a+"/".concat(e))},b=function(e){return n["a"].post(a+"/".concat(e,"/verify"))};t["a"]={regions:o,regions_by_vp:c,regions_by_wilayah:i,regionProvinces:u,regionProducerArea:l,addDistributorRegions:s,updateDistributorRegions:d,deleteDistributorRegion:p,verifyDistributorRegion:b}}}]);