(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b0768c0"],{"15fd":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a("a4d3"),a("b64b");function n(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}function o(e,t){if(null==e)return{};var a,o,r=n(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)a=i[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}},"1a40":function(e,t,a){"use strict";var n=a("c953"),o="/demplot-reports",r=function(){return n["a"].get(o)},i=function(e){return n["a"].post(o,e)},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n["a"].delete(o+"/".concat(e))},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return n["a"].put(o+"/".concat(e),t)};t["a"]={get:r,add:i,update:l,destroy:c}},"1d8d":function(e,t,a){"use strict";var n=a("c953"),o="/teritorial",r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n["a"].get(o+"/province/".concat(e))},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n["a"].get(o+"/city/".concat(e))},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n["a"].get(o+"/district/".concat(e))},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n["a"].get(o+"/village/".concat(e))};t["a"]={province:r,city:i,district:c,village:l}},2388:function(e,t,a){"use strict";var n=a("c953"),o="/company-management",r=function(){return n["a"].get(o)},i=function(e){return n["a"].post(o,e)},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return n["a"].put(o+"/".concat(e),t)},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return n["a"].put(o+"/".concat(e,"/activate"),t)},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return n["a"].put(o+"/".concat(e,"/deactivate"),t)};t["a"]={get:r,add:i,update:c,activate:l,deactivate:u}},"64aa":function(e,t,a){"use strict";a.r(t);var n=a("7a23"),o={class:"grid grid-cols-12 gap-6"};function r(e,t,a,r,i,c){var l=Object(n["resolveComponent"])("collection-panel"),u=Object(n["resolveComponent"])("stock-fulfillment-panel"),d=Object(n["resolveComponent"])("kiosk-stock-fulfillment"),s=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createBlock"])("div",null,[Object(n["withDirectives"])(Object(n["createVNode"])("div",o,[e.loading?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],{key:0},[Object(n["createVNode"])(l,{products:e.products,evaluationPeriod:e.evaluationPeriod},null,8,["products","evaluationPeriod"]),Object(n["createVNode"])(u,{products:e.products,evaluationPeriod:e.evaluationPeriod},null,8,["products","evaluationPeriod"]),Object(n["createVNode"])(d,{kiosk:e.kiosk,evaluationPeriod:e.evaluationPeriod},null,8,["kiosk","evaluationPeriod"])],64))],512),[[s,e.loading]])])}var i=a("1da1"),c=(a("96cf"),a("730f")),l=a("8dc9"),u=a("c953"),d="/kiosk-stock-fulfillment",s=function(){return u["a"].get(d)},p=function(e){return u["a"].post(d,e)},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return u["a"].delete(d+"/".concat(e))},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return u["a"].put(d+"/".concat(e),t)},m=function(){return u["a"].get("".concat(d,"/kiosk-wcm"))},v={get:s,add:p,update:f,destroy:b,getKioskWCM:m},O={class:"intro-y col-span-12 lg:col-span-12"};function g(e,t,a,o,r,i){var c=Object(n["resolveComponent"])("DataGrid"),l=Object(n["resolveComponent"])("document-form-penilaian"),u=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createBlock"])("div",O,[Object(n["withDirectives"])(Object(n["createVNode"])(l,{title:"Realisasi Penebusan Pupuk",evaluationPeriod:e.evaluationPeriod,isDataBySystem:!0,itemType:e.EvaluationAspectType.FertilizerRedemption},{default:Object(n["withCtx"])((function(t){var a=t.allowManage;return[Object(n["createVNode"])(c,{ref:"dataGrid",class:"m-5",allowManage:a,evaluationPeriod:e.evaluationPeriod},null,8,["allowManage","evaluationPeriod"])]})),_:1},8,["evaluationPeriod","itemType"]),[[u,e.loading]])])}var j=a("84df");function h(e,t,a,o,r,i){var c=Object(n["resolveComponent"])("DxColumn"),l=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(l,{ref:"root","data-source":e.store,"show-borders":!0,"remote-operations":!0,selection:{mode:"single"},onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)}),"allow-column-reordering":!0,"allow-column-resizing":!0,"column-auto-width":!0},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{"data-field":"product_name","data-type":"string",caption:"Nama Produk"}),Object(n["createVNode"])(c,{caption:e.months[0]},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{"data-field":"spjb_bulanan[0]","data-type":"string",caption:"Alokasi (SPJB)"}),Object(n["createVNode"])(c,{"data-field":"penebusan_bulanan[0]","data-type":"string",caption:"Penebusan"})]})),_:1},8,["caption"]),Object(n["createVNode"])(c,{caption:e.months[1]},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{"data-field":"spjb_bulanan[1]","data-type":"string",caption:"Alokasi (SPJB)"}),Object(n["createVNode"])(c,{"data-field":"penebusan_bulanan[1]","data-type":"string",caption:"Penebusan"})]})),_:1},8,["caption"]),Object(n["createVNode"])(c,{caption:e.months[2]},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{"data-field":"spjb_bulanan[2]","data-type":"string",caption:"Alokasi (SPJB)"}),Object(n["createVNode"])(c,{"data-field":"penebusan_bulanan[2]","data-type":"string",caption:"Penebusan"})]})),_:1},8,["caption"]),Object(n["createVNode"])(c,{caption:"Total"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{"data-field":"spjb_total","data-type":"string",caption:"Alokasi 3 Bulan (SPJB)"}),Object(n["createVNode"])(c,{"data-field":"redemption_total","data-type":"string",caption:"Total Penebusan"})]})),_:1})]})),_:1},8,["data-source"])}var k=a("ade3"),D=(a("99af"),a("fb6a"),a("d30a")),w=a("2597"),x=a.n(w),P=(a("1a40"),a("6c02")),C=a("2611"),_=Object(n["defineComponent"])({components:{DxDataGrid:D["DxDataGrid"],DxColumn:D["DxColumn"],DxPaging:D["DxPaging"],DxPager:D["DxPager"],DxSorting:D["DxSorting"],DxHeaderFilter:D["DxHeaderFilter"],DxFilterRow:D["DxFilterRow"]},emits:[],props:{evaluationPeriod:{type:Array}},setup:function(e,t){var a,o=this,r=(t.emit,Object(n["ref"])(null)),i=Object(P["c"])(),c=Object(n["ref"])([]);function l(e){return void 0!==e&&null!==e&&""!==e}Object(n["onMounted"])((function(){var t=e.evaluationPeriod;1==t.active_kuartal?c.value=["Januari","Februari","Maret"]:2==t.active_kuartal?c.value=["April","Mei","Juni"]:3==t.active_kuartal?c.value=["Juli","Agustus","September"]:4==t.active_kuartal&&(c.value=["Oktober","November","Desember"])}));var d=Object(n["inject"])("env"),s=new x.a({key:"id",load:function(e){var t="?";["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(a){a in e&&l(e[a])&&(t+="".concat(a,"=").concat(JSON.stringify(e[a]),"&"))})),t=t.slice(0,-1),"admin"==i.meta.role&&(t+="&distributor_id=".concat(i.params.distributor_id));var a="".concat(d["VUE_APP_API_ENDPOINT"],"/data-by-system/fertilizer-collection-realization").concat(t);return u["a"].get(a).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),p=function(){r.value.instance.refresh()},b=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:p.bind(o)}})};return a={route:i,store:s,onToolbarPreparing:b,refreshDataGrid:p,root:r},Object(k["a"])(a,"route",i),Object(k["a"])(a,"months",c),a}}),y=a("6b0d"),N=a.n(y);const V=N()(_,[["render",h]]);var S=V,B=a("3c6f"),T=a("25a0"),F=a("2022"),G=(a("1d8d"),a("5502")),R=Object(n["defineComponent"])({components:{DocumentFormPenilaian:j["a"],FormItem:F["a"],DataGrid:S},props:["evaluationPeriod"],setup:function(e){Object(P["c"])();var t=Object(G["d"])(),a=(t.state.auth.user,Object(n["ref"])(!1)),o=Object(n["ref"])(null),r=Object(n["inject"])("env");Object(n["onMounted"])(Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));var c=function(){o.value.refreshDataGrid()};return{env:r,dataGrid:o,loading:a,refreshDataGrid:c,EvaluationAspectType:B["a"]}},data:function(){return{}}});const M=N()(R,[["render",g]]);var A=M,E={class:"intro-y col-span-12 lg:col-span-12"};function I(e,t,a,o,r,i){var c=Object(n["resolveComponent"])("DataGrid"),l=Object(n["resolveComponent"])("document-form-penilaian"),u=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createBlock"])("div",E,[Object(n["withDirectives"])(Object(n["createVNode"])(l,{title:"Realisasi Penyaluran Pupuk",evaluationPeriod:e.evaluationPeriod,isDataBySystem:!0,itemType:e.EvaluationAspectType.FertilizerDistribution},{default:Object(n["withCtx"])((function(e){var t=e.allowManage;return[Object(n["createVNode"])(c,{ref:"dataGrid",class:"m-5",allowManage:t},null,8,["allowManage"])]})),_:1},8,["evaluationPeriod","itemType"]),[[u,e.loading]])])}var K=a("8468"),q=Object(n["createTextVNode"])(" Ton ");function z(e,t,a,o,r,i){var c=Object(n["resolveComponent"])("DxColumn"),l=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(l,{ref:"root","data-source":e.store,"show-borders":!0,"remote-operations":!0,selection:{mode:"single"},onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)}),"allow-column-reordering":!0,"allow-column-resizing":!0,"column-auto-width":!0},{cellTemplate:Object(n["withCtx"])((function(e){return Object(K["a"])(e),[q]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{"data-field":"product_name","data-type":"string",caption:"Nama Produk"}),Object(n["createVNode"])(c,{"data-field":"distribution_total","data-type":"string",caption:"Total Penyaluran"}),Object(n["createVNode"])(c,{"data-field":"id",caption:"Satuan","cell-template":"cellTemplate"})]})),_:1},8,["data-source"])}var U=Object(n["defineComponent"])({components:{DxDataGrid:D["DxDataGrid"],DxColumn:D["DxColumn"],DxPaging:D["DxPaging"],DxPager:D["DxPager"],DxSorting:D["DxSorting"],DxHeaderFilter:D["DxHeaderFilter"],DxFilterRow:D["DxFilterRow"]},emits:[],props:[],setup:function(e,t){var a=this,o=(t.emit,Object(n["ref"])(null)),r=Object(P["c"])();function i(e){return void 0!==e&&null!==e&&""!==e}Object(n["onMounted"])((function(){}));var c=Object(n["inject"])("env"),l=new x.a({key:"id",load:function(e){var t="?";["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(a){a in e&&i(e[a])&&(t+="".concat(a,"=").concat(JSON.stringify(e[a]),"&"))})),t=t.slice(0,-1),"admin"==r.meta.role&&(t+="&distributor_id=".concat(r.params.distributor_id));var a="".concat(c["VUE_APP_API_ENDPOINT"],"/data-by-system/fertilizer-distribution-realization").concat(t);return u["a"].get(a).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),d=function(){o.value.instance.refresh()},s=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:d.bind(a)}})};return Object(k["a"])({route:r,store:l,onToolbarPreparing:s,refreshDataGrid:d,root:o},"route",r)}});const $=N()(U,[["render",z]]);var H=$,J=Object(n["defineComponent"])({components:{DocumentFormPenilaian:j["a"],FormItem:F["a"],DataGrid:H},props:["evaluationPeriod"],setup:function(e){Object(P["c"])();var t=Object(G["d"])(),a=(t.state.auth.user,Object(n["ref"])(!1)),o=Object(n["ref"])(null),r=Object(n["inject"])("env");Object(n["onMounted"])(Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));var c=function(){o.value.refreshDataGrid()};return{env:r,dataGrid:o,loading:a,refreshDataGrid:c,EvaluationAspectType:B["a"]}},data:function(){return{}}});const L=N()(J,[["render",I]]);var W=L,X=(a("b0c0"),{class:"intro-y col-span-12 lg:col-span-12"}),Q={class:"p-5"},Y={class:"mt-3"},Z={class:"sm:grid grid-cols-2 gap-5"},ee={class:"mt-3"},te={class:"sm:grid grid-cols gap-5"},ae=Object(n["createTextVNode"])("Click to upload"),ne={class:"flex w-full px-5"},oe={key:1,class:"ml-auto"},re={key:1},ie=Object(n["createVNode"])("hr",null,null,-1),ce=Object(n["createVNode"])("h4",{class:"m-5"},"Data Stok Berdasarkan Laporan F5 di WCM",-1);function le(e,t,a,o,r,i){var c=Object(n["resolveComponent"])("el-option"),l=Object(n["resolveComponent"])("el-select"),u=Object(n["resolveComponent"])("form-item"),d=Object(n["resolveComponent"])("el-button"),s=Object(n["resolveComponent"])("el-upload"),p=Object(n["resolveComponent"])("DataGrid"),b=Object(n["resolveComponent"])("DatagridSupplies"),f=Object(n["resolveComponent"])("document-form-penilaian"),m=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createBlock"])("div",X,[Object(n["withDirectives"])(Object(n["createVNode"])(f,{title:"Pemenuhan Stok Distributor",evaluationPeriod:e.evaluationPeriod,itemType:e.EvaluationAspectType.SuppliesFulfillment,products:e.products},{default:Object(n["withCtx"])((function(a){var o=a.allowManage;return[Object(n["createVNode"])("div",Q,[Object(n["createVNode"])("div",Y,[Object(n["createVNode"])("div",Z,[Object(n["createVNode"])(u,{label:"Nama Produk","rules-text":"Required",validationData:e.validate.product_id},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{clearable:"",modelValue:e.formData.product_id,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.formData.product_id=t}),class:["form-control",{"border-theme-6":e.validate.product_id.$error}],filterable:""},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.products,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:e.code,label:e.name,value:e.code},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","class"])]})),_:1},8,["validationData"]),Object(n["createVNode"])(u,{label:"Bulan","rules-text":"Required",validationData:e.validate.month},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{clearable:"",modelValue:e.formData.month,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.formData.month=t}),class:["form-control",{"border-theme-6":e.validate.month.$error}],filterable:""},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.months,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:e.code,label:e.name,value:e.code},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","class"])]})),_:1},8,["validationData"])])]),Object(n["createVNode"])("div",ee,[Object(n["createVNode"])("div",te,[Object(n["createVNode"])(u,{label:"File Bukti Foto",validationData:e.validate.evidence_file_path},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(s,{ref:"elUpload",class:"upload-demo",action:e.env["VUE_APP_API_ENDPOINT"]+"/files",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},"with-credentials":!0,"on-success":e.onPhotoUploadSuccess,"file-list":null!=e.formData.evidence_file_path?[{name:"file-bukti-foto",url:e.formData.evidence_file_path}]:[],"on-preview":e.handlePreview},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(d,{size:"small",type:"primary"},{default:Object(n["withCtx"])((function(){return[ae]})),_:1})]})),_:1},8,["action","on-success","file-list","on-preview"])]})),_:1},8,["validationData"])])])]),Object(n["createVNode"])("div",ne,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-outline-secondary mr-2",onClick:t[3]||(t[3]=function(){var t;return e.dataGrid.clearSelection&&(t=e.dataGrid).clearSelection.apply(t,arguments)})}," Clear Selection ")):Object(n["createCommentVNode"])("",!0),o?(Object(n["openBlock"])(),Object(n["createBlock"])("div",oe,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,disabled:e.loading,class:[{"cursor-not-allowed":e.loading},"btn btn-primary w-24 mr-2"],type:"button",onClick:t[4]||(t[4]=function(){return e.save&&e.save.apply(e,arguments)})}," Save ",10,["disabled"])):(Object(n["openBlock"])(),Object(n["createBlock"])("div",re,[Object(n["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-2",onClick:t[5]||(t[5]=function(){return e.resetFormData&&e.resetFormData.apply(e,arguments)})}," Reset "),Object(n["createVNode"])("button",{disabled:e.loading,class:[{"cursor-not-allowed":e.loading},"btn bg-theme-9 text-white w-24"],type:"button",onClick:t[6]||(t[6]=function(){return e.add&&e.add.apply(e,arguments)})}," Add ",10,["disabled"])]))])):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])(p,{ref:"dataGrid",class:"m-5",allowManage:o,onSelectionChanged:e.onSelectionChanged},null,8,["allowManage","onSelectionChanged"]),ie,ce,Object(n["createVNode"])(b,{ref:"DatagridSupplies",class:"m-5"},null,512)]})),_:1},8,["evaluationPeriod","itemType","products"]),[[m,e.loading]])])}a("0cfa");var ue=a("5040"),de=a.n(ue),se=a("15fd"),pe=a("5530");a("d3b7");function be(e,t,a,o,r,i){var c=Object(n["resolveComponent"])("DxColumn"),l=Object(n["resolveComponent"])("DxPaging"),u=Object(n["resolveComponent"])("DxPager"),d=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(d,{ref:"root","data-source":e.store,"show-borders":!0,"remote-operations":!0,selection:{mode:"single"},onSelectionChanged:e.onSelectionChanged,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)}),"allow-column-reordering":!0,"allow-column-resizing":!0,"column-auto-width":!0},{filePath:Object(n["withCtx"])((function(t){var a=t.data;return[Object(n["createVNode"])("a",{href:e.env["VUE_APP_API_ENDPOINT"]+"/files?filePath="+a.data.evidence_file_path,class:"btn btn-sm bg-theme-9 rounded-lg text-white",target:"_blank"},"Foto Bukti",8,["href"])]})),cellTemplate:Object(n["withCtx"])((function(t){var a=t.data;return[Object(n["createVNode"])("button",{onClick:function(t){return e.destroy(a.data.id)},class:"btn btn-sm bg-theme-6 rounded-lg text-white"}," Delete ",8,["onClick"])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{"data-field":"product.name","data-type":"string",caption:"Nama Produk"}),Object(n["createVNode"])(c,{"data-field":"month_name","data-type":"string",caption:"Bulan"}),Object(n["createVNode"])(c,{"data-field":"evidence_file_path","data-type":"string",caption:"Foto Bukti","cell-template":"filePath"}),"distributor"==e.route.meta.role&&e.allowManage?(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:0,allowFiltering:!1,width:100,"data-field":"id",caption:"Aksi","cell-template":"cellTemplate"})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(l,{"page-size":5}),Object(n["createVNode"])(u,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20]})]})),_:1},8,["data-source","onSelectionChanged"])}var fe="/supplies-fulfillment",me=function(){return u["a"].get(fe)},ve=function(e){return u["a"].post(fe,e)},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return u["a"].delete(fe+"/".concat(e))},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return u["a"].put(fe+"/".concat(e),t)},je={get:me,add:ve,update:ge,destroy:Oe},he=Object(n["defineComponent"])({components:{DxDataGrid:D["DxDataGrid"],DxColumn:D["DxColumn"],DxPaging:D["DxPaging"],DxPager:D["DxPager"],DxSorting:D["DxSorting"],DxHeaderFilter:D["DxHeaderFilter"],DxFilterRow:D["DxFilterRow"]},emits:["selectionChanged","openVerificationDialog"],props:["allowManage"],setup:function(e,t){var a=this,o=t.emit,r=Object(n["ref"])(null),c=Object(P["c"])(),l=Object(C["a"])();function d(e){return void 0!==e&&null!==e&&""!==e}Object(n["onMounted"])((function(){}));var s=Object(n["inject"])("env"),p=new x.a({key:"id",load:function(e){var t="?";["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(a){a in e&&d(e[a])&&(t+="".concat(a,"=").concat(JSON.stringify(e[a]),"&"))})),t=t.slice(0,-1),"admin"==c.meta.role&&(t+="&distributor_id=".concat(c.params.distributor_id));var a="".concat(s["VUE_APP_API_ENDPOINT"],"/supplies-fulfillment").concat(t);return u["a"].get(a).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),b=(Object(n["inject"])("updateFormData"),function(e){var t=e.selectedRowsData;o("selectionChanged",t[0])}),f=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:l.$confirm("Hapus data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,je.destroy(t).then((function(e){de.a.success({title:"Success",position:"bottom-right"}),m()})).catch((function(e){de.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})))).catch((function(){}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){r.value.instance.refresh()},v=function(){r.value.instance.clearSelection()},O=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:m.bind(a)}})},g=function(e,t){e.recommended=t,o("openVerificationDialog",e)};return{route:c,store:p,onSelectionChanged:b,destroy:f,onToolbarPreparing:O,refreshDataGrid:m,clearSelection:v,root:r,openVerificationDialog:g,env:s}}});const ke=N()(he,[["render",be]]);var De=ke,we=Object(n["createTextVNode"])(" Ton ");function xe(e,t,a,o,r,i){var c=Object(n["resolveComponent"])("DxColumn"),l=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(l,{ref:"root","data-source":e.store,"show-borders":!0,"remote-operations":!0,selection:{mode:"single"},onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)}),"allow-column-reordering":!0,"allow-column-resizing":!0,"column-auto-width":!0},{cellTemplate:Object(n["withCtx"])((function(e){return Object(K["a"])(e),[we]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{"data-field":"product_name","data-type":"string",caption:"Nama Produk"}),Object(n["createVNode"])(c,{"data-field":"final_stock","data-type":"string",caption:"Rerata Stok 3 Bulan"}),Object(n["createVNode"])(c,{"data-field":"id",caption:"Satuan","cell-template":"cellTemplate"})]})),_:1},8,["data-source"])}var Pe=Object(n["defineComponent"])({components:{DxDataGrid:D["DxDataGrid"],DxColumn:D["DxColumn"],DxPaging:D["DxPaging"],DxPager:D["DxPager"],DxSorting:D["DxSorting"],DxHeaderFilter:D["DxHeaderFilter"],DxFilterRow:D["DxFilterRow"]},emits:[],props:[],setup:function(e,t){var a=this,o=(t.emit,Object(n["ref"])(null)),r=Object(P["c"])();function i(e){return void 0!==e&&null!==e&&""!==e}Object(n["onMounted"])((function(){}));var c=Object(n["inject"])("env"),l=new x.a({key:"id",load:function(e){var t="?";["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(a){a in e&&i(e[a])&&(t+="".concat(a,"=").concat(JSON.stringify(e[a]),"&"))})),t=t.slice(0,-1),"admin"==r.meta.role&&(t+="&distributor_id=".concat(r.params.distributor_id));var a="".concat(c["VUE_APP_API_ENDPOINT"],"/data-by-system/distributor-stock-fulfillment").concat(t);return u["a"].get(a).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),d=function(){o.value.instance.refresh()},s=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:d.bind(a)}})};return Object(k["a"])({route:r,store:l,onToolbarPreparing:s,refreshDataGrid:d,root:o},"route",r)}});const Ce=N()(Pe,[["render",xe]]);var _e=Ce,ye={id:null,product_id:null,evidence_file_path:null,month:null,evaluation_period_id:null,kuartal:null},Ne=a("e3e1"),Ve=["id"],Se=["id"],Be=Object(n["defineComponent"])({components:{DocumentFormPenilaian:j["a"],FormItem:F["a"],DataGrid:De,DatagridSupplies:_e},props:["evaluationPeriod","products"],setup:function(e){Object(P["c"])();var t=Object(G["d"])(),a=t.state.auth.user,o=Object(n["ref"])(!1),r=Object(n["ref"])(!1),c=Object(C["a"])(),l=Object(n["ref"])(null),u=Object(n["ref"])(null),d=Object(n["inject"])("env"),s=Object(n["reactive"])(Object(pe["a"])({},ye)),p={product_id:{required:Ne["c"]},evidence_file_path:{required:Ne["c"]},month:{required:Ne["c"]}},b=Object(T["a"])(p,Object(n["toRefs"])(s)),f=function(){s["product_id"]=ye["product_id"],s["evidence_file_path"]=ye["evidence_file_path"],s["month"]=ye["month"],b.value.$reset()},m=function(e){var t=Object(n["toRefs"])(s);for(var a in ye)Object.hasOwnProperty.call(e,a)&&(t[a].value=e[a])},v=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!=t?(m(t),o.value=!0):(f(),o.value=!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:b.value.$touch(),b.value.$invalid?de.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):c.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s.id,t=Object(se["a"])(s,Ve),t.distributor_id=a.distributor.id,r.value=!0,e.next=5,je.update(s.id,t).then((function(e){de.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),l.value.clearSelection(),l.value.refreshDataGrid(),f()})).catch((function(e){de.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){r.value=!1}));case 5:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:b.value.$touch(),b.value.$invalid?de.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):c.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s.id,t=Object(se["a"])(s,Se),t.distributor_id=a.distributor.id,r.value=!0,e.next=5,je.add(t).then((function(e){de.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),l.value.refreshDataGrid(),f()})).catch((function(e){de.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){r.value=!1}));case 5:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function j(e){v(e)}Object(n["provide"])("updateFormData",v);var h=e.products,k=Object(n["ref"])([]);Object(n["onMounted"])(Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s.evaluation_period_id=e.evaluationPeriod.id,s.kuartal=e.evaluationPeriod.active_kuartal,1==e.evaluationPeriod.active_kuartal?k.value=[{code:1,name:"Januari"},{code:2,name:"Februari"},{code:3,name:"Maret"}]:2==e.evaluationPeriod.active_kuartal?k.value=[{code:4,name:"April"},{code:5,name:"Mei"},{code:6,name:"Juni"}]:3==e.evaluationPeriod.active_kuartal?k.value=[{code:7,name:"Juli"},{code:8,name:"Agustus"},{code:9,name:"September"}]:4==e.evaluationPeriod.active_kuartal&&(k.value=[{code:10,name:"Oktober"},{code:11,name:"November"},{code:12,name:"Desember"}]);case 3:case"end":return t.stop()}}),t)}))));var D=function(e,t,a){s.evidence_file_path=e.id},w=function(e){var t=window.open(d["VUE_APP_API_ENDPOINT"]+"/files?filePath="+e.url,"_blank");t.focus()},x=Object(n["ref"])(!1),_=Object(n["ref"])(null),y=Object(n["reactive"])({notes:""}),N=function(e){x.value=!0,_.value=e},V=function(){l.value.refreshDataGrid()};return{env:d,formData:s,validate:b,dataGrid:l,updateMode:o,loading:r,save:O,add:g,resetFormData:f,elUpload:u,onSelectionChanged:j,onPhotoUploadSuccess:D,handlePreview:w,dialogVisible:x,dialogData:_,dialogFormData:y,openVerificationDialog:N,refreshDataGrid:V,products:h,EvaluationAspectType:B["a"],months:k}},data:function(){return{}}});const Te=N()(Be,[["render",le]]);var Fe=Te,Ge={class:"intro-y col-span-12 lg:col-span-12"};function Re(e,t,a,o,r,i){var c=Object(n["resolveComponent"])("DataGrid"),l=Object(n["resolveComponent"])("document-form-penilaian"),u=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createBlock"])("div",Ge,[Object(n["withDirectives"])(Object(n["createVNode"])(l,{title:"Penyaluran Kios ke Petani",evaluationPeriod:e.evaluationPeriod,isDataBySystem:!0,itemType:e.EvaluationAspectType.KioskToFarmers},{default:Object(n["withCtx"])((function(e){var t=e.allowManage;return[Object(n["createVNode"])(c,{ref:"dataGrid",class:"m-5",allowManage:t},null,8,["allowManage"])]})),_:1},8,["evaluationPeriod","itemType"]),[[u,e.loading]])])}var Me=Object(n["createVNode"])("h4",{class:"font-semibold mb-4"},"Data Pembelian Petani",-1);function Ae(e,t,a,o,r,i){var c=Object(n["resolveComponent"])("DxColumn"),l=Object(n["resolveComponent"])("DxMasterDetail"),u=Object(n["resolveComponent"])("FarmerDatagrid"),d=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(d,{ref:"root","data-source":e.store,"show-borders":!0,"remote-operations":!0,selection:{mode:"single"},onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)}),"allow-column-reordering":!0,"allow-column-resizing":!0,"column-auto-width":!0},{cellTemplate:Object(n["withCtx"])((function(e){var t=e.data;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.data.total_penyaluran),1)]})),farmerTable:Object(n["withCtx"])((function(e){var t=e.data;return[Object(n["createVNode"])("div",null,[Me,Object(n["createVNode"])(u,{dataPembelian:t.data.farmer},null,8,["dataPembelian"])])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{"data-field":"kiosk_code","data-type":"string",caption:"Kode Kios"}),Object(n["createVNode"])(c,{"data-field":"kiosk_name","data-type":"string",caption:"Nama Kios"}),Object(n["createVNode"])(c,{"data-field":"id",caption:"Total Kuantum","cell-template":"cellTemplate"}),Object(n["createVNode"])(l,{class:"bg-white",enabled:!0,template:"farmerTable",autoExpandAll:!1})]})),_:1},8,["data-source"])}function Ee(e,t,a,o,r,i){var c=Object(n["resolveComponent"])("DxFilterRow"),l=Object(n["resolveComponent"])("DxColumn"),u=Object(n["resolveComponent"])("DxPaging"),d=Object(n["resolveComponent"])("DxPager"),s=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(s,{ref:"root","data-source":e.dataPembelian,"show-borders":!0,"remote-operations":{paging:!0,filtering:!0,sorting:!0},selection:{mode:"single"},onSelectionChanged:e.onSelectionChanged},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{visible:!0}),Object(n["createVNode"])(l,{"data-field":"farmer_name","data-type":"string",caption:"Nama Petani"}),Object(n["createVNode"])(l,{"data-field":"total_beli","data-type":"string",caption:"Total Pembelian"}),Object(n["createVNode"])(u,{"page-size":10}),Object(n["createVNode"])(d,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20,50]})]})),_:1},8,["data-source","onSelectionChanged"])}a("2388");var Ie=a("4360"),Ke=Object(n["defineComponent"])({components:{DxDataGrid:D["DxDataGrid"],DxColumn:D["DxColumn"],DxPaging:D["DxPaging"],DxPager:D["DxPager"],DxSorting:D["DxSorting"],DxHeaderFilter:D["DxHeaderFilter"],DxFilterRow:D["DxFilterRow"],DxMasterDetail:D["DxMasterDetail"]},props:["dataPembelian"],setup:function(e,t){var a=this,o=(t.emit,Object(Ie["b"])()),r=Object(n["ref"])(null);Object(n["inject"])("env");var i=function(e){e.selectedRowsData},c=function(){r.value.instance.refresh()},l=function(){r.value.instance.clearSelection()},u=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:c.bind(a)}})};o.state.auth.user;return{onSelectionChanged:i,onToolbarPreparing:u,refreshDataGrid:c,clearSelection:l}}});const qe=N()(Ke,[["render",Ee]]);var ze=qe,Ue=Object(n["defineComponent"])({components:{DxDataGrid:D["DxDataGrid"],DxColumn:D["DxColumn"],DxPaging:D["DxPaging"],DxPager:D["DxPager"],DxSorting:D["DxSorting"],DxHeaderFilter:D["DxHeaderFilter"],DxFilterRow:D["DxFilterRow"],DxMasterDetail:D["DxMasterDetail"],FarmerDatagrid:ze},emits:[],props:[],setup:function(e,t){var a=this,o=(t.emit,Object(n["ref"])(null)),r=Object(P["c"])();function i(e){return void 0!==e&&null!==e&&""!==e}Object(n["onMounted"])((function(){}));var c=Object(n["inject"])("env"),l=new x.a({key:"id",load:function(e){var t="?";["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(a){a in e&&i(e[a])&&(t+="".concat(a,"=").concat(JSON.stringify(e[a]),"&"))})),t=t.slice(0,-1),"admin"==r.meta.role&&(t+="&distributor_id=".concat(r.params.distributor_id));var a="".concat(c["VUE_APP_API_ENDPOINT"],"/data-by-system/kiosk-to-farmers").concat(t);return u["a"].get(a).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),d=function(){o.value.instance.refresh()},s=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:d.bind(a)}})};return Object(k["a"])({route:r,store:l,onToolbarPreparing:s,refreshDataGrid:d,root:o},"route",r)}});const $e=N()(Ue,[["render",Ae]]);var He=$e,Je=Object(n["defineComponent"])({components:{DocumentFormPenilaian:j["a"],FormItem:F["a"],DataGrid:He},props:["evaluationPeriod"],setup:function(e){Object(P["c"])();var t=Object(G["d"])(),a=(t.state.auth.user,Object(n["ref"])(!1)),o=Object(n["ref"])(null),r=Object(n["inject"])("env");Object(n["onMounted"])(Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));var c=function(){o.value.refreshDataGrid()};return{env:r,dataGrid:o,loading:a,refreshDataGrid:c,EvaluationAspectType:B["a"]}},data:function(){return{}}});const Le=N()(Je,[["render",Re]]);var We=Le,Xe={class:"intro-y col-span-12 lg:col-span-12"},Qe={class:"p-5"},Ye={class:"mt-3"},Ze={class:"sm:grid grid-cols-2 gap-5"},et=Object(n["createTextVNode"])("Click to upload"),tt={class:"flex w-full px-5"},at={key:1,class:"ml-auto"},nt={key:1};function ot(e,t,a,o,r,i){var c=Object(n["resolveComponent"])("el-option"),l=Object(n["resolveComponent"])("el-select"),u=Object(n["resolveComponent"])("form-item"),d=Object(n["resolveComponent"])("el-button"),s=Object(n["resolveComponent"])("el-upload"),p=Object(n["resolveComponent"])("DataGrid"),b=Object(n["resolveComponent"])("document-form-penilaian"),f=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createBlock"])("div",Xe,[Object(n["withDirectives"])(Object(n["createVNode"])(b,{title:"Pemenuhan Stok Kios",evaluationPeriod:e.evaluationPeriod,itemType:e.EvaluationAspectType.KioskStockFulfillment,kiosk:e.kiosk},{default:Object(n["withCtx"])((function(a){var o=a.allowManage;return[Object(n["createVNode"])("div",Qe,[Object(n["createVNode"])("div",Ye,[Object(n["createVNode"])("div",Ze,[Object(n["createVNode"])(u,{label:"Nama Kios","rules-text":"Required",validationData:e.validate.kiosk_code},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{clearable:"",modelValue:e.formData.kiosk_code,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.formData.kiosk_code=t}),class:["form-control",{"border-theme-6":e.validate.kiosk_code.$error}],filterable:""},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.kiosk,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:e.kiosk_code,label:e.kiosk_name+" ("+e.kiosk_code+")",value:e.kiosk_code},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","class"])]})),_:1},8,["validationData"]),Object(n["createVNode"])(u,{label:"File Bukti Foto",validationData:e.validate.file_path},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(s,{ref:"elUpload",class:"upload-demo",action:e.env["VUE_APP_API_ENDPOINT"]+"/files",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},"with-credentials":!0,"on-success":e.onPhotoUploadSuccess,"file-list":null!=e.formData.file_path?[{name:"file-bukti-foto",url:e.formData.file_path}]:[],"on-preview":e.handlePreview},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(d,{size:"small",type:"primary"},{default:Object(n["withCtx"])((function(){return[et]})),_:1})]})),_:1},8,["action","on-success","file-list","on-preview"])]})),_:1},8,["validationData"])])])]),Object(n["createVNode"])("div",tt,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-outline-secondary mr-2",onClick:t[2]||(t[2]=function(){var t;return e.dataGrid.clearSelection&&(t=e.dataGrid).clearSelection.apply(t,arguments)})}," Clear Selection ")):Object(n["createCommentVNode"])("",!0),o?(Object(n["openBlock"])(),Object(n["createBlock"])("div",at,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,disabled:e.loading,class:[{"cursor-not-allowed":e.loading},"btn btn-primary w-24 mr-2"],type:"button",onClick:t[3]||(t[3]=function(){return e.save&&e.save.apply(e,arguments)})}," Save ",10,["disabled"])):(Object(n["openBlock"])(),Object(n["createBlock"])("div",nt,[Object(n["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-2",onClick:t[4]||(t[4]=function(){return e.resetFormData&&e.resetFormData.apply(e,arguments)})}," Reset "),Object(n["createVNode"])("button",{disabled:e.loading,class:[{"cursor-not-allowed":e.loading},"btn bg-theme-9 text-white w-24"],type:"button",onClick:t[5]||(t[5]=function(){return e.add&&e.add.apply(e,arguments)})}," Add ",10,["disabled"])]))])):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])(p,{ref:"dataGrid",class:"m-5",allowManage:o,onSelectionChanged:e.onSelectionChanged},null,8,["allowManage","onSelectionChanged"])]})),_:1},8,["evaluationPeriod","itemType","kiosk"]),[[f,e.loading]])])}function rt(e,t,a,o,r,i){var c=Object(n["resolveComponent"])("DxColumn"),l=Object(n["resolveComponent"])("DxPaging"),u=Object(n["resolveComponent"])("DxPager"),d=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(d,{ref:"root","data-source":e.store,"show-borders":!0,"remote-operations":!0,selection:{mode:"single"},onSelectionChanged:e.onSelectionChanged,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)}),"allow-column-reordering":!0,"allow-column-resizing":!0,"column-auto-width":!0},{filePath:Object(n["withCtx"])((function(t){var a=t.data;return[Object(n["createVNode"])("a",{href:e.env["VUE_APP_API_ENDPOINT"]+"/files?filePath="+a.data.file_path,class:"btn btn-sm bg-theme-9 rounded-lg text-white",target:"_blank"},"Foto Bukti",8,["href"])]})),cellTemplate:Object(n["withCtx"])((function(t){var a=t.data;return[Object(n["createVNode"])("button",{onClick:function(t){return e.destroy(a.data.id)},class:"btn btn-sm bg-theme-6 rounded-lg text-white"}," Delete ",8,["onClick"])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{"data-field":"kiosk_name","data-type":"string",caption:"Nama Kios"}),Object(n["createVNode"])(c,{"data-field":"file_path","data-type":"string",caption:"Foto Bukti","cell-template":"filePath"}),"distributor"==e.route.meta.role&&e.allowManage?(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:0,allowFiltering:!1,width:100,"data-field":"id",caption:"Aksi","cell-template":"cellTemplate"})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(l,{"page-size":5}),Object(n["createVNode"])(u,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20]})]})),_:1},8,["data-source","onSelectionChanged"])}var it=Object(n["defineComponent"])({components:{DxDataGrid:D["DxDataGrid"],DxColumn:D["DxColumn"],DxPaging:D["DxPaging"],DxPager:D["DxPager"],DxSorting:D["DxSorting"],DxHeaderFilter:D["DxHeaderFilter"],DxFilterRow:D["DxFilterRow"]},emits:["selectionChanged","openVerificationDialog"],props:["allowManage"],setup:function(e,t){var a,o=this,r=t.emit,c=Object(n["ref"])(null),l=Object(P["c"])(),d=Object(C["a"])();function s(e){return void 0!==e&&null!==e&&""!==e}Object(n["onMounted"])((function(){}));var p=Object(n["inject"])("env"),b=new x.a({key:"id",load:function(e){var t="?";["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(a){a in e&&s(e[a])&&(t+="".concat(a,"=").concat(JSON.stringify(e[a]),"&"))})),t=t.slice(0,-1),"admin"==l.meta.role&&(t+="&distributor_id=".concat(l.params.distributor_id));var a="".concat(p["VUE_APP_API_ENDPOINT"],"/kiosk-stock-fulfillment").concat(t);return u["a"].get(a).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),f=(Object(n["inject"])("updateFormData"),function(e){var t=e.selectedRowsData;r("selectionChanged",t[0])}),m=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:d.$confirm("Hapus data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v.destroy(t).then((function(e){de.a.success({title:"Success",position:"bottom-right"}),O()})).catch((function(e){de.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})))).catch((function(){}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){c.value.instance.refresh()},g=function(){c.value.instance.clearSelection()},j=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:O.bind(o)}})},h=function(e,t){e.recommended=t,r("openVerificationDialog",e)};return a={route:l,store:b,onSelectionChanged:f,destroy:m,onToolbarPreparing:j,refreshDataGrid:O,clearSelection:g,root:c,openVerificationDialog:h},Object(k["a"])(a,"route",l),Object(k["a"])(a,"env",p),a}});const ct=N()(it,[["render",rt]]);var lt=ct,ut={id:null,kiosk_code:null,file_path:null,evaluation_period_id:null,distributor_id:null,kuartal:null},dt=["id"],st=["id"],pt=Object(n["defineComponent"])({components:{DocumentFormPenilaian:j["a"],FormItem:F["a"],DataGrid:lt},props:["evaluationPeriod","kiosk"],setup:function(e){Object(P["c"])();var t=Object(G["d"])(),a=t.state.auth.user,o=Object(n["ref"])(!1),r=Object(n["ref"])(!1),c=Object(C["a"])(),l=Object(n["ref"])(null),u=Object(n["ref"])(null),d=Object(n["inject"])("env"),s=Object(n["reactive"])(Object(pe["a"])({},ut)),p={kiosk_code:{required:Ne["c"]},file_path:{required:Ne["c"]}},b=Object(T["a"])(p,Object(n["toRefs"])(s)),f=function(){s["kiosk_code"]=ut["kiosk_code"],s["file_path"]=ut["file_path"],b.value.$reset()},m=function(e){var t=Object(n["toRefs"])(s);for(var a in ut)Object.hasOwnProperty.call(e,a)&&(t[a].value=e[a])},O=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!=t?(m(t),o.value=!0):(f(),o.value=!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:b.value.$touch(),b.value.$invalid?de.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):c.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s.id,t=Object(se["a"])(s,dt),t.distributor_id=a.distributor.id,r.value=!0,e.next=5,v.update(s.id,t).then((function(e){de.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),l.value.clearSelection(),l.value.refreshDataGrid(),f()})).catch((function(e){de.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){r.value=!1}));case 5:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:b.value.$touch(),b.value.$invalid?de.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):c.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s.id,t=Object(se["a"])(s,st),t.distributor_id=a.distributor.id,r.value=!0,e.next=5,v.add(t).then((function(e){de.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),l.value.refreshDataGrid(),f()})).catch((function(e){de.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){r.value=!1}));case 5:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function h(e){O(e)}Object(n["provide"])("updateFormData",O),Object(n["onMounted"])(Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s.evaluation_period_id=e.evaluationPeriod.id,s.kuartal=e.evaluationPeriod.active_kuartal;case 2:case"end":return t.stop()}}),t)}))));var k=function(e,t,a){s.file_path=e.id},D=function(e){var t=window.open(d["VUE_APP_API_ENDPOINT"]+"/files?filePath="+e.url,"_blank");t.focus()},w=Object(n["ref"])(!1),x=Object(n["ref"])(null),_=Object(n["reactive"])({notes:""}),y=function(e){w.value=!0,x.value=e},N=function(){l.value.refreshDataGrid()};return{env:d,formData:s,validate:b,dataGrid:l,updateMode:o,loading:r,save:g,add:j,resetFormData:f,elUpload:u,onSelectionChanged:h,onPhotoUploadSuccess:k,handlePreview:D,dialogVisible:w,dialogData:x,dialogFormData:_,openVerificationDialog:y,refreshDataGrid:N,EvaluationAspectType:B["a"]}},data:function(){return{}}});const bt=N()(pt,[["render",ot]]);var ft=bt,mt=Object(n["defineComponent"])({components:{CollectionPanel:A,DistributionPanel:W,StockFulfillmentPanel:Fe,KioskToFarmerPanel:We,KioskStockFulfillment:ft},setup:function(){var e=Object(n["ref"])(null),t=Object(n["ref"])([]),a=Object(n["ref"])(!0),o=Object(n["ref"])([]);return Object(n["onMounted"])(Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a.value=!0,n.next=3,c["a"].getActive().then((function(t){e.value=t.data}));case 3:return n.next=5,l["a"].all().then((function(e){t.value=e.data}));case 5:return n.next=7,v.getKioskWCM().then((function(e){return o.value=e.data.data}));case 7:a.value=!1;case 8:case"end":return n.stop()}}),n)})))),{evaluationPeriod:e,products:t,loading:a,kiosk:o}}});const vt=N()(mt,[["render",r]]);t["default"]=vt},8468:function(e,t,a){"use strict";function n(e){if(null==e)throw new TypeError("Cannot destructure undefined")}a.d(t,"a",(function(){return n}))},"8dc9":function(e,t,a){"use strict";var n=a("c953"),o="/products",r=function(){return n["a"].get("".concat(o))},i=function(e){return n["a"].post(o,e)},c=function(e){return n["a"].get(o+"/".concat(e))},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return n["a"].put(o+"/".concat(e),t)};t["a"]={all:r,add:i,show:c,update:l}}}]);