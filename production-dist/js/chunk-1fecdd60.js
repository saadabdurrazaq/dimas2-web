(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fecdd60"],{"15fd":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("a4d3"),a("b64b");function n(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}function r(e,t){if(null==e)return{};var a,r,o=n(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}},"260b":function(e,t,a){"use strict";a("32a6")},2611:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("8afd");function r(){return{$show:Object(n["e"])("$messageBox"),$prompt:Object(n["e"])("$prompt"),$alert:Object(n["e"])("$alert"),$confirm:Object(n["e"])("$confirm")}}},"32a6":function(e,t,a){},"3b0f":function(e,t,a){"use strict";a.r(t);var n=a("7a23"),r={class:"intro-y col-span-12 lg:col-span-12"},o={class:"p-5"},i={class:""},c={class:"sm:grid grid-cols-2 gap-2"},l={class:""},u={class:""},d={class:"mt-3"},s={class:"sm:grid grid-cols-2 gap-2"},b={class:""},f={class:""},p={class:"mt-3"},m=Object(n["createTextVNode"])("Click to upload"),v={class:"mt-4 grid grid-cols-2 gap-5 pb-5 border-b"},O={class:"intro-y input-form"},j=Object(n["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"},"Status",-1),h={class:"intro-y input-form"},g=Object(n["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"},"Status Verifikasi ",-1),k={class:"flex w-full pt-5"},w={class:"ml-auto"},x={key:1};function D(e,t,a,D,_,y){var N=Object(n["resolveComponent"])("form-item"),V=Object(n["resolveComponent"])("el-date-picker"),C=Object(n["resolveComponent"])("el-button"),S=Object(n["resolveComponent"])("el-upload"),P=Object(n["resolveComponent"])("DataGrid"),R=Object(n["resolveComponent"])("document-form");return Object(n["openBlock"])(),Object(n["createBlock"])("div",r,[Object(n["createVNode"])(R,{title:"Pengalaman Sebagai Pedagang Pupuk"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("div",o,[Object(n["createVNode"])("div",i,[Object(n["createVNode"])("div",c,[Object(n["createVNode"])("div",l,[Object(n["createVNode"])(N,{label:"Dikeluarkan Oleh","rules-text":"Required",validationData:e.validate.issued_by},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{placeholder:"Dikeluarkan Oleh",class:["form-control",{"border-theme-6":e.validate.issued_by.$error}],"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.validate.issued_by.$model=t})},null,2),[[n["vModelText"],e.validate.issued_by.$model]])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",u,[Object(n["createVNode"])(N,{label:"Nomor Dokumen","rules-text":"Required",validationData:e.validate.document_number},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{placeholder:"Nomor Dokumen",class:["form-control",{"border-theme-6":e.validate.document_number.$error}],"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.validate.document_number.$model=t})},null,2),[[n["vModelText"],e.validate.document_number.$model]])]})),_:1},8,["validationData"])])])]),Object(n["createVNode"])("div",d,[Object(n["createVNode"])("div",s,[Object(n["createVNode"])("div",b,[Object(n["createVNode"])(N,{label:"Berlaku Sejak","rules-text":"Required",validationData:e.validate.valid_from},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(V,{modelValue:e.validate.valid_from.$model,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.validate.valid_from.$model=t}),class:{"border-theme-6":e.validate.valid_from.$error},type:"date",placeholder:"Pick a day",format:"YYYY-MM-DD"},null,8,["modelValue","class"])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",f,[Object(n["createVNode"])(N,{label:"Berlaku Sampai","rules-text":"Required",validationData:e.validate.valid_until},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(V,{modelValue:e.validate.valid_until.$model,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.validate.valid_until.$model=t}),class:{"border-theme-6":e.validate.valid_until.$error},type:"date",placeholder:"Pick a day",format:"YYYY-MM-DD"},null,8,["modelValue","class"])]})),_:1},8,["validationData"])])])]),Object(n["createVNode"])("div",p,[Object(n["createVNode"])(N,{label:"File Surat Keterangan Pengalaman","rules-text":"Required",validationData:e.validate.file_path,class:"intro-y"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(S,{ref:"elUpload",class:"upload-demo form-control",action:e.env["VUE_APP_API_ENDPOINT"]+"/files",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},"on-success":e.onUploadSuccees,"with-credentials":!0,"file-list":null!=e.formData.file_path?[{name:"file-keterangan-pengalaman-pedagang-pupuk",url:e.formData.file_path}]:[],"on-preview":e.handlePreview},{tip:Object(n["withCtx"])((function(){return[]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(C,{size:"small",type:"primary"},{default:Object(n["withCtx"])((function(){return[m]})),_:1})]})),_:1},8,["action","on-success","file-list","on-preview"])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",v,[Object(n["createVNode"])("div",O,[j,Object(n["createVNode"])("input",{value:e.formData.is_active?"Active":"Not Activated",type:"text",readonly:"",class:"form-control"},null,8,["value"])]),Object(n["createVNode"])("div",h,[g,Object(n["createVNode"])("input",{value:e.formData.verification_status,type:"text",readonly:"",class:"form-control"},null,8,["value"])])]),Object(n["createVNode"])("div",k,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-outline-secondary mr-2",onClick:t[5]||(t[5]=function(){var t;return e.dataGrid.clearSelection&&(t=e.dataGrid).clearSelection.apply(t,arguments)})},"Clear Selection")):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])("div",w,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-primary w-24 mr-2",onClick:t[6]||(t[6]=function(){return e.save&&e.save.apply(e,arguments)})},"Save")):(Object(n["openBlock"])(),Object(n["createBlock"])("div",x,[Object(n["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-2",onClick:t[7]||(t[7]=function(){return e.resetFormData&&e.resetFormData.apply(e,arguments)})},"Reset"),Object(n["createVNode"])("button",{type:"button",class:"btn bg-theme-9 text-white w-24",onClick:t[8]||(t[8]=function(){return e.add&&e.add.apply(e,arguments)})},"Add")]))])])]),Object(n["createVNode"])(P,{ref:"dataGrid",class:"m-5"},null,512)]})),_:1})])}a("0cfa");var _=a("5040"),y=a.n(_),N=a("15fd"),V=a("1da1"),C=a("5530"),S=(a("d3b7"),a("96cf"),a("c45b"));function P(e,t,a,r,o,i){var c=Object(n["resolveComponent"])("DxColumn"),l=Object(n["resolveComponent"])("DxPaging"),u=Object(n["resolveComponent"])("DxPager"),d=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(d,{ref:"root","data-source":e.store,"show-borders":!0,"remote-operations":!0,selection:{mode:"single"},onSelectionChanged:e.onSelectionChanged,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)})},{cellTemplate:Object(n["withCtx"])((function(t){var a=t.data;return[a.data.is_active?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:1,onClick:function(t){return e.deactivate(a.data.id)},class:"btn btn-sm bg-theme-6 rounded-lg text-white"}," Deactivate ",8,["onClick"])):(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,onClick:function(t){return e.activate(a.data.id)},class:"btn btn-sm bg-theme-9 rounded-lg text-white"}," Activate ",8,["onClick"]))]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{"data-field":"document_number","data-type":"string",caption:"Nomor Dokumen"}),Object(n["createVNode"])(c,{"data-field":"issued_by","data-type":"string",caption:"Dikeluarkan Oleh"}),Object(n["createVNode"])(c,{"data-field":"valid_from","data-type":"string",caption:"Berlaku Sejak"}),Object(n["createVNode"])(c,{"data-field":"valid_until","data-type":"string",caption:"Berlaku Sampai"}),Object(n["createVNode"])(c,{width:100,"data-field":"id",caption:"Aktivasi","cell-template":"cellTemplate"}),Object(n["createVNode"])(l,{"page-size":5}),Object(n["createVNode"])(u,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20]})]})),_:1},8,["data-source","onSelectionChanged"])}a("99af"),a("fb6a");var R=a("d30a"),$=a("2597"),B=a.n($),T=a("c953"),F="/",G=function(){return T["a"].get(F+"experience")},q=function(e){return T["a"].post(F+"experience",e)},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return T["a"].put(F+"experience/".concat(e),t)},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return T["a"].put(F+"experience/".concat(e,"/activate"),t)},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return T["a"].put(F+"experience/".concat(e,"/deactivate"),t)},E={get:G,add:q,update:A,activate:M,deactivate:U},I=a("6c02"),Y=Object(n["defineComponent"])({components:{DxDataGrid:R["DxDataGrid"],DxColumn:R["DxColumn"],DxPaging:R["DxPaging"],DxPager:R["DxPager"],DxSorting:R["DxSorting"],DxHeaderFilter:R["DxHeaderFilter"],DxFilterRow:R["DxFilterRow"]},setup:function(e,t){var a=this,r=(t.emit,Object(n["ref"])(null)),o=Object(I["c"])();function i(e){return void 0!==e&&null!==e&&""!==e}Object(n["onMounted"])((function(){}));var c=Object(n["inject"])("env"),l=new B.a({key:"id",load:function(e){var t="?";["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(a){a in e&&i(e[a])&&(t+="".concat(a,"=").concat(JSON.stringify(e[a]),"&"))})),t=t.slice(0,-1);var a="".concat(c["VUE_APP_API_ENDPOINT"],"/experience").concat(t);return"admin"==o.meta.role&&(a="".concat(c["VUE_APP_API_ENDPOINT"],"/distributor/").concat(o.params.distributor_id,"/item-details-data/item-type/23")),T["a"].get(a).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),u=Object(n["inject"])("updateFormData"),d=function(e){var t=e.selectedRowsData;u(t[0])},s=function(){var e=Object(V["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,E.activate(t).then((function(e){y.a.success({title:"Success",position:"bottom-right"}),f()})).catch((function(e){y.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(V["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,E.deactivate(t).then((function(e){y.a.success({title:"Success",position:"bottom-right"}),f()})).catch((function(e){y.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){r.value.instance.refresh()},p=function(){r.value.instance.clearSelection()},m=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:f.bind(a)}})};return{store:l,onSelectionChanged:d,activate:s,deactivate:b,onToolbarPreparing:m,refreshDataGrid:f,clearSelection:p,root:r}}}),K=a("6b0d"),z=a.n(K);const L=z()(Y,[["render",P]]);var H=L,J={id:null,issued_by:null,document_number:null,valid_from:null,valid_until:null,file_path:null,verification_status:null,is_active:!0},X=a("25a0"),W=a("e3e1"),Q=a("2022"),Z=a("5502"),ee=a("2611"),te=["id"],ae=["id"],ne=Object(n["defineComponent"])({components:{DocumentForm:S["a"],DataGrid:H,FormItem:Q["a"]},setup:function(){var e=Object(Z["d"])(),t=e.state.auth.user,a=Object(n["ref"])(!1),r=Object(n["ref"])(!1),o=Object(ee["a"])(),i=Object(n["ref"])(null),c=Object(n["ref"])(null),l=Object(n["inject"])("env"),u=Object(n["reactive"])(Object(C["a"])({},J)),d={issued_by:{required:W["c"]},document_number:{required:W["c"]},valid_from:{required:W["c"]},valid_until:{required:W["c"]},file_path:{required:W["c"]}},s=Object(X["a"])(d,Object(n["toRefs"])(u)),b=function(){var e=Object(n["toRefs"])(u);for(var t in J)e[t].value=J[t];s.value.$reset()},f=function(e){var t=Object(n["toRefs"])(u);for(var a in J)Object.hasOwnProperty.call(e,a)&&(t[a].value=e[a])},p=function(){var e=Object(V["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!=t?(f(t),a.value=!0):(b(),a.value=!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(V["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.value.$touch(),s.value.$invalid?y.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):o.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(V["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.id,a=Object(N["a"])(u,te),a.distributor_id=t.distributor.id,r.value=!0,e.next=5,E.update(u.id,a).then((function(e){y.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),c.value.clearFiles(),i.value.clearSelection(),i.value.refreshDataGrid(),b()})).catch((function(e){y.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){r.value=!1}));case 5:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(V["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.value.$touch(),s.value.$invalid?y.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):o.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(V["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.id,a=Object(N["a"])(u,ae),a.distributor_id=t.distributor.id,r.value=!0,e.next=5,E.add(a).then((function(e){y.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),c.value.clearFiles(),i.value.refreshDataGrid(),b()})).catch((function(e){y.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){r.value=!1}));case 5:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(e,t,a){u.file_path=e.id},j=function(e){var t=window.open(l["VUE_APP_API_ENDPOINT"]+"/files?filePath="+e.url,"_blank");t.focus()};return Object(n["provide"])("updateFormData",p),{env:l,formData:u,validate:s,dataGrid:i,updateMode:a,loading:r,save:m,add:v,resetFormData:b,onUploadSuccees:O,elUpload:c,handlePreview:j}}});a("260b");const re=z()(ne,[["render",D]]);t["default"]=re}}]);