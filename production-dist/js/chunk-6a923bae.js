(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a923bae"],{2388:function(e,t,a){"use strict";var n=a("c953"),r="/company-management",o=function(){return n["a"].get(r)},i=function(e){return n["a"].post(r,e)},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return n["a"].put(r+"/".concat(e),t)},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return n["a"].put(r+"/".concat(e,"/activate"),t)},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return n["a"].put(r+"/".concat(e,"/deactivate"),t)};t["a"]={get:o,add:i,update:c,activate:l,deactivate:u}},2611:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("8afd");function r(){return{$show:Object(n["e"])("$messageBox"),$prompt:Object(n["e"])("$prompt"),$alert:Object(n["e"])("$alert"),$confirm:Object(n["e"])("$confirm")}}},"5cd3":function(e,t,a){"use strict";a("d94f")},"980d":function(e,t,a){"use strict";a.r(t);a("4de4"),a("b0c0");var n=a("7a23"),r={class:"p-5"},o={class:"flex gap-4",style:{"margin-bottom":"15px"}},i={class:"flex-none w-40"},c={style:{"font-size":"40px","font-weight":"bold","margin-top":"20px"}},l={class:"flex-grow w-16"},u={class:"grid grid-cols-3 gap-4 mb-4"};function s(e,t,a,s,d,b){var p=Object(n["resolveComponent"])("form-item"),g=Object(n["resolveComponent"])("el-option"),f=Object(n["resolveComponent"])("el-select"),m=Object(n["resolveComponent"])("data-grid"),O=Object(n["resolveComponent"])("el-tab-pane"),j=Object(n["resolveComponent"])("el-tabs"),v=Object(n["resolveComponent"])("evaluation-distributor-dialog"),h=Object(n["resolveComponent"])("document-form"),k=Object(n["resolveDirective"])("loading");return Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])(h,{title:"Daftar Penilaian Kinerja Distributor"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("div",r,[Object(n["createVNode"])("div",o,[Object(n["createVNode"])("div",i,[Object(n["createVNode"])(p,{label:"Tahun"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("p",c,Object(n["toDisplayString"])(e.filter.evaluation_period_year),1)]})),_:1})]),Object(n["createVNode"])("div",l,[Object(n["createVNode"])(p,{label:"Kuartal"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(f,{onChange:e.refreshDataGrid,class:"form-control",modelValue:e.filter.kuartal,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.filter.kuartal=t})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(g,{value:-1,label:"Semua Kuartal"}),(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.quartal,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(g,{label:e.name,value:e.id,key:e.id},null,8,["label","value"])})),128))]})),_:1},8,["onChange","modelValue"])]})),_:1})])]),Object(n["createVNode"])("div",u,[Object(n["createVNode"])(p,{label:"Region"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(f,{onChange:e.refreshDataGrid,class:"form-control",modelValue:e.filter.regionCode,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.filter.regionCode=t})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(g,{value:-1,label:"Semua Region"}),(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.regions,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(g,{label:e.name,value:e.code,key:e.name},null,8,["label","value"])})),128))]})),_:1},8,["onChange","modelValue"])]})),_:1})]),Object(n["createVNode"])(j,{type:"border-card"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(O,{label:"Belum Diproses",class:"pb-10"},{default:Object(n["withCtx"])((function(){return[e.filterFulfilled?(Object(n["openBlock"])(),Object(n["createBlock"])(m,{key:0,ref:"unallocatedDataGrid",onOpenDialogAction:e.openFormActionDialog,filter:e.filter,status:"DITERIMA_WILAYAH",process:0},null,8,["onOpenDialogAction","filter"])):Object(n["createCommentVNode"])("",!0)]})),_:1}),Object(n["createVNode"])(O,{label:"Sudah Diproses",class:"pb-10"},{default:Object(n["withCtx"])((function(){return[e.filterFulfilled?(Object(n["openBlock"])(),Object(n["createBlock"])(m,{key:0,ref:"allocatedDataGrid",filter:e.filter,status:"DISETUJUI_OLEH_SVP_PSO",process:1},null,8,["filter"])):Object(n["createCommentVNode"])("",!0)]})),_:1}),Object(n["createVNode"])(O,{label:"Printed Report",class:"pb-10"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("button",{onClick:t[3]||(t[3]=function(){return e.exportEvaluationData&&e.exportEvaluationData.apply(e,arguments)}),class:"btn btn-primary px-4 py-2"},"Export Data Penilaian")]})),_:1})]})),_:1})]),e.dialogVisible&&null!=e.dialogData?(Object(n["openBlock"])(),Object(n["createBlock"])(v,{key:0,dialogVisible:e.dialogVisible,"onUpdate:dialogVisible":[t[4]||(t[4]=function(t){return e.dialogVisible=t}),t[5]||(t[5]=function(t){return e.dialogVisible=t})],"onDialog:closed":e.refreshDataGrid,dialogData:e.dialogData,filter:e.filter},null,8,["dialogVisible","onDialog:closed","dialogData","filter"])):Object(n["createCommentVNode"])("",!0)]})),_:1},512)),[[k,e.loading]])}a("0cfa");var d=a("5040"),b=a.n(d),p=a("1da1"),g=(a("99af"),a("96cf"),a("8afd")),f=a("c45b"),m=a("2022"),O={class:"grid grid-cols-1"},j=Object(n["createTextVNode"])(" Lihat Dokumen "),v={class:"bg-white"},h={class:"p-5"},k={key:0},D=Object(n["createVNode"])("h4",{class:"font-bold mb-2"},"Catatan Oleh SVP Wilayah:",-1),V=Object(n["createVNode"])("hr",{class:"mt-2 mb-2"},null,-1),w={key:1},x=Object(n["createVNode"])("h4",{class:"font-bold mb-2"},"Status Skoring (Rekomendasi Dari Sistem):",-1),N={key:0},_={key:1},C={key:2},y=Object(n["createVNode"])("h4",{class:"font-bold mb-2"},"Status Skoring (Rekomendasi Dari Sistem):",-1),S={key:0},P={key:1},B=Object(n["createVNode"])("hr",{class:"mt-2 mb-2"},null,-1),R=Object(n["createVNode"])("h4",{class:"font-bold mb-2"},"Catatan Approval (SVP Perencanaan & Manajemen PSO):",-1),A={key:3},T=Object(n["createVNode"])("h4",{class:"font-bold mb-2"}," Catatan Approval Akhir (SEVP Operasi Pemasaran): ",-1);function F(e,t,a,r,o,i){var c=Object(n["resolveComponent"])("DxFilterRow"),l=Object(n["resolveComponent"])("DxColumn"),u=Object(n["resolveComponent"])("router-link"),s=Object(n["resolveComponent"])("DxMasterDetail"),d=Object(n["resolveComponent"])("DxPaging"),b=Object(n["resolveComponent"])("DxPager"),p=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(p,{ref:"root","data-source":e.customStore,"show-borders":!0,"remote-operations":{paging:!0,filtering:!0,sorting:!1},selection:{mode:"single"},"allow-column-reordering":!0,"allow-column-resizing":!0,"column-auto-width":!0,onSelectionChanged:e.onSelectionChanged,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)})},{distributorNameCellTemplate:Object(n["withCtx"])((function(t){var a=t.data;return[Object(n["createVNode"])("div",O,[Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(a.data.distributor.name),1),Object(n["createVNode"])(u,{to:e.linkToProcessDocument(a),target:"_blank",class:"\n            text-xs\n            underline\n            text-blue-500\n            hover:text-blue-900\n            cursor-pointer\n          "},{default:Object(n["withCtx"])((function(){return[j]})),_:2},1032,["to"])])]})),regionNameCellTemplate:Object(n["withCtx"])((function(e){var t=e.data;return[Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(t.data.region.name),1)]})),finalScoreTemplate:Object(n["withCtx"])((function(e){var t=e.data;return[Object(n["createVNode"])("span",null,Object(n["toDisplayString"])(t.data.final_score)+" ("+Object(n["toDisplayString"])(t.data.score_status)+")",1)]})),cellTemplate:Object(n["withCtx"])((function(t){var a=t.data;return[Object(n["createVNode"])("div",null,[Object(n["createVNode"])("button",{onClick:function(t){return e.openingActionDialog(a.data)},class:"btn bg-theme-9 px-8 py-2 text-white text-xs",disabled:null==a.data.status.verification_status}," Proses ",8,["onClick","disabled"])])]})),productTable:Object(n["withCtx"])((function(e){var t=e.data;return[Object(n["createVNode"])("div",v,[Object(n["createVNode"])("section",h,[null!==t.data.notes?(Object(n["openBlock"])(),Object(n["createBlock"])("div",k,[D,Object(n["createVNode"])("p",null,Object(n["toDisplayString"])(t.data.notes),1),V])):Object(n["createCommentVNode"])("",!0),null==t.data.status.approval_status?(Object(n["openBlock"])(),Object(n["createBlock"])("div",w,[x,null==t.data.status.verification_status?(Object(n["openBlock"])(),Object(n["createBlock"])("p",N,"Nilai terbaru dalam proses perhitungan oleh sistem.")):(Object(n["openBlock"])(),Object(n["createBlock"])("p",_,Object(n["toDisplayString"])(t.data.status.verification_status),1))])):Object(n["createCommentVNode"])("",!0),null!=t.data.status.approval_status?(Object(n["openBlock"])(),Object(n["createBlock"])("div",C,[y,null==t.data.status.verification_status?(Object(n["openBlock"])(),Object(n["createBlock"])("p",S,"Nilai terbaru dalam proses perhitungan oleh sistem.")):(Object(n["openBlock"])(),Object(n["createBlock"])("p",P,Object(n["toDisplayString"])(t.data.status.verification_status),1)),B,R,Object(n["createVNode"])("p",null,Object(n["toDisplayString"])(t.data.status.approval_note),1)])):Object(n["createCommentVNode"])("",!0),null!=t.data.status.final_approval_status?(Object(n["openBlock"])(),Object(n["createBlock"])("div",A,[T,Object(n["createVNode"])("p",null,Object(n["toDisplayString"])(t.data.status.final_approval_note),1)])):Object(n["createCommentVNode"])("",!0)])])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{visible:!0}),Object(n["createVNode"])(l,{"data-field":"distributor.sap_id","data-type":"string",caption:"Customer ID"}),Object(n["createVNode"])(l,{width:300,"data-field":"distributor.name","data-type":"string",caption:"Distributor","cell-template":"distributorNameCellTemplate"}),Object(n["createVNode"])(l,{"data-field":"region.name","data-type":"string",caption:"Region","cell-template":"regionNameCellTemplate"}),Object(n["createVNode"])(l,{"data-field":"final_score","data-type":"string",caption:"Nilai (System)","cell-template":"finalScoreTemplate"}),0==e.process?(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:0,allowFiltering:!1,width:300,"data-field":"id",caption:"Action","cell-template":"cellTemplate"})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(s,{class:"bg-white",enabled:!0,template:"productTable",autoExpandAll:!1}),Object(n["createVNode"])(d,{"page-size":20}),Object(n["createVNode"])(b,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20]})]})),_:1},8,["data-source","onSelectionChanged"])}a("fb6a"),a("caad"),a("d3b7");var I=a("d30a"),E=a("2597"),G=a.n(E),K=a("c953"),L=a("2388"),M=a("eeae"),$=a("2611"),U=a("4360"),q=Object(n["defineComponent"])({components:{DxDataGrid:I["DxDataGrid"],DxColumn:I["DxColumn"],DxPaging:I["DxPaging"],DxPager:I["DxPager"],DxSorting:I["DxSorting"],DxHeaderFilter:I["DxHeaderFilter"],DxFilterRow:I["DxFilterRow"],DxMasterDetail:I["DxMasterDetail"]},props:["status","filter","process"],setup:function(e,t){var a=this,r=t.emit,o=Object(U["b"])(),i=Object(n["ref"])(null);Object(n["onMounted"])((function(){})),Object($["a"])();function c(e){return void 0!==e&&null!==e&&""!==e}var l=Object(n["inject"])("env"),u=new G.a({key:"id",load:function(t){var a="?";return["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(e){e in t&&c(t[e])&&(a+="".concat(e,"=").concat(JSON.stringify(t[e]),"&"))})),a=a.slice(0,-1),a+="&region_code=".concat(e.filter.regionCode),a+="&kuartal=".concat(e.filter.kuartal),a+="&evaluation_period=".concat(e.filter.evaluation_period_id),a+="&status=".concat(e.status),K["a"].get("".concat(l["VUE_APP_API_ENDPOINT"],"/evaluation-bundles/by-admin-pso").concat(a)).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),s=function(e){e.selectedRowsData},d=function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,L["a"].activate(t).then((function(e){b.a.success({title:"Success",position:"bottom-right"}),f()})).catch((function(e){b.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,L["a"].deactivate(t).then((function(e){b.a.success({title:"Success",position:"bottom-right"}),f()})).catch((function(e){b.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){i.value.instance.refresh()},m=function(){i.value.instance.clearSelection()},O=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:f.bind(a)}})},j=o.state.auth.user,v=function(t){return["svp_region","svp_pso_planning_management","sevp_marketing_ops","marketing_director"].includes(j.role.name)?{name:"admin-evaluation-document-verification.distributor-evaluation.document-verification",params:{distributor_id:t.data.distributor.id},query:{evaluation_period:e.filter.evaluation_period_id}}:{name:"admin-document-verification.bundle",params:{distributor_id:t.data.distributor.id},query:{registration_period:e.registrationPeriodId}}},h=Object(n["ref"])(!1),k=function(e){r("openDialogAction",e)},D=new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"});return{get_allocation_loading:h,customStore:u,onSelectionChanged:s,activate:d,deactivate:g,onToolbarPreparing:O,refreshDataGrid:f,clearSelection:m,root:i,linkToProcessDocument:v,openingActionDialog:k,currencyFormatter:D}}}),z=a("6b0d"),H=a.n(z);const J=H()(q,[["render",F]]);var W=J,Y=a("fb27"),Q={class:"grid grid-cols-2 gap-4 mb-2"},X=Object(n["createVNode"])("label",{for:"produsen"},"Distributor",-1),Z={class:"text-base",style:{"font-weight":"bold"}},ee=Object(n["createVNode"])("label",{for:"propinsi"},"Region",-1),te={class:"text-base",style:{"font-weight":"bold"}},ae={class:"grid grid-cols-2 gap-4 mb-4"},ne=Object(n["createVNode"])("label",{for:"produsen"},"Persentase Skoring",-1),re={class:"text-base",style:{"font-weight":"bold"}},oe=Object(n["createVNode"])("label",{for:"produsen"},"Status Skoring oleh Sistem",-1),ie={class:"text-base",style:{"font-weight":"bold"}},ce=Object(n["createVNode"])("div",{class:"border border-b-0 mb-4"},null,-1),le={class:"grid grid-cols-1 gap-4"},ue={class:"grid grid-cols-1 gap-4 mb-3"},se=Object(n["createVNode"])("label",{for:""},"Status Skoring",-1),de=Object(n["createVNode"])("small",null,"* Perubahan status skoring (keputusan untuk distributor) diberikan pada Kuartal 2 dan Kuartal 4",-1),be={class:"grid grid-cols-1 gap-4"},pe=Object(n["createVNode"])("label",{for:"produsen"},"Notes",-1),ge={class:"dialog-footer"},fe=Object(n["createTextVNode"])("Cancel"),me=Object(n["createTextVNode"])("Confirm"),Oe=Object(n["createVNode"])("br",null,null,-1),je=Object(n["createVNode"])("div",{class:"dialog-footer-notes bg-gray-200"},[Object(n["createVNode"])("p",null,[Object(n["createTextVNode"])(" *Apabila "),Object(n["createVNode"])("b",null,"Status Skoring"),Object(n["createTextVNode"])(" tidak mendapatkan perubahan, maka sistem akan menganggap bahwa "),Object(n["createVNode"])("b",null,"SVP PSO Planning Management"),Object(n["createTextVNode"])(" menyetujui Data tersebut ")])],-1);function ve(e,t,a,r,o,i){var c=Object(n["resolveComponent"])("el-option"),l=Object(n["resolveComponent"])("el-select"),u=Object(n["resolveComponent"])("form-item"),s=Object(n["resolveComponent"])("el-button"),d=Object(n["resolveComponent"])("el-dialog");return Object(n["openBlock"])(),Object(n["createBlock"])(d,{"append-to-body":"",title:"",modelValue:e.dialogVisible,width:"50%",onClose:e.closeDialog},{footer:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("span",ge,[Object(n["createVNode"])(s,{onClick:e.closeDialog},{default:Object(n["withCtx"])((function(){return[fe]})),_:1},8,["onClick"]),Object(n["createVNode"])(s,{type:"primary",onClick:e.submitEvaluationDistributorForm},{default:Object(n["withCtx"])((function(){return[me]})),_:1},8,["onClick"])]),Oe,je]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("div",Q,[Object(n["createVNode"])("div",null,[X,Object(n["createVNode"])("p",Z,Object(n["toDisplayString"])(e.dialogData.distributor.name),1)]),Object(n["createVNode"])("div",null,[ee,Object(n["createVNode"])("p",te,Object(n["toDisplayString"])(e.dialogData.region.name),1)])]),Object(n["createVNode"])("div",ae,[Object(n["createVNode"])("div",null,[ne,Object(n["createVNode"])("p",re,Object(n["toDisplayString"])(e.dialogData.final_score),1)]),Object(n["createVNode"])("div",null,[oe,Object(n["createVNode"])("p",ie,Object(n["toDisplayString"])(e.dialogData.status.verification_status),1)])]),ce,Object(n["createVNode"])("div",le,[Object(n["createVNode"])("div",ue,[se,Object(n["createVNode"])(u,{label:"Kuartal"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{class:"form-control",modelValue:e.dialogFormData.statusScoring,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.dialogFormData.statusScoring=t})},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.scoreStatus,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:e.id,value:e.keterangan,label:e.keterangan},null,8,["value","label"])})),128))]})),_:1},8,["modelValue"]),de]})),_:1})])]),Object(n["createVNode"])("div",be,[Object(n["createVNode"])("div",null,[pe,Object(n["withDirectives"])(Object(n["createVNode"])("textarea",{rows:"5","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.dialogFormData.notes=t}),class:"form-control mt-2"},null,512),[[n["vModelText"],e.dialogFormData.notes]])])])]})),_:1},8,["modelValue","onClose"])}var he=a("be89"),ke=a("730f"),De=Object(g["c"])({props:{value:String,dialogVisible:{type:Boolean},dialogData:{required:!0},filter:{required:!0}},emits:["update:dialogVisible","dialog:closed"],setup:function(e,t){var a=t.emit,n=Object(g["o"])({notes:"",statusScoring:e.dialogData.status.verification_status}),r=Object($["a"])(),o=Object(g["p"])([]);Object(g["m"])(Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ke["a"].getRecommendStatusSkor().then((function(e){o.value=e.data}));case 2:case"end":return e.stop()}}),e)}))));var i=function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,he["a"].setRecommendationSVPPso({id:e.dialogData.id,status:n.statusScoring,note:n.notes}).then((function(e){b.a.success({title:"Success",position:"bottom-right"})})).catch((function(e){b.a.error({title:"Failed",position:"bottom-right"})}));case 2:c(),a("dialog:closed");case 4:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c=function(){n.notes="",a("update:dialogVisible",!1)};return{dialogFormData:n,submitEvaluationDistributorForm:i,closeDialog:c,scoreStatus:o}}});a("5cd3");const Ve=H()(De,[["render",ve]]);var we=Ve,xe=Object(g["c"])({components:{DocumentForm:f["a"],DataGrid:W,FormItem:m["a"],EvaluationDistributorDialog:we},setup:function(){var e=Object(g["p"])(!1),t=Object(g["p"])(!1),a=Object(g["p"])(!1),n=Object(g["o"])({id:null,period:null}),r=Object(g["p"])([]),o=Object(g["p"])([]),i=Object(g["p"])([]),c=Object(g["p"])([]),l=Object(g["p"])([]),u=Object(g["p"])(!1),s=Object(g["p"])(null),d=Object(g["o"])({notes:""}),f=Object($["a"])(),m=Object(g["p"])(null),O=Object(g["p"])(null),j=Object(g["o"])({tonnageAllocation:1e3,distributorAllocation:150}),v=Object(g["o"])({kuartal:-1,regionCode:-1,evaluation_period_year:null,evaluation_period_id:null}),h=[{id:1,name:"Kuartal 1"},{id:2,name:"Kuartal 2"},{id:3,name:"Kuartal 3"},{id:4,name:"Kuartal 4"}];Object(g["m"])(Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ke["a"].getActive().then(function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:v.evaluation_period_year=t.data.period,v.evaluation_period_id=t.data.id,v.kuartal=t.data.active_kuartal;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.next=4,k();case 4:case"end":return e.stop()}}),e)}))));var k=function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y["a"].regions().then(function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i.value=t.data;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null==v.regionCode){e.next=6;break}return v.provinceId=-1,v.cityId=-1,e.next=5,Y["a"].regionProvinces(v.regionCode).then((function(e){c.value=e.data}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null==v.provinceId){e.next=5;break}return v.cityId=-1,e.next=4,Y["a"].regionProducerArea(v.provinceId).then((function(e){l.value=e.data}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",v);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(e){s.value=e,u.value=!0},N=function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:f.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(p["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=s.value,a=t.producer_code,n=t.province_id,r=t.city_id,e.next=3,M["a"].setAllocation({registration_period_id:v.periodId,producer_code:a,province_id:n,city_id:r,total_distributor:d.notes}).then((function(e){O.value.refreshDataGrid(),m.value.refreshDataGrid(),b.a.success({title:"Data berhasil disimpan",position:"bottom-right"})})).catch((function(e){b.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})}));case 3:d.notes="",s.value=null,u.value=!1;case 6:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){O.value.refreshDataGrid(),m.value.refreshDataGrid()},C=Object(g["e"])("env"),y=function(){var e="?evaluationPeriod=".concat(v.evaluation_period_id,"&regionCode=").concat(v.regionCode);window.open("".concat(C["VUE_APP_API_ENDPOINT"],"/download-evaluation-report").concat(e),"_blank")};return{tonnageAllocationLoading:a,distributorAllocationLoading:t,allocationData:j,registrationPeriod:n,registrationPeriods:r,loading:e,producers:o,regions:i,provinces:c,cities:l,filter:v,quartal:h,getRegions:k,getProvinces:D,getCities:V,dialogVisible:u,openFormActionDialog:x,updateTable:w,dialogData:s,dialogFormData:d,submitEvaluationDistributorForm:N,allocatedDataGrid:m,unallocatedDataGrid:O,refreshDataGrid:_,exportEvaluationData:y,filterFulfilled:Object(g["a"])((function(){return null!=v.kuartal&&null!=v.regionCode&&null!=v.evaluation_period_id}))}}});a("ea37");const Ne=H()(xe,[["render",s]]);t["default"]=Ne},b4ff:function(e,t,a){},be89:function(e,t,a){"use strict";var n=a("c953"),r=function(e){return n["a"].post("/distributor-evaluation/approved/svp-pso",e)},o=function(e){return n["a"].post("/distributor-evaluation/approved/sevp-marketing",e)};t["a"]={setRecommendationSVPPso:r,setRecommendationSEVPMarketing:o}},d94f:function(e,t,a){},ea37:function(e,t,a){"use strict";a("b4ff")},eeae:function(e,t,a){"use strict";var n=a("c953"),r=function(e){return n["a"].post("/distributor-allocations",e)},o=function(e){return n["a"].get("/get-allocation/distributor".concat(e))},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return n["a"].post("/distributor-allocations/".concat(t,"/is-allocation-full"),e)};t["a"]={setAllocation:r,getAllocation:o,isAllocationFull:i}},fb27:function(e,t,a){"use strict";a.d(t,"b",(function(){return f})),a.d(t,"c",(function(){return m}));a("99af");var n=a("c953"),r="/distributor-regions",o=function(){return n["a"].get(r+"/regions")},i=function(){return n["a"].get(r+"/regions_by_vp")},c=function(){return n["a"].get(r+"/regions_by_wilayah")},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n["a"].get(r+"/regions_by_anper/".concat(e))},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n["a"].get(r+"/regions-province/".concat(e))},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return n["a"].get(r+"/regions-province-anper/".concat(e,"/").concat(t))},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n["a"].get(r+"/producer-area/".concat(e))},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return n["a"].get(r+"/producer-area-anper/".concat(e,"/").concat(t))},p=function(e){return n["a"].post(r,e)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return n["a"].put(r+"/".concat(e),t)},f=function(e){return n["a"].delete(r+"/".concat(e))},m=function(e){return n["a"].post(r+"/".concat(e,"/verify"))};t["a"]={regions:o,regions_by_vp:i,regions_by_wilayah:c,regions_by_anper:l,regionProvinces:u,regionProvincesAnper:s,regionProducerArea:d,regionProducerAreaAnper:b,addDistributorRegions:p,updateDistributorRegions:g,deleteDistributorRegion:f,verifyDistributorRegion:m}}}]);