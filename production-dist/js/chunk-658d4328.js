(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-658d4328"],{"15fd":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("a4d3"),a("b64b");function n(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}function r(e,t){if(null==e)return{};var a,r,o=n(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}},2611:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("8afd");function r(){return{$show:Object(n["e"])("$messageBox"),$prompt:Object(n["e"])("$prompt"),$alert:Object(n["e"])("$alert"),$confirm:Object(n["e"])("$confirm")}}},"3c6f":function(e,t,a){"use strict";t["a"]={DemplotReport:1,SocializationReport:2,SuppliesFulfillment:3,F5F6Report:4,DistributorPositiveNews:5,DistributorErdkk:6,KioskPerformance:7,FertilizerRedemption:8,FertilizerDistribution:9,KioskToFarmers:10,F5ReportSubmission:11,TPubersActivation:12,KioskTransaction:13,DistributorSanction:14,DistributorCompliance:15,DistributorReportCorrection:16,DistributorActivity:17,KioskStockFulfillment:18}},5504:function(e,t,a){"use strict";a.r(t);a("b0c0");var n=a("7a23"),r={class:"intro-y col-span-12 lg:col-span-12"},o={class:"p-5"},i={class:"sm:grid grid-cols-2 gap-5"},c={class:""},l=Object(n["createVNode"])("p",null,"Periode Penilaian:",-1),u={key:0,class:"text-xl"},d={class:"mt-5 text-right"},s=Object(n["createTextVNode"])("Q1"),b=Object(n["createTextVNode"])("Q2"),f=Object(n["createTextVNode"])("Q3"),p=Object(n["createTextVNode"])("Q4"),m={class:""},O={class:"grid grid-cols-2 gap-5 mt-3"},v={class:"grid grid-cols-2 gap-5 mt-3"},j=Object(n["createTextVNode"])("Click to upload"),h={class:"flex w-full px-5"},g={class:"ml-auto"},k={key:1};function w(e,t,a,w,x,D){var C=Object(n["resolveComponent"])("el-checkbox"),_=Object(n["resolveComponent"])("el-checkbox-group"),V=Object(n["resolveComponent"])("el-option"),y=Object(n["resolveComponent"])("el-select"),N=Object(n["resolveComponent"])("form-item"),P=Object(n["resolveComponent"])("el-button"),S=Object(n["resolveComponent"])("el-upload"),B=Object(n["resolveComponent"])("DataGrid"),R=Object(n["resolveComponent"])("document-form"),F=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createBlock"])("div",r,[Object(n["withDirectives"])(Object(n["createVNode"])(R,{title:"Koreksi Laporan F5 & F6",evaluationPeriod:e.evaluationPeriod},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("div",o,[Object(n["createVNode"])("div",i,[Object(n["createVNode"])("div",c,[l,null!=e.evaluationPeriod?(Object(n["openBlock"])(),Object(n["createBlock"])("p",u,Object(n["toDisplayString"])(e.evaluationPeriod.period),1)):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])("div",d,[Object(n["createVNode"])(_,{modelValue:e.activeQuartal,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.activeQuartal=t})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(C,{label:1,disabled:""},{default:Object(n["withCtx"])((function(){return[s]})),_:1}),Object(n["createVNode"])(C,{label:2,disabled:""},{default:Object(n["withCtx"])((function(){return[b]})),_:1}),Object(n["createVNode"])(C,{label:3,disabled:""},{default:Object(n["withCtx"])((function(){return[f]})),_:1}),Object(n["createVNode"])(C,{label:4,disabled:""},{default:Object(n["withCtx"])((function(){return[p]})),_:1})]})),_:1},8,["modelValue"])])]),Object(n["createVNode"])("div",m,[Object(n["createVNode"])("div",O,[Object(n["createVNode"])(N,{label:"Bulan Laporan",validationData:e.validate.correction_month},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])(y,{class:"form-control",modelValue:e.formData.correction_month,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.formData.correction_month=t})},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.month_by_quartal,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(V,{key:e.id,value:e.id,label:e.name},null,8,["value","label"])})),128))]})),_:1},8,["modelValue"]),[[F,e.loading]])]})),_:1},8,["validationData"]),Object(n["createVNode"])(N,{label:"Nama Koreksi",validationData:e.validate.correction_name},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{type:"text",class:["form-control w-full",{"border-theme-6":e.validate.correction_name.$error}],placeholder:"","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.validate.correction_name.$model=t})},null,2),[[n["vModelText"],e.validate.correction_name.$model]])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",v,[Object(n["createVNode"])(N,{label:"Produsen",validationData:e.validate.producer_id},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])(y,{class:"form-control",modelValue:e.formData.producer_id,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.formData.producer_id=t}),clearable:""},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.producers,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(V,{key:e.id,value:e.id,label:e.name},null,8,["value","label"])})),128))]})),_:1},8,["modelValue"]),[[F,e.loading]])]})),_:1},8,["validationData"]),Object(n["createVNode"])(N,{label:"Upload File",validationData:e.validate.file_path},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(S,{ref:"elUpload",class:"upload-demo",action:e.env["VUE_APP_API_ENDPOINT"]+"/files",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},"with-credentials":!0,"on-success":e.onUploadSuccess,"file-list":null!=e.formData.file_path?[{name:"file-bukti-koreksi",url:e.formData.file_path}]:[],"on-preview":e.handlePreview},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(P,{size:"small",type:"primary"},{default:Object(n["withCtx"])((function(){return[j]})),_:1})]})),_:1},8,["action","on-success","file-list","on-preview"])]})),_:1},8,["validationData"])])])]),Object(n["createVNode"])("div",h,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-outline-secondary mr-2",onClick:t[5]||(t[5]=function(){var t;return e.dataGrid.clearSelection&&(t=e.dataGrid).clearSelection.apply(t,arguments)})}," Clear Selection ")):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])("div",g,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,disabled:e.loading,class:[{"cursor-not-allowed":e.loading},"btn btn-primary w-24 mr-2"],type:"button",onClick:t[6]||(t[6]=function(){return e.save&&e.save.apply(e,arguments)})}," Save ",10,["disabled"])):(Object(n["openBlock"])(),Object(n["createBlock"])("div",k,[Object(n["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-2",onClick:t[7]||(t[7]=function(){return e.resetFormData&&e.resetFormData.apply(e,arguments)})}," Reset "),Object(n["createVNode"])("button",{disabled:e.loading,class:[{"cursor-not-allowed":e.loading},"btn bg-theme-9 text-white w-24"],type:"button",onClick:t[8]||(t[8]=function(){return e.add&&e.add.apply(e,arguments)})}," Add ",10,["disabled"])]))])]),Object(n["createVNode"])(B,{ref:"dataGrid",class:"m-5",onSelectionChanged:e.onSelectionChanged},null,8,["onSelectionChanged"])]})),_:1},8,["evaluationPeriod"]),[[F,e.loading]])])}a("0cfa");var x=a("5040"),D=a.n(x),C=a("15fd"),_=a("1da1"),V=a("5530"),y=(a("96cf"),a("d3b7"),a("c45b"));function N(e,t,a,r,o,i){var c=Object(n["resolveComponent"])("DxColumn"),l=Object(n["resolveComponent"])("DxPaging"),u=Object(n["resolveComponent"])("DxPager"),d=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(d,{ref:"root","data-source":e.store,"show-borders":!0,"remote-operations":!0,selection:{mode:"single"},onSelectionChanged:e.onSelectionChanged,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)}),"allow-column-reordering":!0,"allow-column-resizing":!0,"column-auto-width":!0},{filePath:Object(n["withCtx"])((function(t){var a=t.data;return[Object(n["createVNode"])("a",{href:e.env["VUE_APP_API_ENDPOINT"]+"/files?filePath="+a.data.file_path,class:"btn btn-sm bg-theme-9 rounded-lg text-white",target:"_blank"},"Preview",8,["href"])]})),cellTemplate:Object(n["withCtx"])((function(t){var a=t.data;return[Object(n["createVNode"])("button",{onClick:function(t){return e.destroy(a.data.id)},class:"btn btn-sm bg-theme-6 rounded-lg text-white"}," Delete ",8,["onClick"])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{"data-field":"month","data-type":"string",caption:"Bulan Laporan"}),Object(n["createVNode"])(c,{"data-field":"correction_name","data-type":"string",caption:"Nama Koreksi"}),Object(n["createVNode"])(c,{"data-field":"producers.name","data-type":"string",caption:"Produsen"}),Object(n["createVNode"])(c,{"data-field":"file_path","data-type":"string",caption:"File Bukti Koreksi","cell-template":"filePath"}),Object(n["createVNode"])(c,{allowFiltering:!1,width:100,"data-field":"id",caption:"Aksi","cell-template":"cellTemplate"}),Object(n["createVNode"])(l,{"page-size":5}),Object(n["createVNode"])(u,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20]})]})),_:1},8,["data-source","onSelectionChanged"])}var P=a("ade3"),S=(a("99af"),a("fb6a"),a("d30a")),B=a("2597"),R=a.n(B),F=a("c953"),T="/distributor-report-correction",$=function(){return F["a"].get(T)},G=function(e){return F["a"].post(T,e)},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return F["a"].delete(T+"/".concat(e))},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return F["a"].put(T+"/".concat(e),t)},E={get:$,add:G,update:K,destroy:A},U=a("6c02"),M=a("2611"),q=Object(n["defineComponent"])({components:{DxDataGrid:S["DxDataGrid"],DxColumn:S["DxColumn"],DxPaging:S["DxPaging"],DxPager:S["DxPager"],DxSorting:S["DxSorting"],DxHeaderFilter:S["DxHeaderFilter"],DxFilterRow:S["DxFilterRow"]},emits:["selectionChanged"],setup:function(e,t){var a=this,r=t.emit,o=Object(n["ref"])(null),i=Object(U["c"])(),c=Object(M["a"])();function l(e){return void 0!==e&&null!==e&&""!==e}Object(n["onMounted"])((function(){}));var u=Object(n["inject"])("env"),d=new R.a({key:"id",load:function(e){var t="?";["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(a){a in e&&l(e[a])&&(t+="".concat(a,"=").concat(JSON.stringify(e[a]),"&"))})),t=t.slice(0,-1),t+="&distributor_id="+i.params.distributor_id;var a="".concat(u["VUE_APP_API_ENDPOINT"],"/distributor-report-correction").concat(t);return F["a"].get(a).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),s=(Object(n["inject"])("updateFormData"),function(e){var t=e.selectedRowsData;r("selectionChanged",t[0])}),b=function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:c.$confirm("Hapus data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,E.destroy(t).then((function(e){D.a.success({title:"Success",position:"bottom-right"}),f()})).catch((function(e){D.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})))).catch((function(){}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){o.value.instance.refresh()},p=function(){o.value.instance.clearSelection()},m=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:f.bind(a)}})};return Object(P["a"])({env:u,route:i,store:d,onSelectionChanged:s,destroy:b,onToolbarPreparing:m,refreshDataGrid:f,clearSelection:p,root:o},"route",i)}}),I=a("6b0d"),L=a.n(I);const z=L()(q,[["render",N]]);var Q=z,H=a("3c6f"),J={id:null,correction_month:null,correction_name:null,producer_id:null,file_path:null,distributor_id:null,period:null,kuartal:null},X=a("25a0"),W=a("e3e1"),Y=a("2022"),Z=a("730f"),ee=a("de0c"),te=a("5502"),ae=["id"],ne=["id"],re=Object(n["defineComponent"])({components:{DocumentForm:y["a"],FormItem:Y["a"],DataGrid:Q},setup:function(e){var t=Object(U["c"])(),a=Object(te["d"])(),r=(a.state.auth.user,Object(n["ref"])(null)),o=Object(n["ref"])(!1),i=Object(n["ref"])(!0),c=Object(M["a"])(),l=Object(n["ref"])(null),u=Object(n["ref"])(null),d=Object(n["inject"])("env"),s=Object(n["reactive"])(Object(V["a"])({},J)),b={correction_month:{required:W["c"]},correction_name:{required:W["c"]},producer_id:{required:W["c"]},file_path:{required:W["c"]}},f=Object(X["a"])(b,Object(n["toRefs"])(s)),p=Object(n["ref"])([]),m=Object(n["ref"])([]);Object(n["onMounted"])(Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Z["a"].getActive().then((function(e){r.value=e.data,s.period=e.data.period,s.kuartal=e.data.active_kuartal})).finally((function(){s.distributor_id=t.params.distributor_id}));case 2:return e.next=4,Z["a"].getActiveMonth().then((function(e){m.value=e.data}));case 4:return e.next=6,ee["a"].all().then((function(e){p.value=e.data})).finally((function(){i.value=!1}));case 6:case"end":return e.stop()}}),e)}))));var O=function(){for(var e in J)s[e]=J[e];f.value.$reset()},v=function(e){var t=Object(n["toRefs"])(s);for(var a in J)Object.hasOwnProperty.call(e,a)&&(t[a].value=e[a])},j=function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!=t?(v(t),o.value=!0):(O(),o.value=!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:f.value.$touch(),f.value.$invalid?D.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):c.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(_["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s.id,t=Object(C["a"])(s,ae),i.value=!0,e.next=4,E.update(s.id,t).then((function(e){D.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),l.value.clearSelection(),l.value.refreshDataGrid(),O()})).catch((function(e){D.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){i.value=!1}));case 4:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:f.value.$touch(),f.value.$invalid?D.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):c.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(_["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s.id,t=Object(C["a"])(s,ne),i.value=!0,e.next=4,E.add(t).then((function(e){D.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),u.value.clearFiles(),l.value.refreshDataGrid(),O()})).catch((function(e){D.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){i.value=!1}));case 4:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(e,t,a){s.file_path=e.id},w=function(e){var t=window.open(d["VUE_APP_API_ENDPOINT"]+"/files?filePath="+e.url,"_blank");t.focus()};function x(e){j(e)}Object(n["provide"])("updateFormData",j);var y=function(){l.value.refreshDataGrid()};return{env:d,formData:s,validate:f,dataGrid:l,producers:p,month_by_quartal:m,updateMode:o,loading:i,save:h,add:g,resetFormData:O,onUploadSuccess:k,elUpload:u,handlePreview:w,onSelectionChanged:x,refreshDataGrid:y,EvaluationAspectType:H["a"],evaluationPeriod:r,activeQuartal:Object(n["computed"])((function(){if(!i.value)return[r.value.active_kuartal]}))}},data:function(){return{}}});const oe=L()(re,[["render",w]]);t["default"]=oe},de0c:function(e,t,a){"use strict";var n=a("c953"),r="/producer",o=function(){return n["a"].get("".concat(r))};t["a"]={all:o}}}]);