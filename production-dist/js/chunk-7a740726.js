(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a740726"],{"0ccb":function(e,t,a){var n=a("50c4"),o=a("577e"),r=a("1148"),i=a("1d80"),c=Math.ceil,l=function(e){return function(t,a,l){var d,u,s=o(i(t)),b=s.length,p=void 0===l?" ":o(l),f=n(a);return f<=b||""==p?s:(d=f-b,u=r.call(p,c(d/p.length)),u.length>d&&(u=u.slice(0,d)),e?s+u:u+s)}};e.exports={start:l(!1),end:l(!0)}},1148:function(e,t,a){"use strict";var n=a("a691"),o=a("577e"),r=a("1d80");e.exports=function(e){var t=o(r(this)),a="",i=n(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(a+=t);return a}},"15fd":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a("a4d3"),a("b64b");function n(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}function o(e,t){if(null==e)return{};var a,o,r=n(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)a=i[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}},2611:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a("8afd");function o(){return{$show:Object(n["e"])("$messageBox"),$prompt:Object(n["e"])("$prompt"),$alert:Object(n["e"])("$alert"),$confirm:Object(n["e"])("$confirm")}}},"4d90":function(e,t,a){"use strict";var n=a("23e7"),o=a("0ccb").start,r=a("9a0c");n({target:"String",proto:!0,forced:r},{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},"6eb3":function(e,t,a){"use strict";a("99af");var n=a("c953"),o="/distributors",r=function(e){return n["a"].get("".concat(o,"/").concat(e,"/regions"))},i=function(e){return n["a"].get("".concat(o,"/").concat(e,"/proposed-regions"))},c=function(e,t){return n["a"].get("".concat(o,"/").concat(e,"/proposed-regions/").concat(t,"/provinces"))},l=function(e,t,a){return n["a"].get("".concat(o,"/").concat(e,"/proposed-regions/").concat(t,"/provinces/").concat(a,"/cities"))};t["a"]={show:r,getProposedRegions:i,getProposedProvinces:c,getProposedCities:l}},"75cc":function(e,t,a){"use strict";a.r(t);var n=a("7a23"),o={class:"grid grid-cols-12 gap-6"};function r(e,t,a,r,i,c){var l=Object(n["resolveComponent"])("RekomendasiDinas");return Object(n["openBlock"])(),Object(n["createBlock"])("div",null,[Object(n["createVNode"])("div",o,[Object(n["createVNode"])(l)])])}a("b0c0"),a("99af");var i={id:"rekomendasi-disperindag",class:"intro-y col-span-12 lg:col-span-12"},c={class:"p-5"},l={class:"grid grid-cols-2 gap-5 mb-5"},d={class:"mt-3"},u={class:"sm:grid grid-cols-2 gap-5"},s=Object(n["createTextVNode"])("Click to upload"),b={class:"grid grid-cols-1 gap-5 mt-5"},p={class:"grid grid-cols-2 gap-5 mt-5"},f={class:"mt-2 flex items-center gap-2"},m=Object(n["createTextVNode"])(" Berlaku Selamanya "),v={class:"mt-3"},g={class:"sm:grid grid-cols-2 gap-5"},O={class:""},j={key:0},h={class:"mt-4 grid grid-cols-2 gap-5 pb-5 border-b"},k={class:"intro-y input-form"},_=Object(n["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"}," Status ",-1),D={class:"intro-y input-form"},V=Object(n["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"}," Status Verifikasi ",-1),w={class:"flex w-full px-5"},y={key:1,class:"ml-auto"},x={key:1};function C(e,t,a,o,r,C){var N=Object(n["resolveComponent"])("el-option"),B=Object(n["resolveComponent"])("el-select"),S=Object(n["resolveComponent"])("form-item"),R=Object(n["resolveComponent"])("el-button"),P=Object(n["resolveComponent"])("el-upload"),$=Object(n["resolveComponent"])("el-date-picker"),T=Object(n["resolveComponent"])("DataGrid"),A=Object(n["resolveComponent"])("document-form"),M=Object(n["resolveComponent"])("verification-dialog"),F=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createBlock"])("div",i,[Object(n["withDirectives"])(Object(n["createVNode"])(A,{title:"Rekomendasi Dinas Perdagangan",isRegional:!0,itemType:9},{default:Object(n["withCtx"])((function(a){var o=a.allowManage;return[Object(n["createVNode"])("div",c,[Object(n["createVNode"])("div",l,[Object(n["createVNode"])(S,{class:"col-span-2",label:"Region","rules-text":"Required",validationData:e.validate.region_code},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(B,{clearable:"",modelValue:e.formData.region_code,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.formData.region_code=t}),class:["form-control",{"border-theme-6":e.validate.region_code.$error}],filterable:"",onChange:t[2]||(t[2]=function(t){return e.onRegionChanged(t)})},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.distributorRegions,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(N,{key:e.code,label:e.name,value:e.code},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","class"])]})),_:1},8,["validationData"]),Object(n["createVNode"])(S,{label:"Propinsi","rules-text":"Required",validationData:e.validate.province_id},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(B,{clearable:"",modelValue:e.formData.province_id,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.formData.province_id=t}),class:["form-control",{"border-theme-6":e.validate.province_id.$error}],filterable:"",onChange:t[4]||(t[4]=function(t){return e.onProvinceChanged(e.formData.region_code,t)})},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.distributorProvinces,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(N,{key:e.province_id,label:e.province_name,value:e.province_id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","class"])]})),_:1},8,["validationData"]),Object(n["createVNode"])(S,{label:"Kota/Kabupaten","rules-text":"Required",validationData:e.validate.city_id},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(B,{clearable:"",modelValue:e.formData.city_id,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.formData.city_id=t}),class:["form-control",{"border-theme-6":e.validate.city_id.$error}],filterable:""},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.distributorCities,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(N,{key:e.city_id,label:"".concat(e.city_type," ").concat(e.city_name),value:e.city_id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","class"])]})),_:1},8,["validationData"])]),Object(n["createVNode"])(S,{label:"Nomor Dokumen",validationData:e.validate.document_number},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{type:"text",class:["form-control w-full",{"border-theme-6":e.validate.document_number.$error}],placeholder:"Nomor Dokumen","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.validate.document_number.$model=t})},null,2),[[n["vModelText"],e.validate.document_number.$model]])]})),_:1},8,["validationData"]),Object(n["createVNode"])("div",d,[Object(n["createVNode"])("div",u,[Object(n["createVNode"])(S,{label:"Nama Dokumen",validationData:e.validate.document_name},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{type:"text",class:["form-control w-full",{"border-theme-6":e.validate.document_name.$error}],placeholder:"Nama Dokumen","onUpdate:modelValue":t[7]||(t[7]=function(t){return e.validate.document_name.$model=t})},null,2),[[n["vModelText"],e.validate.document_name.$model]])]})),_:1},8,["validationData"]),Object(n["createVNode"])(S,{label:"Lampiran",validationData:e.validate.file_path},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(P,{ref:"elUpload",class:"upload-demo",action:e.env["VUE_APP_API_ENDPOINT"]+"/files",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},"with-credentials":!0,"on-success":e.onUploadSuccees,"file-list":null!=e.formData.file_path?[{name:"file-rekomendasi-disperindag",url:e.formData.file_path}]:[],"on-preview":e.handlePreview},{tip:Object(n["withCtx"])((function(){return[]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(R,{size:"small",type:"primary"},{default:Object(n["withCtx"])((function(){return[s]})),_:1})]})),_:1},8,["action","on-success","file-list","on-preview"])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",b,[Object(n["createVNode"])(S,{class:"w-100",label:"Berlaku Mulai",validationData:e.validate.valid_from},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])($,{modelValue:e.validate.valid_from.$model,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.validate.valid_from.$model=t}),class:["form-control w-full",{"border-theme-6":e.validate.valid_from.$error}],style:{width:"100%"},placeholder:"YYYY/MM/DD"},null,8,["modelValue","class"])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",p,[Object(n["createVNode"])("div",f,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.validate.is_valid_permanently.$model=t}),type:"checkbox",class:"form-check-switch"},null,512),[[n["vModelCheckbox"],e.validate.is_valid_permanently.$model]]),m]),Object(n["createVNode"])(S,{label:"Berlaku Sampai",validationData:e.validate.valid_until},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])($,{disabled:e.validate.is_valid_permanently.$model,modelValue:e.validate.valid_until.$model,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.validate.valid_until.$model=t}),class:["form-control",{"border-theme-6":e.validate.valid_until.$error}],style:{width:"100%"},placeholder:"YYYY/MM/DD"},null,8,["disabled","modelValue","class"])]})),_:1},8,["validationData"])])]),Object(n["createVNode"])("div",v,[Object(n["createVNode"])("div",g,[Object(n["createVNode"])("div",O,[Object(n["createVNode"])(S,{label:"Dikeluarkan Oleh",validationData:e.validate.issued_by},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{id:"rekomendasiDisperindagReleasedBy",type:"text",class:["form-control w-full",{"border-theme-6":e.validate.issued_by.$error}],placeholder:"Dikeluarkan oleh","onUpdate:modelValue":t[11]||(t[11]=function(t){return e.validate.issued_by.$model=t})},null,2),[[n["vModelText"],e.validate.issued_by.$model]])]})),_:1},8,["validationData"])]),e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("div",j,[Object(n["createVNode"])(S,{label:"Status Expired"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("input",{id:"rekomendasiDisperindagExpiredStatus",type:"text",class:"form-control w-full",value:e.formData.today_date>e.formData.six_before&&!e.formData.is_valid_permanently?e.formData.today_date>e.formData.valid_date?"Expired":"Akan Expired":"Belum Expired",disabled:""},null,8,["value"])]})),_:1})])):Object(n["createCommentVNode"])("",!0)])]),Object(n["createVNode"])("div",h,[Object(n["createVNode"])("div",k,[_,Object(n["createVNode"])("input",{value:e.formData.is_active?"Active":"Not Activated",type:"text",readonly:"",class:"form-control"},null,8,["value"])]),Object(n["createVNode"])("div",D,[V,Object(n["createVNode"])("input",{value:e.formData.verification_status,type:"text",readonly:"",class:"form-control"},null,8,["value"])])])]),Object(n["createVNode"])("div",w,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-outline-secondary mr-2",onClick:t[12]||(t[12]=function(){var t;return e.dataGrid.clearSelection&&(t=e.dataGrid).clearSelection.apply(t,arguments)})}," Clear Selection ")):Object(n["createCommentVNode"])("",!0),o?(Object(n["openBlock"])(),Object(n["createBlock"])("div",y,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-primary w-24 mr-2",onClick:t[13]||(t[13]=function(){return e.save&&e.save.apply(e,arguments)})}," Save ")):(Object(n["openBlock"])(),Object(n["createBlock"])("div",x,[Object(n["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-2",onClick:t[14]||(t[14]=function(){return e.resetFormData&&e.resetFormData.apply(e,arguments)})}," Reset "),Object(n["createVNode"])("button",{type:"button",class:"btn bg-theme-9 text-white w-24",onClick:t[15]||(t[15]=function(){return e.add&&e.add.apply(e,arguments)})}," Add ")]))])):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])(T,{ref:"dataGrid",class:"m-5",allowManage:o,onSelectionChanged:e.onSelectionChanged,onOpenVerificationDialog:e.openVerificationDialog},null,8,["allowManage","onSelectionChanged","onOpenVerificationDialog"])]})),_:1},512),[[F,e.loading]]),Object(n["createVNode"])(M,{dialogVisible:e.dialogVisible,"onUpdate:dialogVisible":[t[16]||(t[16]=function(t){return e.dialogVisible=t}),t[17]||(t[17]=function(t){return e.dialogVisible=t})],"onDialog:closed":e.refreshDataGrid,dialogData:e.dialogData},null,8,["dialogVisible","onDialog:closed","dialogData"])])}a("0cfa");var N=a("5040"),B=a.n(N),S=a("15fd"),R=a("1da1"),P=a("5530"),$=(a("96cf"),a("4d90"),a("ac1f"),a("1276"),a("d3b7"),a("c45b")),T={key:0},A={key:1},M={key:0};function F(e,t,a,o,r,i){var c=Object(n["resolveComponent"])("DxColumn"),l=Object(n["resolveComponent"])("DxPaging"),d=Object(n["resolveComponent"])("DxPager"),u=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(u,{ref:"root","data-source":e.store,"show-borders":!0,"remote-operations":!0,selection:{mode:"single"},onSelectionChanged:e.onSelectionChanged,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)}),"allow-column-reordering":!0,"allow-column-resizing":!0,"column-auto-width":!0},{statusAktivasiCellTemplate:Object(n["withCtx"])((function(e){var t=e.data;return[t.data.is_active?(Object(n["openBlock"])(),Object(n["createBlock"])("span",T," Active ")):(Object(n["openBlock"])(),Object(n["createBlock"])("span",A," Non-Active "))]})),cellTemplate:Object(n["withCtx"])((function(t){var a=t.data;return[a.data.is_active?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:1,onClick:function(t){return e.deactivate(a.data.id)},class:"btn btn-sm bg-theme-6 rounded-lg text-white"}," Deactivate ",8,["onClick"])):(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,onClick:function(t){return e.activate(a.data.id)},class:"btn btn-sm bg-theme-9 rounded-lg text-white"}," Activate ",8,["onClick"]))]})),vaCellTemplate:Object(n["withCtx"])((function(t){var a=t.data;return[null==a.data.bundle_item_detail_verification.is_verified?(Object(n["openBlock"])(),Object(n["createBlock"])("div",M,[Object(n["createVNode"])("button",{onClick:function(t){return e.openVerificationDialog(a.data,!0)},class:"btn btn-sm bg-theme-9 rounded-lg text-white"}," Approved ",8,["onClick"]),Object(n["createVNode"])("button",{onClick:function(t){return e.openVerificationDialog(a.data,!1)},class:"btn btn-sm bg-theme-6 rounded-lg text-white"}," Reject ",8,["onClick"])])):Object(n["createCommentVNode"])("",!0)]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{"data-field":"document_number","data-type":"string",caption:"Nomor Dokumen"}),Object(n["createVNode"])(c,{"data-field":"document_name","data-type":"string",caption:"Nama Dokumen"}),Object(n["createVNode"])(c,{"data-field":"valid_from","data-type":"date",caption:"Berlaku Mulai"}),Object(n["createVNode"])(c,{"data-field":"valid_until","data-type":"date",caption:"Berlaku Sampai"}),Object(n["createVNode"])(c,{"data-field":"region.name","data-type":"string",caption:"Region"}),Object(n["createVNode"])(c,{"data-field":"province.province_name","data-type":"string",caption:"Propinsi"}),Object(n["createVNode"])(c,{"data-field":"city.city_name","data-type":"string",caption:"Kab/Kota"}),Object(n["createVNode"])(c,{"data-field":"bundle_item_detail_verification.is_verified","data-type":"boolean",caption:"Status Verifikasi"}),Object(n["createVNode"])(c,{"data-field":"bundle_item_detail_verification.verification_notes","data-type":"string",caption:"Catatan Verifikasi"}),Object(n["createVNode"])(c,{allowFiltering:!1,"data-field":"is_active",caption:"Status Aktivasi","data-type":"boolean","cell-template":"statusAktivasiCellTemplate"}),"distributor"==e.route.meta.role&&e.allowManage?(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:0,allowFiltering:!1,width:100,"data-field":"id",caption:"Aksi","cell-template":"cellTemplate"})):Object(n["createCommentVNode"])("",!0),"admin"==e.route.meta.role?(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:1,"data-field":"bundle_item_detail_verification",caption:"Verifikasi","cell-template":"vaCellTemplate"})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(l,{"page-size":5}),Object(n["createVNode"])(d,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20]})]})),_:1},8,["data-source","onSelectionChanged"])}a("fb6a"),a("d81d");var E=a("d30a"),U=a("2597"),G=a.n(U),q=a("c953"),I="/disperindag-recommendation",K=function(){return q["a"].get(I)},L=function(e){return q["a"].post(I,e)},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return q["a"].put(I+"/".concat(e),t)},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return q["a"].put(I+"/".concat(e,"/activate"),t)},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return q["a"].put(I+"/".concat(e,"/deactivate"),t)},J={get:K,add:L,update:Y,activate:H,deactivate:z},W=a("6c02"),X=Object(n["defineComponent"])({components:{DxDataGrid:E["DxDataGrid"],DxColumn:E["DxColumn"],DxPaging:E["DxPaging"],DxPager:E["DxPager"],DxSorting:E["DxSorting"],DxHeaderFilter:E["DxHeaderFilter"],DxFilterRow:E["DxFilterRow"]},emits:["selectionChanged","openVerificationDialog"],props:["allowManage"],setup:function(e,t){var a=this,o=t.emit,r=Object(n["ref"])(null),i=Object(W["c"])();function c(e){return void 0!==e&&null!==e&&""!==e}Object(n["onMounted"])((function(){}));var l=Object(n["inject"])("env"),d=new G.a({key:"id",load:function(e){var t="?";["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(a){a in e&&c(e[a])&&(t+="".concat(a,"=").concat(JSON.stringify(e[a]),"&"))})),t=t.slice(0,-1);var a="".concat(l["VUE_APP_API_ENDPOINT"],"/disperindag-recommendation").concat(t);return"admin"==i.meta.role&&(a="".concat(l["VUE_APP_API_ENDPOINT"],"/distributor/").concat(i.params.distributor_id,"/item-details-data/item-type/9")),q["a"].get(a).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),u=(Object(n["inject"])("updateFormData"),function(e){var t=e.selectedRowsData;o("selectionChanged",t[0])}),s=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J.activate(t).then((function(e){B.a.success({title:"Success",position:"bottom-right"}),p()})).catch((function(e){B.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J.deactivate(t).then((function(e){B.a.success({title:"Success",position:"bottom-right"}),p()})).catch((function(e){B.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){r.value.instance.refresh()},f=function(){r.value.instance.clearSelection()},m=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:p.bind(a)}})},v=Object(n["inject"])("distributorRegions"),g=Object(n["computed"])((function(){return v.value.map((function(e){return{text:e.name,value:["region_code","=",e.code]}}))})),O=function(e,t){e.recommended=t,o("openVerificationDialog",e)};return{route:i,store:d,onSelectionChanged:u,activate:s,deactivate:b,onToolbarPreparing:m,refreshDataGrid:p,clearSelection:f,root:r,availableRegions:g,openVerificationDialog:O}}}),Z=a("6b0d"),Q=a.n(Z);const ee=Q()(X,[["render",F]]);var te=ee,ae={key:0},ne={class:"grid grid-cols-3 gap-4 mb-2"},oe=Object(n["createVNode"])("label",{for:"produsen"},"Status",-1),re={key:0,class:"text-base text-theme-9"},ie={key:1,class:"text-base text-theme-6"},ce={class:"grid grid-cols-3 gap-4 mb-4"},le=Object(n["createVNode"])("label",{for:"produsen"},"Region",-1),de={class:"text-base"},ue=Object(n["createVNode"])("label",{for:"propinsi"},"Propinsi",-1),se={class:"text-base"},be=Object(n["createVNode"])("label",{for:"kabupaten"},"Kabupaten",-1),pe={class:"text-base"},fe=Object(n["createVNode"])("div",{class:"border border-b-0 mb-4"},null,-1),me={class:"grid grid-cols-1 gap-4"},ve=Object(n["createVNode"])("label",{for:"produsen"},"Notes",-1),ge={class:"dialog-footer"},Oe=Object(n["createTextVNode"])("Cancel"),je=Object(n["createTextVNode"])("Confirm");function he(e,t,a,o,r,i){var c=Object(n["resolveComponent"])("el-button"),l=Object(n["resolveComponent"])("el-dialog");return Object(n["openBlock"])(),Object(n["createBlock"])(l,{"append-to-body":"",title:"Verifikasi Butir Dokumen",modelValue:e.dialogVisible,width:"50%",onClose:e.closeDialog},{footer:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("span",ge,[Object(n["createVNode"])(c,{onClick:e.closeDialog},{default:Object(n["withCtx"])((function(){return[Oe]})),_:1},8,["onClick"]),Object(n["createVNode"])(c,{type:"primary",onClick:e.submitAllocationForm},{default:Object(n["withCtx"])((function(){return[je]})),_:1},8,["onClick"])])]})),default:Object(n["withCtx"])((function(){return[null!=e.dialogData?(Object(n["openBlock"])(),Object(n["createBlock"])("div",ae,[Object(n["createVNode"])("div",ne,[Object(n["createVNode"])("div",null,[oe,e.dialogData.recommended?(Object(n["openBlock"])(),Object(n["createBlock"])("p",re,"APPROVED")):(Object(n["openBlock"])(),Object(n["createBlock"])("p",ie,"REJECTED"))])]),Object(n["createVNode"])("div",ce,[Object(n["createVNode"])("div",null,[le,Object(n["createVNode"])("p",de,Object(n["toDisplayString"])(e.dialogData.region.name),1)]),Object(n["createVNode"])("div",null,[ue,Object(n["createVNode"])("p",se,Object(n["toDisplayString"])(e.dialogData.province.province_name),1)]),Object(n["createVNode"])("div",null,[be,Object(n["createVNode"])("p",pe,Object(n["toDisplayString"])(e.dialogData.city.city_type)+" "+Object(n["toDisplayString"])(e.dialogData.city.city_name),1)])]),fe,Object(n["createVNode"])("div",me,[Object(n["createVNode"])("div",null,[ve,Object(n["withDirectives"])(Object(n["createVNode"])("textarea",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.dialogFormData.notes=t}),class:"form-control mt-2"},null,512),[[n["vModelText"],e.dialogFormData.notes]])])])])):Object(n["createCommentVNode"])("",!0)]})),_:1},8,["modelValue","onClose"])}var ke=a("8afd"),_e=a("2611"),De=a("83b3"),Ve=Object(ke["c"])({props:{value:String,dialogVisible:{type:Boolean},dialogData:{required:!0}},emits:["update:dialogVisible","dialog:closed"],setup:function(e,t){var a=t.emit,n=Object(ke["o"])({notes:""}),o=Object(_e["a"])(),r=function(){var t=Object(R["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:o.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(R["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,De["a"].verify(e.dialogData.bundle_item_detail_id,{recommended:e.dialogData.recommended,notes:n.notes}).then((function(e){}));case 2:i(),a("dialog:closed");case 4:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i=function(){n.notes="",a("update:dialogVisible",!1)};return{dialogFormData:n,submitAllocationForm:r,closeDialog:i}}});const we=Q()(Ve,[["render",he]]);var ye=we,xe={id:null,document_number:null,document_name:null,file_path:null,issued_by:null,valid_from:null,valid_until:null,verification_status:null,is_active:null,region_code:null,province_id:null,city_id:null,today_date:null,six_before:null,valid_date:null,is_valid_permanently:!1},Ce=a("25a0"),Ne=a("e3e1"),Be=a("2022"),Se=a("5502"),Re=a("b405"),Pe=["id"],$e=["id"],Te=Object(n["defineComponent"])({components:{DocumentForm:$["a"],FormItem:Be["a"],DataGrid:te,VerificationDialog:ye},setup:function(){var e=Object(Se["d"])(),t=e.state.auth.user,a=Object(n["ref"])(!1),o=Object(n["ref"])(!1),r=Object(_e["a"])(),i=Object(n["ref"])(null),c=Object(n["ref"])(null),l=Object(n["inject"])("env"),d=Object(n["reactive"])(Object(P["a"])({},xe)),u={document_number:{required:Ne["c"]},document_name:{required:Ne["c"]},file_path:{required:Ne["c"]},issued_by:{required:Ne["c"]},valid_from:{required:Ne["c"]},valid_until:{},region_code:{required:Ne["c"]},province_id:{required:Ne["c"]},city_id:{required:Ne["c"]},is_valid_permanently:{}},s=Object(Ce["a"])(u,Object(n["toRefs"])(d)),b=function(){for(var e in xe)d[e]=xe[e];s.value.$reset()},p=function(e){var t=new Date,a=t.getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0");if(e.today_date=new Date(a).setHours(0,0,0,0),null!=e.valid_until){var o=e.valid_until,r=new Date(("string"===typeof o?new Date(o):o).toLocaleString("en-US",{timeZone:"Asia/Jakarta"})),i=r.getFullYear()+"-"+String(r.getMonth()+1).padStart(2,"0")+"-"+String(r.getDate()).padStart(2,"0"),c=i.split("-"),l=parseInt(c[1])<=6?parseInt(c[0])-1:parseInt(c[0]),u=parseInt(c[1])-6<=0?parseInt(c[1])-6+12:parseInt(c[1])-6,s=l+"-"+u+"-"+c[2];e.six_before=new Date(s).setHours(0,0,0,0),e.valid_date=new Date(i).setHours(0,0,0,0)}var b=Object(n["toRefs"])(d);for(var p in xe)Object.hasOwnProperty.call(e,p)&&(b[p].value=e[p])},f=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!=t?(p(t),a.value=!0):(b(),a.value=!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.value.$touch(),s.value.$invalid?B.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):r.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(R["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return d.id,a=Object(S["a"])(d,Pe),a.distributor_id=t.distributor.id,o.value=!0,e.next=5,J.update(d.id,a).then((function(e){B.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),i.value.refreshDataGrid(),i.value.clearSelection(),b()})).catch((function(e){B.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){o.value=!1}));case 5:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.value.$touch(),s.value.$invalid?B.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):r.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(R["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return d.id,a=Object(S["a"])(d,$e),a.distributor_id=t.distributor.id,o.value=!0,e.next=5,J.add(a).then((function(e){B.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),c.value.clearFiles(),i.value.refreshDataGrid(),i.value.clearSelection(),b()})).catch((function(e){B.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){o.value=!1}));case 5:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(e,t,a){d.file_path=e.id},O=function(e){var t=window.open(l["VUE_APP_API_ENDPOINT"]+"/files?filePath="+e.url,"_blank");t.focus()};function j(e){e&&(V(e.region_code),w(e.region_code,e.province_id)),f(e)}Object(n["provide"])("updateFormData",f);var h=Object(Re["a"])(t,d),k=h.distributorRegions,_=h.distributorProvinces,D=h.distributorCities,V=h.onRegionChanged,w=h.onProvinceChanged;Object(n["provide"])("distributorRegions",k);var y=Object(n["ref"])(!1),x=Object(n["ref"])(null),C=Object(n["reactive"])({notes:""}),N=function(e){y.value=!0,x.value=e},$=function(){i.value.refreshDataGrid()};return{env:l,formData:d,validate:s,dataGrid:i,updateMode:a,loading:o,save:m,add:v,resetFormData:b,onUploadSuccees:g,elUpload:c,handlePreview:O,distributorRegions:k,distributorProvinces:_,distributorCities:D,onRegionChanged:V,onProvinceChanged:w,onSelectionChanged:j,dialogVisible:y,dialogData:x,dialogFormData:C,openVerificationDialog:N,refreshDataGrid:$}}});const Ae=Q()(Te,[["render",C]]);var Me=Ae,Fe=Object(n["defineComponent"])({components:{RekomendasiDinas:Me},methods:{scrollToAnchor:function(){var e=this;this.$nextTick((function(){if(e.$route.hash){var t=document.querySelector(e.$route.hash);t&&window.scrollTo(0,t.offsetTop)}}))}},mounted:function(){this.scrollToAnchor()},updated:function(){this.scrollToAnchor()},watch:{$route:function(e,t){this.scrollToAnchor()}}});const Ee=Q()(Fe,[["render",r]]);t["default"]=Ee},"83b3":function(e,t,a){"use strict";var n=a("5530"),o=a("c953"),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return o["a"].post("bundle-item-details/".concat(e,"/verify"),Object(n["a"])({},t))};t["a"]={verify:r}},"9a0c":function(e,t,a){var n=a("342f");e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(n)},b405:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a("1da1"),o=(a("96cf"),a("8afd")),r=a("6eb3"),i=a("6c02");function c(e,t){var a=Object(o["p"])([]),c=Object(o["p"])([]),l=Object(o["p"])([]),d=Object(i["c"])(),u="";function s(e){return b.apply(this,arguments)}function b(){return b=Object(n["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.province_id=null,t.city_id=null,!a){e.next=5;break}return e.next=5,r["a"].getProposedProvinces(u,a).then((function(e){c.value=e.data.data}));case 5:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function p(e,t){return f.apply(this,arguments)}function f(){return f=Object(n["a"])(regeneratorRuntime.mark((function e(a,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.city_id=null,!a||!n){e.next=4;break}return e.next=4,r["a"].getProposedCities(u,a,n).then((function(e){l.value=e.data.data}));case 4:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function m(){return v.apply(this,arguments)}function v(){return v=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].getProposedRegions(u).then((function(e){a.value=e.data.data}));case 2:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}return Object(o["m"])(Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return u="admin"!=d.meta.role?e.distributor.id:d.params.distributor_id,t.next=3,m();case 3:case"end":return t.stop()}}),t)})))),{distributorRegions:a,distributorProvinces:c,distributorCities:l,onRegionChanged:s,onProvinceChanged:p,getProposedRegions:m}}},d81d:function(e,t,a){"use strict";var n=a("23e7"),o=a("b727").map,r=a("1dde"),i=r("map");n({target:"Array",proto:!0,forced:!i},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);