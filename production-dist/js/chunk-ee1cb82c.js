(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ee1cb82c"],{"15fd":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("a4d3"),a("b64b");function n(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}function r(e,t){if(null==e)return{};var a,r,o=n(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}},2165:function(e,t,a){"use strict";a("e9f6")},2611:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("8afd");function r(){return{$show:Object(n["e"])("$messageBox"),$prompt:Object(n["e"])("$prompt"),$alert:Object(n["e"])("$alert"),$confirm:Object(n["e"])("$confirm")}}},"29d9":function(e,t,a){"use strict";a("8c81")},"8c81":function(e,t,a){},a7ec:function(e,t,a){"use strict";a("dd67")},dd67:function(e,t,a){},e9f6:function(e,t,a){},f288:function(e,t,a){"use strict";a.r(t);var n=a("7a23"),r={class:"grid grid-cols-12 gap-6"};function o(e,t,a,o,i,c){var l=Object(n["resolveComponent"])("SPKP"),u=Object(n["resolveComponent"])("SPT");return Object(n["openBlock"])(),Object(n["createBlock"])("div",null,[Object(n["createVNode"])("div",r,[Object(n["createVNode"])(l),Object(n["createVNode"])(u)])])}var i=a("c45b"),c={class:"intro-y col-span-12 lg:col-span-12"},l={class:"p-5"},u={class:""},s={class:"sm:grid grid-cols-2 gap-2"},d={class:""},b={class:""},p={class:"mt-3"},f={class:"sm:grid grid-cols-2 gap-2"},m={class:""},v=Object(n["createTextVNode"])("Click to upload"),O={class:"mt-4 grid grid-cols-2 gap-5 pb-5 border-b"},j={class:"intro-y input-form"},h=Object(n["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"},"Status",-1),g={class:"intro-y input-form"},k=Object(n["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"},"Status Verifikasi ",-1),w={class:"flex w-full pt-5"},_={key:1,class:"ml-auto"},D={key:1};function x(e,t,a,r,o,i){var x=Object(n["resolveComponent"])("form-item"),y=Object(n["resolveComponent"])("el-date-picker"),N=Object(n["resolveComponent"])("el-button"),V=Object(n["resolveComponent"])("el-upload"),C=Object(n["resolveComponent"])("DataGrid"),S=Object(n["resolveComponent"])("document-form"),P=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createBlock"])("div",c,[Object(n["withDirectives"])(Object(n["createVNode"])(S,{title:"SPKP",itemType:20},{default:Object(n["withCtx"])((function(a){var r=a.allowManage;return[Object(n["createVNode"])("div",l,[Object(n["createVNode"])("div",u,[Object(n["createVNode"])("div",s,[Object(n["createVNode"])("div",d,[Object(n["createVNode"])(x,{label:"Dikeluarkan Oleh","rules-text":"Required",validationData:e.validate.issued_by},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{placeholder:"Dikeluarkan Oleh",class:["form-control",{"border-theme-6":e.validate.issued_by.$error}],"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.validate.issued_by.$model=t})},null,2),[[n["vModelText"],e.validate.issued_by.$model]])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",b,[Object(n["createVNode"])(x,{label:"Nomor Dokumen","rules-text":"Required",validationData:e.validate.document_number},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{placeholder:"Nomor Dokumen",class:["form-control",{"border-theme-6":e.validate.document_number.$error}],"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.validate.document_number.$model=t})},null,2),[[n["vModelText"],e.validate.document_number.$model]])]})),_:1},8,["validationData"])])])]),Object(n["createVNode"])("div",p,[Object(n["createVNode"])("div",f,[Object(n["createVNode"])("div",m,[Object(n["createVNode"])(x,{label:"Berlaku Sejak","rules-text":"Required",validationData:e.validate.valid_from},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(y,{modelValue:e.validate.valid_from.$model,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.validate.valid_from.$model=t}),class:{"border-theme-6":e.validate.valid_from.$error},type:"date",placeholder:"Pick a day",format:"YYYY-MM-DD"},null,8,["modelValue","class"])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",null,[Object(n["createVNode"])(x,{label:"File SPKP","rules-text":"Required",validationData:e.validate.spkp_file,class:"intro-y"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(V,{ref:"elUpload",class:"upload-demo form-control",action:e.env["VUE_APP_API_ENDPOINT"]+"/files",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},"on-success":e.onUploadSuccees,"with-credentials":!0,"file-list":null!=e.formData.spkp_file?[{name:"file-spkp",url:e.formData.spkp_file}]:[],"on-preview":e.handlePreview},{tip:Object(n["withCtx"])((function(){return[]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(N,{size:"small",type:"primary"},{default:Object(n["withCtx"])((function(){return[v]})),_:1})]})),_:1},8,["action","on-success","file-list","on-preview"])]})),_:1},8,["validationData"])])])]),Object(n["createVNode"])("div",O,[Object(n["createVNode"])("div",j,[h,Object(n["createVNode"])("input",{value:e.formData.is_active?"Active":"Not Activated",type:"text",readonly:"",class:"form-control"},null,8,["value"])]),Object(n["createVNode"])("div",g,[k,Object(n["createVNode"])("input",{value:e.formData.verification_status,type:"text",readonly:"",class:"form-control"},null,8,["value"])])]),Object(n["createVNode"])("div",w,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-outline-secondary mr-2",onClick:t[4]||(t[4]=function(){var t;return e.dataGrid.clearSelection&&(t=e.dataGrid).clearSelection.apply(t,arguments)})}," Clear Selection ")):Object(n["createCommentVNode"])("",!0),r?(Object(n["openBlock"])(),Object(n["createBlock"])("div",_,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-primary w-24 mr-2",onClick:t[5]||(t[5]=function(){return e.save&&e.save.apply(e,arguments)})}," Save ")):(Object(n["openBlock"])(),Object(n["createBlock"])("div",D,[Object(n["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-2",onClick:t[6]||(t[6]=function(){return e.resetFormData&&e.resetFormData.apply(e,arguments)})}," Reset "),Object(n["createVNode"])("button",{type:"button",class:"btn bg-theme-9 text-white w-24",onClick:t[7]||(t[7]=function(){return e.add&&e.add.apply(e,arguments)})}," Add ")]))])):Object(n["createCommentVNode"])("",!0)])]),Object(n["createVNode"])(C,{ref:"dataGrid",class:"m-5",allowManage:r},null,8,["allowManage"])]})),_:1},512),[[P,e.loading]])])}a("0cfa");var y=a("5040"),N=a.n(y),V=a("15fd"),C=a("1da1"),S=a("5530"),P=(a("d3b7"),a("96cf"),{key:0}),B={key:1};function R(e,t,a,r,o,i){var c=Object(n["resolveComponent"])("DxColumn"),l=Object(n["resolveComponent"])("DxPaging"),u=Object(n["resolveComponent"])("DxPager"),s=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(s,{ref:"root","data-source":e.store,"show-borders":!0,"remote-operations":!0,selection:{mode:"single"},onSelectionChanged:e.onSelectionChanged,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)})},{statusAktivasiCellTemplate:Object(n["withCtx"])((function(e){var t=e.data;return[t.data.is_active?(Object(n["openBlock"])(),Object(n["createBlock"])("span",P," Active ")):(Object(n["openBlock"])(),Object(n["createBlock"])("span",B," Non-Active "))]})),cellTemplate:Object(n["withCtx"])((function(t){var a=t.data;return[a.data.is_active?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:1,onClick:function(t){return e.deactivate(a.data.id)},class:"btn btn-sm bg-theme-6 rounded-lg text-white"}," Deactivate ",8,["onClick"])):(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,onClick:function(t){return e.activate(a.data.id)},class:"btn btn-sm bg-theme-9 rounded-lg text-white"}," Activate ",8,["onClick"]))]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{"data-field":"document_number","data-type":"string",caption:"Nomor Dokumen"}),Object(n["createVNode"])(c,{"data-field":"issued_by","data-type":"string",caption:"Dikeluarkan Oleh"}),Object(n["createVNode"])(c,{"data-field":"valid_from","data-type":"string",caption:"Berlaku Sejak"}),Object(n["createVNode"])(c,{allowFiltering:!1,"data-field":"is_active",caption:"Status Aktivasi","data-type":"boolean","cell-template":"statusAktivasiCellTemplate"}),"distributor"==e.route.meta.role&&e.allowManage?(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:0,allowFiltering:!1,width:100,"data-field":"id",caption:"Aksi","cell-template":"cellTemplate"})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(l,{"page-size":5}),Object(n["createVNode"])(u,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20]})]})),_:1},8,["data-source","onSelectionChanged"])}a("99af"),a("fb6a");var T=a("d30a"),$=a("2597"),F=a.n($),A=a("c953"),G="/taxes/",M=function(){return A["a"].get(G+"spkp")},q=function(e){return A["a"].post(G+"spkp",e)},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return A["a"].put(G+"spkp/".concat(e),t)},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return A["a"].put(G+"spkp/".concat(e,"/activate"),t)},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return A["a"].put(G+"spkp/".concat(e,"/deactivate"),t)},Y=function(){return A["a"].get(G+"skf")},K=function(e){return A["a"].post(G+"skf",e)},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return A["a"].put(G+"skf/".concat(e),t)},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return A["a"].put(G+"skf/".concat(e,"/activate"),t)},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return A["a"].put(G+"skf/".concat(e,"/deactivate"),t)},X=function(){return A["a"].get(G+"spt")},J=function(e){return A["a"].post(G+"spt",e)},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return A["a"].put(G+"spt/".concat(e),t)},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return A["a"].put(G+"spt/".concat(e,"/activate"),t)},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return A["a"].put(G+"spt/".concat(e,"/deactivate"),t)},ee={get_spkp:M,add_spkp:q,update_spkp:U,activate_spkp:E,deactivate_spkp:I,get_skf:Y,add_skf:K,update_skf:z,activate_skf:L,deactivate_skf:H,get_spt:X,add_spt:J,update_spt:W,activate_spt:Q,deactivate_spt:Z},te=a("6c02"),ae=Object(n["defineComponent"])({components:{DxDataGrid:T["DxDataGrid"],DxColumn:T["DxColumn"],DxPaging:T["DxPaging"],DxPager:T["DxPager"],DxSorting:T["DxSorting"],DxHeaderFilter:T["DxHeaderFilter"],DxFilterRow:T["DxFilterRow"]},props:["allowManage"],setup:function(e,t){var a=this,r=(t.emit,Object(n["ref"])(null)),o=Object(te["c"])();function i(e){return void 0!==e&&null!==e&&""!==e}Object(n["onMounted"])((function(){}));var c=Object(n["inject"])("env"),l=new F.a({key:"id",load:function(e){var t="?";["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(a){a in e&&i(e[a])&&(t+="".concat(a,"=").concat(JSON.stringify(e[a]),"&"))})),t=t.slice(0,-1);var a="".concat(c["VUE_APP_API_ENDPOINT"],"/taxes/spkp").concat(t);return"admin"==o.meta.role&&(a="".concat(c["VUE_APP_API_ENDPOINT"],"/distributor/").concat(o.params.distributor_id,"/item-details-data/item-type/20")),A["a"].get(a).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),u=Object(n["inject"])("updateFormData"),s=function(e){var t=e.selectedRowsData;u(t[0])},d=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ee.activate_spkp(t).then((function(e){N.a.success({title:"Success",position:"bottom-right"}),p()})).catch((function(e){N.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ee.deactivate_spkp(t).then((function(e){N.a.success({title:"Success",position:"bottom-right"}),p()})).catch((function(e){N.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){r.value.instance.refresh()},f=function(){r.value.instance.clearSelection()},m=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:p.bind(a)}})};return{store:l,onSelectionChanged:s,activate:d,deactivate:b,onToolbarPreparing:m,refreshDataGrid:p,clearSelection:f,root:r,route:o}}}),ne=a("6b0d"),re=a.n(ne);const oe=re()(ae,[["render",R]]);var ie=oe,ce={id:null,issued_by:null,document_number:null,valid_from:null,valid_until:null,spkp_file:null,verification_status:null,is_active:!0},le=a("25a0"),ue=a("e3e1"),se=a("2022"),de=a("5502"),be=a("2611"),pe=(a("af50"),["id"]),fe=["id"],me=Object(n["defineComponent"])({components:{DocumentForm:i["a"],DataGrid:ie,FormItem:se["a"]},setup:function(){Object(te["c"])();var e=Object(de["d"])(),t=e.state.auth.user,a=Object(be["a"])(),r=Object(n["ref"])(!1),o=Object(n["ref"])(!1),i=Object(n["ref"])(null),c=Object(n["ref"])(null),l=Object(n["inject"])("env"),u=Object(n["reactive"])(Object(S["a"])({},ce)),s={issued_by:{required:ue["c"]},document_number:{required:ue["c"]},valid_from:{required:ue["c"]},spkp_file:{required:ue["c"]}},d=Object(le["a"])(s,Object(n["toRefs"])(u)),b=function(){var e=Object(n["toRefs"])(u);for(var t in ce)e[t].value=ce[t];d.value.$reset()},p=function(e){var t=Object(n["toRefs"])(u);for(var a in ce)Object.hasOwnProperty.call(e,a)&&(t[a].value=e[a])},f=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!=t?(p(t),r.value=!0):(b(),r.value=!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:d.value.$touch(),d.value.$invalid?N.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):a.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(C["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.id,a=Object(V["a"])(u,pe),a.distributor_id=t.distributor.id,o.value=!0,e.next=5,ee.update_spkp(u.id,a).then((function(e){N.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),c.value.clearFiles(),i.value.refreshDataGrid(),b()})).catch((function(e){N.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){o.value=!1}));case 5:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:d.value.$touch(),d.value.$invalid?N.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):a.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(C["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.id,a=Object(V["a"])(u,fe),a.distributor_id=t.distributor.id,o.value=!0,e.next=5,ee.add_spkp(a).then((function(e){N.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),c.value.clearFiles(),i.value.refreshDataGrid(),b()})).catch((function(e){N.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){o.value=!1}));case 5:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(e,t,a){u.spkp_file=e.id},j=function(e){var t=window.open(l["VUE_APP_API_ENDPOINT"]+"/files?filePath="+e.url,"_blank");t.focus()};return Object(n["provide"])("updateFormData",f),{env:l,formData:u,validate:d,dataGrid:i,updateMode:r,loading:o,save:m,add:v,resetFormData:b,onUploadSuccees:O,elUpload:c,handlePreview:j}}});a("2165");const ve=re()(me,[["render",x]]);var Oe=ve,je={class:"intro-y col-span-12 lg:col-span-12"},he={class:"p-5"},ge={class:""},ke={class:"sm:grid grid-cols-2 gap-2"},we={class:""},_e={class:""},De={class:"mt-3"},xe={class:"mt-3"},ye=Object(n["createTextVNode"])("Click to upload"),Ne={class:"mt-4 grid grid-cols-2 gap-5 pb-5 border-b"},Ve={class:"intro-y input-form"},Ce=Object(n["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"},"Status",-1),Se={class:"intro-y input-form"},Pe=Object(n["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"},"Status Verifikasi ",-1),Be={class:"flex w-full pt-5"},Re={key:1,class:"ml-auto"},Te={key:1};function $e(e,t,a,r,o,i){var c=Object(n["resolveComponent"])("form-item"),l=Object(n["resolveComponent"])("el-date-picker"),u=Object(n["resolveComponent"])("el-button"),s=Object(n["resolveComponent"])("el-upload"),d=Object(n["resolveComponent"])("DataGrid"),b=Object(n["resolveComponent"])("document-form"),p=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createBlock"])("div",je,[Object(n["withDirectives"])(Object(n["createVNode"])(b,{title:"SPT Tahunan",itemType:21},{default:Object(n["withCtx"])((function(a){var r=a.allowManage;return[Object(n["createVNode"])("div",he,[Object(n["createVNode"])("div",ge,[Object(n["createVNode"])("div",ke,[Object(n["createVNode"])("div",we,[Object(n["createVNode"])(c,{label:"Dikeluarkan Oleh","rules-text":"Required",validationData:e.validate.issued_by},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{placeholder:"Dikeluarkan Oleh",class:["form-control",{"border-theme-6":e.validate.issued_by.$error}],"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.validate.issued_by.$model=t})},null,2),[[n["vModelText"],e.validate.issued_by.$model]])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",_e,[Object(n["createVNode"])(c,{label:"Nomor Dokumen","rules-text":"Required",validationData:e.validate.document_number},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{placeholder:"Nomor Dokumen",class:["form-control",{"border-theme-6":e.validate.document_number.$error}],"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.validate.document_number.$model=t})},null,2),[[n["vModelText"],e.validate.document_number.$model]])]})),_:1},8,["validationData"])])])]),Object(n["createVNode"])("div",De,[Object(n["createVNode"])(c,{label:"Berlaku Sejak","rules-text":"Required",validationData:e.validate.valid_from},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{modelValue:e.validate.valid_from.$model,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.validate.valid_from.$model=t}),class:{"border-theme-6":e.validate.valid_from.$error},type:"date",placeholder:"Pick a day",format:"YYYY-MM-DD"},null,8,["modelValue","class"])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",xe,[Object(n["createVNode"])(c,{label:"File SPT","rules-text":"Required",validationData:e.validate.spt_file,class:"intro-y"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(s,{ref:"elUpload",class:"upload-demo form-control",action:e.env["VUE_APP_API_ENDPOINT"]+"/files",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},"on-success":e.onUploadSuccees,"with-credentials":!0,"file-list":null!=e.formData.spt_file?[{name:"file-spt-tahunan",url:e.formData.spt_file}]:[],"on-preview":e.handlePreview},{tip:Object(n["withCtx"])((function(){return[]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(u,{size:"small",type:"primary"},{default:Object(n["withCtx"])((function(){return[ye]})),_:1})]})),_:1},8,["action","on-success","file-list","on-preview"])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",Ne,[Object(n["createVNode"])("div",Ve,[Ce,Object(n["createVNode"])("input",{value:e.formData.is_active?"Active":"Not Activated",type:"text",readonly:"",class:"form-control"},null,8,["value"])]),Object(n["createVNode"])("div",Se,[Pe,Object(n["createVNode"])("input",{value:e.formData.verification_status,type:"text",readonly:"",class:"form-control"},null,8,["value"])])]),Object(n["createVNode"])("div",Be,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-outline-secondary mr-2",onClick:t[4]||(t[4]=function(){var t;return e.dataGrid.clearSelection&&(t=e.dataGrid).clearSelection.apply(t,arguments)})}," Clear Selection ")):Object(n["createCommentVNode"])("",!0),r?(Object(n["openBlock"])(),Object(n["createBlock"])("div",Re,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-primary w-24 mr-2",onClick:t[5]||(t[5]=function(){return e.save&&e.save.apply(e,arguments)})}," Save ")):(Object(n["openBlock"])(),Object(n["createBlock"])("div",Te,[Object(n["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-2",onClick:t[6]||(t[6]=function(){return e.resetFormData&&e.resetFormData.apply(e,arguments)})}," Reset "),Object(n["createVNode"])("button",{type:"button",class:"btn bg-theme-9 text-white w-24",onClick:t[7]||(t[7]=function(){return e.add&&e.add.apply(e,arguments)})}," Add ")]))])):Object(n["createCommentVNode"])("",!0)])]),Object(n["createVNode"])(d,{ref:"dataGrid",class:"m-5",allowManage:r},null,8,["allowManage"])]})),_:1},512),[[p,e.loading]])])}var Fe={key:0},Ae={key:1};function Ge(e,t,a,r,o,i){var c=Object(n["resolveComponent"])("DxColumn"),l=Object(n["resolveComponent"])("DxPaging"),u=Object(n["resolveComponent"])("DxPager"),s=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(s,{ref:"root","data-source":e.store,"show-borders":!0,"remote-operations":!0,selection:{mode:"single"},onSelectionChanged:e.onSelectionChanged,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)})},{statusAktivasiCellTemplate:Object(n["withCtx"])((function(e){var t=e.data;return[t.data.is_active?(Object(n["openBlock"])(),Object(n["createBlock"])("span",Fe," Active ")):(Object(n["openBlock"])(),Object(n["createBlock"])("span",Ae," Non-Active "))]})),cellTemplate:Object(n["withCtx"])((function(t){var a=t.data;return[a.data.is_active?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:1,onClick:function(t){return e.deactivate(a.data.id)},class:"btn btn-sm bg-theme-6 rounded-lg text-white"}," Deactivate ",8,["onClick"])):(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,onClick:function(t){return e.activate(a.data.id)},class:"btn btn-sm bg-theme-9 rounded-lg text-white"}," Activate ",8,["onClick"]))]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{"data-field":"document_number","data-type":"string",caption:"Nomor Dokumen"}),Object(n["createVNode"])(c,{"data-field":"issued_by","data-type":"string",caption:"Dikeluarkan Oleh"}),Object(n["createVNode"])(c,{"data-field":"valid_from","data-type":"string",caption:"Berlaku Sejak"}),Object(n["createVNode"])(c,{allowFiltering:!1,"data-field":"is_active",caption:"Status Aktivasi","data-type":"boolean","cell-template":"statusAktivasiCellTemplate"}),"distributor"==e.route.meta.role&&e.allowManage?(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:0,allowFiltering:!1,width:100,"data-field":"id",caption:"Aksi","cell-template":"cellTemplate"})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(l,{"page-size":5}),Object(n["createVNode"])(u,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20]})]})),_:1},8,["data-source","onSelectionChanged"])}var Me=Object(n["defineComponent"])({components:{DxDataGrid:T["DxDataGrid"],DxColumn:T["DxColumn"],DxPaging:T["DxPaging"],DxPager:T["DxPager"],DxSorting:T["DxSorting"],DxHeaderFilter:T["DxHeaderFilter"],DxFilterRow:T["DxFilterRow"]},props:["allowManage"],setup:function(e,t){var a=this,r=(t.emit,Object(n["ref"])(null)),o=Object(te["c"])();function i(e){return void 0!==e&&null!==e&&""!==e}Object(n["onMounted"])((function(){}));var c=Object(n["inject"])("env"),l=new F.a({key:"id",load:function(e){var t="?";["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(a){a in e&&i(e[a])&&(t+="".concat(a,"=").concat(JSON.stringify(e[a]),"&"))})),t=t.slice(0,-1);var a="".concat(c["VUE_APP_API_ENDPOINT"],"/taxes/spt").concat(t);return"admin"==o.meta.role&&(a="".concat(c["VUE_APP_API_ENDPOINT"],"/distributor/").concat(o.params.distributor_id,"/item-details-data/item-type/21")),A["a"].get(a).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),u=Object(n["inject"])("updateFormData"),s=function(e){var t=e.selectedRowsData;u(t[0])},d=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ee.activate_spt(t).then((function(e){N.a.success({title:"Success",position:"bottom-right"}),p()})).catch((function(e){N.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ee.deactivate_spt(t).then((function(e){N.a.success({title:"Success",position:"bottom-right"}),p()})).catch((function(e){N.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){r.value.instance.refresh()},f=function(){r.value.instance.clearSelection()},m=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:p.bind(a)}})};return{store:l,onSelectionChanged:s,activate:d,deactivate:b,onToolbarPreparing:m,refreshDataGrid:p,clearSelection:f,root:r,route:o}}});const qe=re()(Me,[["render",Ge]]);var Ue=qe,Ee={id:null,issued_by:null,document_number:null,valid_from:null,spt_file:null,verification_status:null,is_active:!0},Ie=["id"],Ye=["id"],Ke=Object(n["defineComponent"])({components:{DocumentForm:i["a"],DataGrid:Ue,FormItem:se["a"]},setup:function(){Object(te["c"])();var e=Object(de["d"])(),t=e.state.auth.user,a=Object(be["a"])(),r=Object(n["ref"])(!1),o=Object(n["ref"])(!1),i=Object(n["ref"])(null),c=Object(n["ref"])(null),l=Object(n["inject"])("env"),u=Object(n["reactive"])(Object(S["a"])({},Ee)),s={issued_by:{required:ue["c"]},document_number:{required:ue["c"]},valid_from:{required:ue["c"]},spt_file:{required:ue["c"]}},d=Object(le["a"])(s,Object(n["toRefs"])(u)),b=function(){var e=Object(n["toRefs"])(u);for(var t in Ee)e[t].value=Ee[t];d.value.$reset()},p=function(e){var t=Object(n["toRefs"])(u);for(var a in Ee)Object.hasOwnProperty.call(e,a)&&(t[a].value=e[a])},f=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!=t?(p(t),r.value=!0):(b(),r.value=!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:d.value.$touch(),d.value.$invalid?N.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):a.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(C["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.id,a=Object(V["a"])(u,Ie),a.distributor_id=t.distributor.id,o.value=!0,e.next=5,ee.update_spt(u.id,a).then((function(e){N.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),c.value.clearFiles(),i.value.refreshDataGrid(),b()})).catch((function(e){N.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){o.value=!1}));case 5:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:d.value.$touch(),d.value.$invalid?N.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):a.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(C["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.id,a=Object(V["a"])(u,Ye),a.distributor_id=t.distributor.id,o.value=!0,e.next=5,ee.add_spt(a).then((function(e){N.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),c.value.clearFiles(),i.value.refreshDataGrid(),b()})).catch((function(e){N.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){o.value=!1}));case 5:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(e,t,a){u.spt_file=e.id},j=function(e){var t=window.open(l["VUE_APP_API_ENDPOINT"]+"/files?filePath="+e.url,"_blank");t.focus()};return Object(n["provide"])("updateFormData",f),{env:l,formData:u,validate:d,dataGrid:i,updateMode:r,loading:o,save:m,add:v,resetFormData:b,onUploadSuccees:O,elUpload:c,handlePreview:j}}});a("a7ec");const ze=re()(Ke,[["render",$e]]);var Le=ze,He={class:"intro-y col-span-12 lg:col-span-12"},Xe={class:"p-5"},Je={class:""},We={class:"sm:grid grid-cols-2 gap-2"},Qe={class:""},Ze={class:""},et={class:"mt-3"},tt={class:"sm:grid grid-cols-2 gap-2"},at={class:""},nt={class:""},rt={class:"mt-3"},ot=Object(n["createTextVNode"])("Click to upload"),it={class:"mt-4 grid grid-cols-2 gap-5 pb-5 border-b"},ct={class:"intro-y input-form"},lt=Object(n["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"},"Status",-1),ut={class:"intro-y input-form"},st=Object(n["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"},"Status Verifikasi ",-1),dt={class:"flex w-full pt-5"},bt={class:"ml-auto"},pt={key:1};function ft(e,t,a,r,o,i){var c=Object(n["resolveComponent"])("form-item"),l=Object(n["resolveComponent"])("el-date-picker"),u=Object(n["resolveComponent"])("el-button"),s=Object(n["resolveComponent"])("el-upload"),d=Object(n["resolveComponent"])("DataGrid"),b=Object(n["resolveComponent"])("document-form");return Object(n["openBlock"])(),Object(n["createBlock"])("div",He,[Object(n["createVNode"])(b,{title:"Surat Keterangan Fiskal"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])("div",Xe,[Object(n["createVNode"])("div",Je,[Object(n["createVNode"])("div",We,[Object(n["createVNode"])("div",Qe,[Object(n["createVNode"])(c,{label:"Dikeluarkan Oleh","rules-text":"Required",validationData:e.validate.issued_by},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{placeholder:"Dikeluarkan Oleh",class:["form-control",{"border-theme-6":e.validate.issued_by.$error}],"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.validate.issued_by.$model=t})},null,2),[[n["vModelText"],e.validate.issued_by.$model]])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",Ze,[Object(n["createVNode"])(c,{label:"Nomor Dokumen","rules-text":"Required",validationData:e.validate.document_number},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{placeholder:"Nomor Dokumen",class:["form-control",{"border-theme-6":e.validate.document_number.$error}],"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.validate.document_number.$model=t})},null,2),[[n["vModelText"],e.validate.document_number.$model]])]})),_:1},8,["validationData"])])])]),Object(n["createVNode"])("div",et,[Object(n["createVNode"])("div",tt,[Object(n["createVNode"])("div",at,[Object(n["createVNode"])(c,{label:"Berlaku Sejak","rules-text":"Required",validationData:e.validate.valid_from},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{modelValue:e.validate.valid_from.$model,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.validate.valid_from.$model=t}),class:{"border-theme-6":e.validate.valid_from.$error},type:"date",placeholder:"Pick a day",format:"YYYY-MM-DD"},null,8,["modelValue","class"])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",nt,[Object(n["createVNode"])(c,{label:"Berlaku Sampai","rules-text":"Required",validationData:e.validate.valid_until},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{modelValue:e.validate.valid_until.$model,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.validate.valid_until.$model=t}),class:{"border-theme-6":e.validate.valid_until.$error},type:"date",placeholder:"Pick a day",format:"YYYY-MM-DD"},null,8,["modelValue","class"])]})),_:1},8,["validationData"])])])]),Object(n["createVNode"])("div",rt,[Object(n["createVNode"])(c,{label:"File Surat Keterangan Fiskal","rules-text":"Required",validationData:e.validate.skf_file,class:"intro-y"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(s,{ref:"elUpload",class:"upload-demo form-control",action:e.env["VUE_APP_API_ENDPOINT"]+"/files",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},"on-success":e.onUploadSuccees,"with-credentials":!0,"file-list":null!=e.formData.skf_file?[{name:"file-surat-keterangan-fiskal",url:e.formData.skf_file}]:[],"on-preview":e.handlePreview},{tip:Object(n["withCtx"])((function(){return[]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(u,{size:"small",type:"primary"},{default:Object(n["withCtx"])((function(){return[ot]})),_:1})]})),_:1},8,["action","on-success","file-list","on-preview"])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",it,[Object(n["createVNode"])("div",ct,[lt,Object(n["createVNode"])("input",{value:e.formData.is_active?"Active":"Not Activated",type:"text",readonly:"",class:"form-control"},null,8,["value"])]),Object(n["createVNode"])("div",ut,[st,Object(n["createVNode"])("input",{value:e.formData.verification_status,type:"text",readonly:"",class:"form-control"},null,8,["value"])])]),Object(n["createVNode"])("div",dt,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-outline-secondary mr-2",onClick:t[5]||(t[5]=function(){var t;return e.dataGrid.clearSelection&&(t=e.dataGrid).clearSelection.apply(t,arguments)})},"Clear Selection")):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])("div",bt,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-primary w-24 mr-2",onClick:t[6]||(t[6]=function(){return e.save&&e.save.apply(e,arguments)})},"Save")):(Object(n["openBlock"])(),Object(n["createBlock"])("div",pt,[Object(n["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-2",onClick:t[7]||(t[7]=function(){return e.resetFormData&&e.resetFormData.apply(e,arguments)})},"Reset"),Object(n["createVNode"])("button",{type:"button",class:"btn bg-theme-9 text-white w-24",onClick:t[8]||(t[8]=function(){return e.add&&e.add.apply(e,arguments)})},"Add")]))])])]),Object(n["createVNode"])(d,{ref:"dataGrid",class:"m-5"},null,512)]})),_:1})])}function mt(e,t,a,r,o,i){var c=Object(n["resolveComponent"])("DxColumn"),l=Object(n["resolveComponent"])("DxPaging"),u=Object(n["resolveComponent"])("DxPager"),s=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(s,{ref:"root","data-source":e.store,"show-borders":!0,"remote-operations":!0,selection:{mode:"single"},onSelectionChanged:e.onSelectionChanged,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)})},{cellTemplate:Object(n["withCtx"])((function(t){var a=t.data;return[a.data.is_active?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:1,onClick:function(t){return e.deactivate(a.data.id)},class:"btn btn-sm bg-theme-6 rounded-lg text-white"}," Deactivate ",8,["onClick"])):(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,onClick:function(t){return e.activate(a.data.id)},class:"btn btn-sm bg-theme-9 rounded-lg text-white"}," Activate ",8,["onClick"]))]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{"data-field":"document_number","data-type":"string",caption:"Nomor Dokumen"}),Object(n["createVNode"])(c,{"data-field":"issued_by","data-type":"string",caption:"Dikeluarkan Oleh"}),Object(n["createVNode"])(c,{"data-field":"valid_from","data-type":"string",caption:"Berlaku Sejak"}),Object(n["createVNode"])(c,{"data-field":"valid_until","data-type":"string",caption:"Berlaku Sampai"}),Object(n["createVNode"])(c,{width:100,"data-field":"id",caption:"Aktivasi","cell-template":"cellTemplate"}),Object(n["createVNode"])(l,{"page-size":5}),Object(n["createVNode"])(u,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20]})]})),_:1},8,["data-source","onSelectionChanged"])}var vt=Object(n["defineComponent"])({components:{DxDataGrid:T["DxDataGrid"],DxColumn:T["DxColumn"],DxPaging:T["DxPaging"],DxPager:T["DxPager"],DxSorting:T["DxSorting"],DxHeaderFilter:T["DxHeaderFilter"],DxFilterRow:T["DxFilterRow"]},setup:function(e,t){var a=this,r=(t.emit,Object(n["ref"])(null)),o=Object(te["c"])();function i(e){return void 0!==e&&null!==e&&""!==e}Object(n["onMounted"])((function(){}));var c=Object(n["inject"])("env"),l=new F.a({key:"id",load:function(e){var t="?";["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(a){a in e&&i(e[a])&&(t+="".concat(a,"=").concat(JSON.stringify(e[a]),"&"))})),t=t.slice(0,-1);var a="".concat(c["VUE_APP_API_ENDPOINT"],"/taxes/skf").concat(t);return"admin"==o.meta.role&&(a="".concat(c["VUE_APP_API_ENDPOINT"],"/distributor/").concat(o.params.distributor_id,"/item-details-data/item-type/22")),A["a"].get(a).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),u=Object(n["inject"])("updateFormData"),s=function(e){var t=e.selectedRowsData;u(t[0])},d=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ee.activate_skf(t).then((function(e){N.a.success({title:"Success",position:"bottom-right"}),p()})).catch((function(e){N.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ee.deactivate_skf(t).then((function(e){N.a.success({title:"Success",position:"bottom-right"}),p()})).catch((function(e){N.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){r.value.instance.refresh()},f=function(){r.value.instance.clearSelection()},m=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:p.bind(a)}})};return{store:l,onSelectionChanged:s,activate:d,deactivate:b,onToolbarPreparing:m,refreshDataGrid:p,clearSelection:f,root:r}}});const Ot=re()(vt,[["render",mt]]);var jt=Ot,ht={id:null,issued_by:null,document_number:null,valid_from:null,valid_until:null,skf_file:null,verification_status:null,is_active:!0},gt=["id"],kt=["id"],wt=Object(n["defineComponent"])({components:{DocumentForm:i["a"],DataGrid:jt,FormItem:se["a"]},setup:function(){var e=Object(de["d"])(),t=e.state.auth.user,a=Object(n["ref"])(!1),r=Object(n["ref"])(!1),o=Object(n["ref"])(null),i=Object(n["ref"])(null),c=Object(n["inject"])("env"),l=Object(n["reactive"])(Object(S["a"])({},ht)),u={issued_by:{required:ue["c"]},document_number:{required:ue["c"]},valid_from:{required:ue["c"]},valid_until:{required:ue["c"]},skf_file:{required:ue["c"]}},s=Object(le["a"])(u,Object(n["toRefs"])(l)),d=function(){var e=Object(n["toRefs"])(l);for(var t in ht)e[t].value=ht[t];s.value.$reset()},b=function(e){var t=Object(n["toRefs"])(l);for(var a in ht)Object.hasOwnProperty.call(e,a)&&(t[a].value=e[a])},p=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!=t?(b(t),a.value=!0):(d(),a.value=!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s.value.$touch(),s.value.$invalid){e.next=9;break}return l.id,a=Object(V["a"])(l,gt),a.distributor_id=t.distributor.id,r.value=!0,e.next=7,ee.update_skf(l.id,a).then((function(e){N.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),i.value.clearFiles(),o.value.refreshDataGrid(),d()})).catch((function(e){N.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){r.value=!1}));case 7:e.next=10;break;case 9:N.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s.value.$touch(),s.value.$invalid){e.next=9;break}return l.id,a=Object(V["a"])(l,kt),a.distributor_id=t.distributor.id,r.value=!0,e.next=7,ee.add_skf(a).then((function(e){N.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),i.value.clearFiles(),o.value.refreshDataGrid(),d()})).catch((function(e){N.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){r.value=!1}));case 7:e.next=10;break;case 9:N.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(e,t,a){l.skf_file=e.id},O=function(e){var t=window.open(c["VUE_APP_API_ENDPOINT"]+"/files?filePath="+e.url,"_blank");t.focus()};return Object(n["provide"])("updateFormData",p),{env:c,formData:l,validate:s,dataGrid:o,updateMode:a,loading:r,save:f,add:m,resetFormData:d,onUploadSuccees:v,elUpload:i,handlePreview:O}}});a("29d9");const _t=re()(wt,[["render",ft]]);var Dt=_t,xt=Object(n["defineComponent"])({components:{DocumentForm:i["a"],SPKP:Oe,SPT:Le,FiscalCertificate:Dt}});const yt=re()(xt,[["render",o]]);t["default"]=yt}}]);