(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3486bb61"],{"15fd":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("a4d3"),a("b64b");function n(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}function r(e,t){if(null==e)return{};var a,r,o=n(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}},"1fcb":function(e,t,a){},2611:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("72dd");function r(){return{$show:Object(n["e"])("$messageBox"),$prompt:Object(n["e"])("$prompt"),$alert:Object(n["e"])("$alert"),$confirm:Object(n["e"])("$confirm")}}},"48e9":function(e,t,a){"use strict";a("1fcb")},b4c3:function(e,t,a){"use strict";a.r(t);a("b0c0");var n=a("7a23"),r={class:"intro-y col-span-12 lg:col-span-12"},o={class:"p-5"},c={class:"mt-3"},i={class:"sm:grid grid-cols-2 gap-5"},l={class:"mt-3"},u={class:"grid grid-cols-2 gap-5  "},s=Object(n["createTextVNode"])("Click to upload"),d=Object(n["createTextVNode"])("Click to upload"),p={class:"mt-3"},b={class:"mt-4 grid grid-cols-2 gap-5 pb-5 border-b"},m={class:"intro-y input-form"},f=Object(n["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"}," Status ",-1),v={class:"intro-y input-form"},h=Object(n["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"}," Status Verifikasi ",-1),O={class:"flex w-full pt-5"},j={key:1,class:"ml-auto"},g={key:1};function w(e,t,a,w,k,_){var x=Object(n["resolveComponent"])("el-option"),y=Object(n["resolveComponent"])("el-select"),D=Object(n["resolveComponent"])("form-item"),N=Object(n["resolveComponent"])("el-button"),C=Object(n["resolveComponent"])("el-upload"),V=Object(n["resolveComponent"])("DataGrid"),P=Object(n["resolveComponent"])("document-form"),S=Object(n["resolveDirective"])("maska");return Object(n["openBlock"])(),Object(n["createBlock"])("div",r,[Object(n["createVNode"])(P,{title:"Pemegang Saham",itemType:11},{default:Object(n["withCtx"])((function(a){var r=a.allowManage;return[Object(n["createVNode"])("div",o,[Object(n["createVNode"])("div",c,[Object(n["createVNode"])("div",i,[Object(n["createVNode"])(D,{label:"Tipe Pemegang Saham","rules-text":"Required",validationData:e.validate.shareholder_type},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(y,{class:["form-control",{"border-theme-6":e.validate.shareholder_type.$error}],modelValue:e.validate.shareholder_type.$model,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.validate.shareholder_type.$model=t})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(x,{value:"PERSONAL",label:"Perorangan"}),Object(n["createVNode"])(x,{value:"COMPANY",label:"Perusahaan"})]})),_:1},8,["modelValue","class"])]})),_:1},8,["validationData"]),Object(n["createVNode"])(D,{label:"Nama Pemegang Saham","rules-text":"Required",validationData:e.validate.name},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{placeholder:"Nama",class:["form-control",{"border-theme-6":e.validate.name.$error}],"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.validate.name.$model=t})},null,2),[[n["vModelText"],e.validate.name.$model]])]})),_:1},8,["validationData"])])]),Object(n["createVNode"])("div",l,[Object(n["createVNode"])("div",u,[Object(n["createVNode"])(D,{label:"NPWP","rules-text":"Required",validationData:e.validate.npwp},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{placeholder:"eg: 11.111.111.1-111.111",class:["form-control",{"border-theme-6":e.validate.npwp.$error}],"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.validate.npwp.$model=t})},null,2),[[S,"##.###.###.#-###.###"],[n["vModelText"],e.validate.npwp.$model]])]})),_:1},8,["validationData"]),Object(n["createVNode"])(D,{label:"File NPWP","rules-text":"Required",validationData:e.validate.npwp_file_path,class:"intro-y"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(C,{"disable-transitions":!0,ref:"elUpload",class:"upload-demo form-control",action:e.env["VUE_APP_API_ENDPOINT"]+"/files",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},"on-success":e.onNPWPUploadSuccees,"with-credentials":!0,"file-list":null!=e.formData.npwp_file_path?[{name:"file-npwp",url:e.formData.npwp_file_path}]:[],"on-preview":e.handlePreview},{tip:Object(n["withCtx"])((function(){return[]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(N,{size:"small",type:"primary"},{default:Object(n["withCtx"])((function(){return[s]})),_:1})]})),_:1},8,["action","on-success","file-list","on-preview"])]})),_:1},8,["validationData"]),Object(n["createVNode"])(D,{label:"NIK","rules-text":"Required",validationData:e.validate.ktp_number},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{placeholder:"99-999-999",class:["form-control",{"border-theme-6":e.validate.ktp_number.$error}],"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.validate.ktp_number.$model=t})},null,2),[[n["vModelText"],e.validate.ktp_number.$model]])]})),_:1},8,["validationData"]),Object(n["createVNode"])(D,{label:"File KTP","rules-text":"Required",validationData:e.validate.ktp_file_path,class:"intro-y"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(C,{ref:"elUpload",class:"upload-demo form-control",action:e.env["VUE_APP_API_ENDPOINT"]+"/files",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},"on-success":e.onKTPUploadSuccees,"with-credentials":!0,"file-list":null!=e.formData.ktp_file_path?[{name:"file-ktp",url:e.formData.ktp_file_path}]:[],"on-preview":e.handlePreview},{tip:Object(n["withCtx"])((function(){return[]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(N,{size:"small",type:"primary"},{default:Object(n["withCtx"])((function(){return[d]})),_:1})]})),_:1},8,["action","on-success","file-list","on-preview"])]})),_:1},8,["validationData"])])]),Object(n["createVNode"])("div",p,[Object(n["createVNode"])(D,{label:"Kepemilikan %","rules-text":"Required",validationData:e.validate.ownership_percentage},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{type:"number",step:"0.01",placeholder:"__%",class:["form-control",{"border-theme-6":e.validate.ownership_percentage.$error}],"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.validate.ownership_percentage.$model=t})},null,2),[[n["vModelText"],e.validate.ownership_percentage.$model]])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",b,[Object(n["createVNode"])("div",m,[f,Object(n["createVNode"])("input",{value:e.formData.is_active?"Active":"Not Activated",type:"text",readonly:"",class:"form-control"},null,8,["value"])]),Object(n["createVNode"])("div",v,[h,Object(n["createVNode"])("input",{value:e.formData.verification_status,type:"text",readonly:"",class:"form-control"},null,8,["value"])])]),Object(n["createVNode"])("div",O,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-outline-secondary mr-2",onClick:t[6]||(t[6]=function(){var t;return e.dataGrid.clearSelection&&(t=e.dataGrid).clearSelection.apply(t,arguments)})}," Clear Selection ")):Object(n["createCommentVNode"])("",!0),r?(Object(n["openBlock"])(),Object(n["createBlock"])("div",j,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-primary w-24 mr-2",onClick:t[7]||(t[7]=function(){return e.save&&e.save.apply(e,arguments)})}," Save ")):(Object(n["openBlock"])(),Object(n["createBlock"])("div",g,[Object(n["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-2",onClick:t[8]||(t[8]=function(){return e.resetFormData&&e.resetFormData.apply(e,arguments)})}," Reset "),Object(n["createVNode"])("button",{type:"button",class:"btn bg-theme-9 text-white w-24",onClick:t[9]||(t[9]=function(){return e.add&&e.add.apply(e,arguments)})}," Add ")]))])):Object(n["createCommentVNode"])("",!0)])]),Object(n["createVNode"])(V,{ref:"dataGrid",class:"m-5",allowManage:r},null,8,["allowManage"])]})),_:1})])}a("0cfa");var k=a("5040"),_=a.n(k),x=a("15fd"),y=a("1da1"),D=a("5530"),N=(a("d3b7"),a("96cf"),a("c45b")),C={key:0},V={key:1};function P(e,t,a,r,o,c){var i=Object(n["resolveComponent"])("DxColumn"),l=Object(n["resolveComponent"])("DxTotalItem"),u=Object(n["resolveComponent"])("DxSummary"),s=Object(n["resolveComponent"])("DxPaging"),d=Object(n["resolveComponent"])("DxPager"),p=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(p,{ref:"root","data-source":e.store,"show-borders":!0,"remote-operations":{paging:!0,summary:!1,filtering:!0,sorting:!0},selection:{mode:"single"},onSelectionChanged:e.onSelectionChanged,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)})},{statusAktivasiCellTemplate:Object(n["withCtx"])((function(e){var t=e.data;return[t.data.is_active?(Object(n["openBlock"])(),Object(n["createBlock"])("span",C," Active ")):(Object(n["openBlock"])(),Object(n["createBlock"])("span",V," Non-Active "))]})),cellTemplate:Object(n["withCtx"])((function(t){var a=t.data;return[a.data.is_active?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:1,onClick:function(t){return e.deactivate(a.data.id)},class:"btn btn-sm bg-theme-6 rounded-lg text-white"}," Deactivate ",8,["onClick"])):(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,onClick:function(t){return e.activate(a.data.id)},class:"btn btn-sm bg-theme-9 rounded-lg text-white"}," Activate ",8,["onClick"]))]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(i,{"data-field":"shareholder_type","data-type":"string",caption:"Tipe Pemegang Saham"}),Object(n["createVNode"])(i,{"data-field":"name","data-type":"string",caption:"Nama Pemegang Saham"}),Object(n["createVNode"])(i,{"data-field":"ownership_percentage","data-type":"number",caption:"Persentase Kepemilikan (%)"}),Object(n["createVNode"])(i,{allowFiltering:!1,"data-field":"is_active",caption:"Status Aktivasi","data-type":"boolean","cell-template":"statusAktivasiCellTemplate"}),"distributor"==e.route.meta.role&&e.allowManage?(Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:0,allowFiltering:!1,width:100,"data-field":"id",caption:"Aksi","cell-template":"cellTemplate"})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(u,{"calculate-custom-summary":e.calculateTotal},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{"summary-type":"custom","display-format":"Total: {0}%","show-in-column":"ownership_percentage"})]})),_:1},8,["calculate-custom-summary"]),Object(n["createVNode"])(s,{"page-size":5}),Object(n["createVNode"])(d,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20]})]})),_:1},8,["data-source","onSelectionChanged"])}a("99af"),a("fb6a");var S=a("d30a"),T=a("2597"),R=a.n(T),$=a("c953"),B="/shareholder",A=function(){return $["a"].get(B)},q=function(e){return $["a"].post(B,e)},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return $["a"].put(B+"/".concat(e),t)},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return $["a"].put(B+"/".concat(e,"/activate"),t)},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return $["a"].put(B+"/".concat(e,"/deactivate"),t)},I={get:A,add:q,update:F,activate:M,deactivate:U},E=a("6c02"),G=Object(n["defineComponent"])({components:{DxDataGrid:S["DxDataGrid"],DxColumn:S["DxColumn"],DxPaging:S["DxPaging"],DxPager:S["DxPager"],DxSorting:S["DxSorting"],DxHeaderFilter:S["DxHeaderFilter"],DxFilterRow:S["DxFilterRow"],DxSummary:S["DxSummary"],DxTotalItem:S["DxTotalItem"]},props:["allowManage"],setup:function(e,t){var a=this,r=(t.emit,Object(n["ref"])(null)),o=Object(E["c"])();function c(e){return void 0!==e&&null!==e&&""!==e}Object(n["onMounted"])((function(){console.log(r.value)}));var i=Object(n["inject"])("env");console.log(i);var l=new R.a({key:"id",load:function(e){var t="?";["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(a){a in e&&c(e[a])&&(t+="".concat(a,"=").concat(JSON.stringify(e[a]),"&"))})),t=t.slice(0,-1);var a="".concat(i["VUE_APP_API_ENDPOINT"],"/shareholder").concat(t);return"admin"==o.meta.role&&(a="".concat(i["VUE_APP_API_ENDPOINT"],"/distributor/").concat(o.params.distributor_id,"/item-details-data/item-type/11")),$["a"].get(a).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),u=Object(n["inject"])("updateFormData");console.log(r);var s=function(e){var t=e.selectedRowsData;u(t[0])},d=function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,I.activate(t).then((function(e){_.a.success({title:"Success",position:"bottom-right"}),b()})).catch((function(e){_.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,I.deactivate(t).then((function(e){_.a.success({title:"Success",position:"bottom-right"}),b()})).catch((function(e){_.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){r.value.instance.refresh()},m=function(){r.value.instance.clearSelection()},f=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:b.bind(a)}})},v=function(e){"start"===e.summaryProcess?e.totalValue=0:"calculate"===e.summaryProcess&&1==e.value.is_active&&(e.totalValue=e.totalValue+parseFloat(e.value.ownership_percentage))};return{store:l,onSelectionChanged:s,activate:d,deactivate:p,onToolbarPreparing:f,refreshDataGrid:b,clearSelection:m,root:r,calculateTotal:v,route:o}}});G.render=P;var K=G,L={id:null,shareholder_type:"PERSONAL",name:null,npwp:null,npwp_file_path:null,ktp_number:null,ktp_file_path:null,ownership_percentage:0,verification_status:null,is_active:null},W=a("25a0"),z=a("e3e1"),H=a("2022"),X=a("5502"),J=a("2611"),Y=(a("af50"),Object(n["defineComponent"])({components:{DocumentForm:N["a"],DataGrid:K,FormItem:H["a"]},setup:function(){Object(E["c"])();var e=Object(X["d"])(),t=e.state.auth.user,a=Object(n["ref"])(!1),r=Object(n["ref"])(!1),o=Object(J["a"])(),c=Object(n["ref"])(null),i=Object(n["ref"])(null),l=Object(n["inject"])("env"),u=Object(n["reactive"])(Object(D["a"])({},L)),s={shareholder_type:{required:z["c"]},name:{required:z["c"]},npwp:{required:z["c"]},npwp_file_path:{required:z["c"]},ktp_number:{required:z["c"]},ktp_file_path:{required:z["c"]},ownership_percentage:{required:z["c"]}},d=Object(W["a"])(s,Object(n["toRefs"])(u)),p=function(){var e=Object(n["toRefs"])(u);for(var t in L)e[t].value=L[t];d.value.$reset()},b=function(e){var t=Object(n["toRefs"])(u);for(var a in L)Object.hasOwnProperty.call(e,a)&&(t[a].value=e[a])},m=function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!=t?(b(t),a.value=!0):(p(),a.value=!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:d.value.$touch(),d.value.$invalid?_.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):o.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(y["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.id,a=Object(x["a"])(u,["id"]),a.distributor_id=t.distributor.id,r.value=!0,e.next=5,I.update(u.id,a).then((function(e){_.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),i.value.clearFiles(),c.value.clearSelection(),c.value.refreshDataGrid(),p()})).catch((function(e){_.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){r.value=!1}));case 5:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:d.value.$touch(),d.value.$invalid?(console.log(u),_.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})):o.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(y["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.id,a=Object(x["a"])(u,["id"]),console.log(a),a.distributor_id=t.distributor.id,console.log(a),r.value=!0,e.next=7,I.add(a).then((function(e){_.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),i.value.clearFiles(),c.value.refreshDataGrid(),p()})).catch((function(e){console.log(e),_.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){r.value=!1}));case 7:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(e,t,a){u.npwp_file_path=e.id},O=function(e,t,a){u.ktp_file_path=e.id},j=function(e){var t=window.open(l["VUE_APP_API_ENDPOINT"]+"/files?filePath="+e.url,"_blank");t.focus()};return Object(n["provide"])("updateFormData",m),{env:l,formData:u,validate:d,dataGrid:c,updateMode:a,loading:r,save:f,add:v,resetFormData:p,onNPWPUploadSuccees:h,onKTPUploadSuccees:O,elUpload:i,handlePreview:j}}}));a("48e9");Y.render=w;t["default"]=Y}}]);