(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-729e2e90"],{"0793":function(e,t,n){"use strict";n("ac68")},"0999":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("1da1"),a=(n("96cf"),n("d3b7"),n("72dd")),o=n("c953"),i="/teritorial",c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return o["a"].get(i+"/province/".concat(e))},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return o["a"].get(i+"/city/".concat(e))},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return o["a"].get(i+"/district/".concat(e))},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return o["a"].get(i+"/village/".concat(e))},s={province:c,city:l,district:u,village:d},b=n("fb27");function p(e){var t=Object(a["p"])([]),n=Object(a["p"])([]),o=Object(a["p"])([]),i=Object(a["p"])([]),c=Object(a["p"])(!1),l=Object(a["p"])(!1),u=Object(a["p"])(!1),d=Object(a["p"])(!1),p=function(){var n=Object(r["a"])(regeneratorRuntime.mark((function n(){var r,a=arguments;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=!(a.length>0&&void 0!==a[0])||a[0],c.value=!0,n.next=4,s.province().then((function(n){t.value=n.data,r&&(e.city_id=null,e.district_id=null,e.village_id=null)})).finally((function(){c.value=!1}));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),f=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var r,a,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:null,a=!(o.length>1&&void 0!==o[1])||o[1],l.value=!0,n.value=[],t.next=6,s.city(r).then((function(t){n.value=t.data,a&&(e.city_id=null,e.district_id=null,e.village_id=null)})).finally((function(){l.value=!1}));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var n,r,a=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:null,r=!(a.length>1&&void 0!==a[1])||a[1],u.value=!0,o.value=[],t.next=6,s.district(n).then((function(t){o.value=t.data,r&&(e.district_id=null,e.village_id=null)})).finally((function(){u.value=!1}));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),v=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var n,r,a=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:null,r=!(a.length>1&&void 0!==a[1])||a[1],d.value=!0,i.value=[],t.next=6,s.village(n).then((function(t){i.value=t.data,r&&(e.village_id=null)})).finally((function(){d.value=!1}));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=Object(a["p"])([]),O=Object(a["p"])(!1),j=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var n,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=!(r.length>0&&void 0!==r[0])||r[0],O.value=!0,t.next=4,b["a"].regions().then((function(t){n&&(e.regions_code=null,e.regions_provinces_id=null,e.producer_area_city_id=null),g.value=t.data})).catch((function(e){console.log(e)})).finally((function(){c.value=!1}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=Object(a["p"])([]),y=Object(a["p"])(!1),_=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var n,r,a=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:null,r=!(a.length>1&&void 0!==a[1])||a[1],y.value=!0,h.value=[],t.next=6,b["a"].regionProvinces(n).then((function(t){r&&(e.producer_area_city_id=null),h.value=t.data})).finally((function(){y.value=!1}));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),k=Object(a["p"])([]),w=Object(a["p"])(!1),x=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:null,!(n.length>1&&void 0!==n[1])||n[1],w.value=!0,k.value=[],e.next=6,b["a"].regionProducerArea(t).then((function(e){k.value=e.data})).finally((function(){w.value=!1}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{provinces:t,getProvinces:p,provinceOptionsLoading:c,cities:n,getCities:f,cityOptionsLoading:l,districts:o,getDistricts:m,districtOptionsLoading:u,villages:i,getVillages:v,villageOptionsLoading:d,regions:g,getRegions:j,regionsOptionsLoading:O,regionProvinces:h,getRegionProvinces:_,regionProvincesOptionsLoading:y,regionProducerArea:k,getRegionProducerArea:x,regionProducerAreaOptionsLoading:w}}},"15fd":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("a4d3"),n("b64b");function r(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function a(e,t){if(null==e)return{};var n,a,o=r(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}},"1e9c":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("1da1"),a=n("5530"),o=(n("96cf"),n("25a0")),i=n("72dd");function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(i["p"])(!1),c=Object(i["o"])(Object(a["a"])({},e)),l=null;t&&(l=Object(o["a"])(t,Object(i["q"])(c)));var u=function(){for(var t in e)c[t]=e[t];l&&l.value.$reset()},d=function(t){var n=Object(i["q"])(c);for(var r in e)Object.hasOwnProperty.call(t,r)&&(n[r].value=t[r])},s=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!=t?(d(t),n.value=!0):(u(),n.value=!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i["n"])("updateFormData",s),{updateMode:n,formData:c,validate:l,resetFormData:u,hydrateFormData:d,updateFormData:s}}},2611:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("72dd");function a(){return{$show:Object(r["e"])("$messageBox"),$prompt:Object(r["e"])("$prompt"),$alert:Object(r["e"])("$alert"),$confirm:Object(r["e"])("$confirm")}}},"6eb3":function(e,t,n){"use strict";n("99af");var r=n("c953"),a="/distributors",o=function(e){return r["a"].get("".concat(a,"/").concat(e,"/regions"))},i=function(e){return r["a"].get("".concat(a,"/").concat(e,"/proposed-regions"))},c=function(e,t){return r["a"].get("".concat(a,"/").concat(e,"/proposed-regions/").concat(t,"/provinces"))},l=function(e,t,n){return r["a"].get("".concat(a,"/").concat(e,"/proposed-regions/").concat(t,"/provinces/").concat(n,"/cities"))};t["a"]={show:o,getProposedRegions:i,getProposedProvinces:c,getProposedCities:l}},7993:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),a={class:"grid grid-cols-12 gap-6"};function o(e,t,n,o,i,c){var l=Object(r["resolveComponent"])("BusinessName"),u=Object(r["resolveComponent"])("DistributorRegions"),d=Object(r["resolveComponent"])("BusinessAddress");return Object(r["openBlock"])(),Object(r["createBlock"])("div",null,[Object(r["createVNode"])("div",a,[Object(r["createVNode"])(l),"admin"!=e.route.meta.role?(Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:0,onUpdated:e.onDistributorRegionUpdated},null,8,["onUpdated"])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(d,{ref:"businessAddressPanel"},null,512)])])}var i=n("1da1"),c=(n("96cf"),n("c45b")),l=(n("b0c0"),{class:"intro-y col-span-12 lg:col-span-12"}),u={key:0,class:"grid grid-cols-1 gap-5 p-5 pb-0"},d={class:"grid grid-cols-2 gap-5 p-5 pt-5"},s={class:"mt-4 grid grid-cols-2 px-5 gap-5"},b={class:"intro-y input-form"},p=Object(r["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"}," Klasifikasi ",-1),f={key:1,class:"text-right pt-5"};function m(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("form-item"),m=Object(r["resolveComponent"])("el-option"),v=Object(r["resolveComponent"])("el-select"),g=Object(r["resolveComponent"])("document-form"),O=Object(r["resolveDirective"])("loading");return Object(r["openBlock"])(),Object(r["createBlock"])("div",l,[Object(r["withDirectives"])(Object(r["createVNode"])(g,{title:"Nama Perusahaan",itemType:1},{default:Object(r["withCtx"])((function(n){var a=n.allowManage;return["AUTHORIZED_DISTRIBUTOR"==e.formData.classification?(Object(r["openBlock"])(),Object(r["createBlock"])("div",u,[Object(r["createVNode"])(c,{label:"Customer ID","rules-text":"*"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("input",{type:"text",class:"form-control",readonly:"",value:e.formData.sap_id},null,8,["value"])]})),_:1})])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])("div",d,[Object(r["createVNode"])(c,{label:"Badan Usaha","rules-text":"Required",validationData:e.validate.business_entity_type},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(v,{class:["form-control",{"border-theme-6":e.validate.business_entity_type.$error}],modelValue:e.validate.business_entity_type.$model,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.validate.business_entity_type.$model=t})},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,{value:"PT"}),Object(r["createVNode"])(m,{value:"CV"}),Object(r["createVNode"])(m,{value:"UD"})]})),_:1},8,["modelValue","class"])]})),_:1},8,["validationData"]),Object(r["createVNode"])(c,{label:"Nama Distributor","rules-text":"Required",validationData:e.validate.name,class:"intro-y"},{default:Object(r["withCtx"])((function(){return[Object(r["withDirectives"])(Object(r["createVNode"])("input",{placeholder:"Nama Distributor",type:"text",class:["form-control",{"border-theme-6":e.validate.name.$error}],"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.validate.name.$model=t})},null,2),[[r["vModelText"],e.validate.name.$model]])]})),_:1},8,["validationData"]),Object(r["createVNode"])(c,{label:"Tipe","rules-text":"Required",validationData:e.validate.distributor_type.$model},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(v,{class:["form-control",{"border-theme-6":e.validate.distributor_type.$error}],modelValue:e.validate.distributor_type.$model,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.validate.distributor_type.$model=t})},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,{value:"Distributor"})]})),_:1},8,["modelValue","class"])]})),_:1},8,["validationData"]),Object(r["createVNode"])(c,{label:"Direktur Utama","rules-text":"Required",validationData:e.validate.president_director,class:"intro-y"},{default:Object(r["withCtx"])((function(){return[Object(r["withDirectives"])(Object(r["createVNode"])("input",{placeholder:"Direktur Utama",type:"text",class:["form-control",{"border-theme-6":e.validate.president_director.$error}],"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.validate.president_director.$model=t})},null,2),[[r["vModelText"],e.validate.president_director.$model]])]})),_:1},8,["validationData"]),Object(r["createVNode"])(c,{label:"Email Perusahaan","rules-text":"Required",validationData:e.validate.company_email},{default:Object(r["withCtx"])((function(){return[Object(r["withDirectives"])(Object(r["createVNode"])("input",{"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.validate.company_email.$model=t}),type:"email",class:["form-control",{"border-theme-6":e.validate.company_email.$error}],placeholder:"distributor@mail.com"},null,2),[[r["vModelText"],e.validate.company_email.$model]])]})),_:1},8,["validationData"]),Object(r["createVNode"])(c,{label:"Website Perusahaan",validationData:e.validate.company_website},{default:Object(r["withCtx"])((function(){return[Object(r["withDirectives"])(Object(r["createVNode"])("input",{"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.validate.company_website.$model=t}),class:["form-control",{"border-theme-6":e.validate.company_website.$error}],placeholder:"https://distributor.com"},null,2),[[r["vModelText"],e.validate.company_website.$model]])]})),_:1},8,["validationData"])]),Object(r["createVNode"])("div",s,[Object(r["createVNode"])("div",b,[p,Object(r["createVNode"])("input",{value:e.formData.classification,type:"text",readonly:"",class:"form-control"},null,8,["value"])])]),"distributor"==e.route.meta.role&&a?(Object(r["openBlock"])(),Object(r["createBlock"])("div",f,[Object(r["createVNode"])("button",{disabled:e.loading,type:"button",class:["btn btn-primary w-24 mr-4",{"cursor-not-allowed":e.loading}],onClick:t[7]||(t[7]=function(){return e.save&&e.save.apply(e,arguments)})}," Save ",10,["disabled"])])):Object(r["createCommentVNode"])("",!0)]})),_:1},512),[[O,e.loading]])])}n("0cfa");var v=n("5040"),g=n.n(v),O=n("15fd"),j=(n("d3b7"),n("159b"),n("b64b"),n("72dd")),h=n("c953"),y="/",_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return h["a"].get(y+"distributor/".concat(e))},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return h["a"].put(y+"distributor/".concat(e),t)},w=function(e){return h["a"].post(y+"company-address",e)},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return h["a"].put(y+"company-address/".concat(e),t)},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return h["a"].put(y+"company-address/".concat(e,"/activate"),t)},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return h["a"].put(y+"company-address/".concat(e,"/deactivate"),t)},C=n("e3e1"),R=n("25a0"),N=n("2022"),P=n("5502"),B=n("6c02"),S=n("191b"),$=(n("af50"),Object(j["c"])({components:{DocumentForm:c["a"],FormItem:N["a"]},setup:function(){var e=Object(B["c"])(),t=Object(j["o"])({id:null,business_entity_type:"PT",distributor_type:"Distributor",name:null,president_director:null,company_email:null,company_website:null,classification:null,verification_status:null,sap_id:null}),n={business_entity_type:{required:C["c"]},distributor_type:{required:C["c"]},name:{required:C["c"]},president_director:{required:C["c"]},company_email:{required:C["c"]},company_website:{}},r=Object(R["b"])(n,Object(j["q"])(t)),a=Object(j["p"])(!0),o=Object(P["d"])(),c=o.state.auth.user,l="";"distributor"==c.role.name&&(l=c.distributor.id),Object(j["m"])(Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:case"end":return e.stop()}}),e)}))));var u=function(){var n=Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("distributor"!=c.role.name){n.next=5;break}return n.next=3,_(l).then((function(e){var n=e.data.data;Object.keys(t).forEach((function(e){n.hasOwnProperty(e)&&(t[e]=n[e])}))})).finally((function(){a.value=!1}));case 3:n.next=7;break;case 5:return n.next=7,Object(S["b"])(e.params.distributor_id,1).then((function(e){var n=e.data.data;Object.keys(t).forEach((function(e){n.hasOwnProperty(e)&&(t[e]=n[e])}))})).finally((function(){a.value=!1}));case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),d=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r.value.$touch(),r.value.$invalid){e.next=9;break}return t.id,n=Object(O["a"])(t,["id"]),n.distributor_id=l,a.value=!0,e.next=7,k(t.id,n).then(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return g.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),e.next=3,u();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),g.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){a.value=!1}));case 7:e.next=11;break;case 9:console.log(r),g.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{validate:r,formData:t,save:d,loading:a,route:e}}}));$.render=m;var T=$,F={class:"intro-y col-span-12 lg:col-span-12"},A={class:"p-5"},q={class:"grid gap-5"},G={class:"mt-3 grid grid-cols-2 gap-5"},L={class:"flex w-full px-5"},M={key:1,class:"ml-auto"},U={key:1},K=Object(r["createVNode"])("hr",null,null,-1),E=Object(r["createVNode"])("h3",{class:"px-5 flex w-full mt-3"},"Produsen dan Produk sesuai Area",-1);function I(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("el-option"),l=Object(r["resolveComponent"])("el-select"),u=Object(r["resolveComponent"])("form-item"),d=Object(r["resolveComponent"])("DataGrid"),s=Object(r["resolveComponent"])("ProducerMappingDataGrid"),b=Object(r["resolveComponent"])("document-form"),p=Object(r["resolveDirective"])("loading");return Object(r["openBlock"])(),Object(r["createBlock"])("div",F,[Object(r["withDirectives"])(Object(r["createVNode"])(b,{title:"Region Distributor",useVerificationButtons:!1},{default:Object(r["withCtx"])((function(n){var a=n.user;return[Object(r["createVNode"])("div",A,[Object(r["createVNode"])("div",q,[Object(r["createVNode"])(u,{label:"Region","rules-text":"Required",validationData:e.validate.regions_code,class:"intro-y"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{onChange:t[1]||(t[1]=function(t){return e.getRegionProvinces(t)}),modelValue:e.formData.regions_code,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.formData.regions_code=t}),class:["form-control",{"border-theme-6":e.validate.regions_code.$error}],filterable:""},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.regions,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(c,{key:e.code,label:e.name,value:e.code},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","class"])]})),_:1},8,["validationData"])]),Object(r["createVNode"])("div",G,[Object(r["createVNode"])(u,{label:"Provinsi","rules-text":"Required",class:"intro-y"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{onChange:t[3]||(t[3]=function(t){return e.getRegionProducerArea(t)}),modelValue:e.formData.region_provinces_id,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.formData.region_provinces_id=t}),class:"form-control",disabled:null==e.formData.regions_code,loading:e.regionProvincesOptionsLoading,filterable:""},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.regionProvinces,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(c,{key:e.province_id,label:e.provinces.province_name,value:e.province_id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","disabled","loading"])]})),_:1}),Object(r["createVNode"])(u,{key:"",label:"Kota/Kabupaten","rules-text":"Required",class:"intro-y"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{modelValue:e.formData.producer_area_city_id,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.formData.producer_area_city_id=t}),class:"form-control",disabled:null==e.formData.region_provinces_id,loading:e.regionProducerAreaOptionsLoading,filterable:""},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.regionProducerArea,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(c,{key:e.city_id,label:e.cities.city_type+" "+e.cities.city_name,value:e.city_id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","disabled","loading"])]})),_:1})])]),Object(r["createVNode"])("div",L,[e.updateMode?(Object(r["openBlock"])(),Object(r["createBlock"])("button",{key:0,type:"button",class:"btn btn-outline-secondary mr-2",onClick:t[6]||(t[6]=function(){var t;return e.dataGrid.clearSelection&&(t=e.dataGrid).clearSelection.apply(t,arguments)})}," Clear Selection ")):Object(r["createCommentVNode"])("",!0),"distributor"!=e.route.meta.role||a.has_registration_number?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])("div",M,[e.updateMode?(Object(r["openBlock"])(),Object(r["createBlock"])("button",{key:0,disabled:e.loading,class:[{"cursor-not-allowed":e.loading},"btn btn-primary w-24 mr-2"],type:"button",onClick:t[7]||(t[7]=function(){return e.save&&e.save.apply(e,arguments)})}," Save ",10,["disabled"])):(Object(r["openBlock"])(),Object(r["createBlock"])("div",U,[Object(r["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-2",onClick:t[8]||(t[8]=function(){return e.resetFormData&&e.resetFormData.apply(e,arguments)})}," Reset "),Object(r["createVNode"])("button",{disabled:e.loading,class:[{"cursor-not-allowed":e.loading},"btn bg-theme-9 text-white w-24"],type:"button",onClick:t[9]||(t[9]=function(){return e.add&&e.add.apply(e,arguments)})}," Add ",10,["disabled"])]))]))]),Object(r["createVNode"])(d,{ref:"dataGrid",class:"m-5"},null,512),K,E,Object(r["createVNode"])(s,{ref:"producerMappingDataGrid",class:"mx-5"},null,512)]})),_:1},512),[[p,e.loading]])])}var H=n("5530"),z={key:0,class:""};function J(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("DxColumn"),l=Object(r["resolveComponent"])("DxFilterRow"),u=Object(r["resolveComponent"])("DxPaging"),d=Object(r["resolveComponent"])("DxPager"),s=Object(r["resolveComponent"])("DxDataGrid");return Object(r["openBlock"])(),Object(r["createBlock"])(s,{ref:"root","data-source":e.customStore,"show-borders":!0,"remote-operations":!0,selection:{mode:"single"},"column-auto-width":!0,onSelectionChanged:e.onSelectionChanged,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)})},{cityNameCellTemplate:Object(r["withCtx"])((function(e){var t=e.data;return[Object(r["createVNode"])("span",null,Object(r["toDisplayString"])(t.data.cities.city_type)+" "+Object(r["toDisplayString"])(t.data.cities.city_name),1)]})),cellTemplate:Object(r["withCtx"])((function(t){var n=t.data;return["distributor"==e.route.meta.role?(Object(r["openBlock"])(),Object(r["createBlock"])("div",z,[Object(r["createVNode"])("button",{onClick:function(t){return e.deleteRegion(n.data.id)},class:"btn btn-sm bg-theme-6 rounded-lg text-white"}," Delete ",8,["onClick"])])):Object(r["createCommentVNode"])("",!0)]})),default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{allowSorting:!1,"data-field":"region.name","data-type":"string",caption:"Region"}),Object(r["createVNode"])(c,{allowSorting:!1,"data-field":"provinces.province_name","data-type":"string",caption:"Provinsi"}),Object(r["createVNode"])(c,{allowSorting:!1,"data-field":"cities.city_name","data-type":"string",caption:"Kota/Kabupaten","cell-template":"cityNameCellTemplate"}),"distributor"!=e.route.meta.role||e.store.state.auth.user.has_registration_number?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])(c,{key:0,allowFiltering:!1,"data-field":"id",caption:"Aksi","cell-template":"cellTemplate"})),Object(r["createVNode"])(l,{visible:!0}),Object(r["createVNode"])(u,{"page-size":10}),Object(r["createVNode"])(d,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20]})]})),_:1},8,["data-source","onSelectionChanged"])}n("4de4"),n("99af"),n("fb6a");var W=n("d30a"),Z=n("2597"),Q=n.n(Z),X=n("fb27"),Y=Object(r["defineComponent"])({components:{DxDataGrid:W["DxDataGrid"],DxColumn:W["DxColumn"],DxPaging:W["DxPaging"],DxPager:W["DxPager"],DxSorting:W["DxSorting"],DxHeaderFilter:W["DxHeaderFilter"],DxFilterRow:W["DxFilterRow"]},setup:function(e,t){var n=this,a=(t.emit,Object(r["ref"])(null)),o=Object(B["c"])(),c=Object(P["d"])();function l(e){return void 0!==e&&null!==e&&""!==e}Object(r["onMounted"])((function(){console.log(a.value)}));var u=Object(r["inject"])("env");console.log(u);var d=new Q.a({key:"id",load:function(e){var t="?",n={};n.skip=e.skip,n.take=e.take,void 0!==e.filter&&(n.filter=[n.filter,"and",e.filter]),e.sort?n.sort=e.sort:n.sort=[{desc:!0,selector:"updated_at"}],n.requireTotalCount=!0,["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(e){e in n&&l(n[e])&&(t+="".concat(e,"=").concat(JSON.stringify(n[e]),"&"))})),t=t.slice(0,-1);var r="".concat(u["VUE_APP_API_ENDPOINT"],"/distributor-regions").concat(t);return h["a"].get(r).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),s=Object(r["inject"])("updateFormData");console.log(a);var b=function(e){var t=e.selectedRowsData;s(t[0])},p=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(X["b"])(t).then((function(e){g.a.success({title:"Success",position:"bottom-right"}),m()})).catch((function(e){g.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(X["c"])(t).then((function(e){g.a.success({title:"Success",position:"bottom-right"}),m()})).catch((function(e){g.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){a.value.instance.refresh()},v=function(){a.value.instance.clearSelection()},O=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:m.bind(n)}})};return{store:c,customStore:d,onSelectionChanged:b,deleteRegion:p,onToolbarPreparing:O,refreshDataGrid:m,clearSelection:v,root:a,route:o,verifyRegion:f}}});Y.render=J;var ee=Y,te={key:0};function ne(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("DxColumn"),l=Object(r["resolveComponent"])("DxDataGrid");return Object(r["openBlock"])(),Object(r["createBlock"])(l,{ref:"root","data-source":e.store,"show-borders":!0,"remote-operations":!0,"column-auto-width":!0,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)})},{cellTemplate:Object(r["withCtx"])((function(e){var t=e.data;return[Object(r["createVNode"])("div",null,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t.data.products,(function(e,n){return Object(r["openBlock"])(),Object(r["createBlock"])("span",{key:n},[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.product_name.name),1),n!=t.data.products.length-1?(Object(r["openBlock"])(),Object(r["createBlock"])("span",te,", ")):Object(r["createCommentVNode"])("",!0)])})),128))])]})),default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{"data-field":"producer.name","data-type":"string",caption:"Nama Produsen"}),Object(r["createVNode"])(c,{"data-field":"products",caption:"Produk","cell-template":"cellTemplate"})]})),_:1},8,["data-source"])}var re=Object(r["defineComponent"])({components:{DxDataGrid:W["DxDataGrid"],DxColumn:W["DxColumn"],DxPaging:W["DxPaging"],DxPager:W["DxPager"],DxSorting:W["DxSorting"],DxHeaderFilter:W["DxHeaderFilter"],DxFilterRow:W["DxFilterRow"]},setup:function(e,t){var n=this,a=(t.emit,Object(r["ref"])(null)),o=Object(B["c"])();Object(r["onMounted"])((function(){console.log(a.value)}));var i=Object(r["inject"])("env"),c="".concat(i["VUE_APP_API_ENDPOINT"],"/distributor-regions/get-producers");"admin"===o.meta.role&&(c="".concat(i["VUE_APP_API_ENDPOINT"],"/distributors/").concat(o.params.distributor_id,"/producers"));var l=new Q.a({key:"producer.producer_code",load:function(e){return h["a"].get(c).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}});console.log(a);var u=function(){a.value.instance.refresh()},d=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:u.bind(n)}})};return{store:l,refreshDataGrid:u,onToolbarPreparing:d,root:a,route:o}}});re.render=ne;var ae=re,oe={id:null,distributor_id:null,regions_code:null,region_provinces_id:null,producer_area_city_id:null},ie=n("0999"),ce=n("2611"),le=Object(r["defineComponent"])({components:{DocumentForm:c["a"],DataGrid:ee,FormItem:N["a"],ProducerMappingDataGrid:ae},setup:function(e,t){var n=t.emit,a=Object(r["reactive"])(Object(H["a"])({},oe)),o={regions_code:{required:C["c"]},region_provinces_id:{required:C["c"]},producer_area_city_id:{required:C["c"]}},c=Object(P["d"])(),l=Object(B["c"])(),u=Object(ce["a"])(),d=c.state.auth.user,s=Object(R["a"])(o,Object(r["toRefs"])(a)),b=Object(ie["a"])(a),p=b.regions,f=b.getRegions,m=b.regionsOptionsLoading,v=b.regionProvinces,j=b.getRegionProvinces,h=b.regionProvincesOptionsLoading,y=b.regionProducerArea,_=b.getRegionProducerArea,k=b.regionProducerAreaOptionsLoading,w=Object(r["ref"])(!1),x=function(){var e=Object(r["toRefs"])(a);for(var t in oe)e[t].value=oe[t];s.value.$reset()},D=function(e){var t=Object(r["toRefs"])(a);for(var n in oe)Object.hasOwnProperty.call(e,n)&&(t[n].value=e[n])},V=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null==t){e.next=13;break}return D(t),$.value=!0,w.value=!0,e.next=6,f(!1);case 6:return e.next=8,j(t.regions_code,!1);case 8:return e.next=10,_(t.region_provinces_id,!1);case 10:null!=y.value&&($.value=!1),e.next=15;break;case 13:x(),w.value=!1;case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r["provide"])("updateFormData",V);var N=Object(r["ref"])(null),S=Object(r["ref"])(null);Object(r["onMounted"])(Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:console.log("dataGrid ref: ",N.value),null!=p&&($.value=!1);case 4:case"end":return e.stop()}}),e)}))));var $=Object(r["ref"])(!0),T=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.value.$touch(),s.value.$invalid?g.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):u.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a.id,t=Object(O["a"])(a,["id"]),t.distributor_id=d.distributor.id,$.value=!0,e.next=5,X["a"].updateDistributorRegions(a.id,t).then((function(e){g.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),x(),N.value.clearSelection(),N.value.refreshDataGrid(),S.value.refreshDataGrid()})).catch((function(e){g.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){$.value=!1,n("updated")}));case 5:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.value.$touch(),s.value.$invalid?g.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):u.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a.id,t=Object(O["a"])(a,["id"]),t.distributor_id=d.distributor.id,$.value=!0,e.next=5,X["a"].addDistributorRegions(t).then((function(e){g.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),x(),N.value.refreshDataGrid(),S.value.refreshDataGrid()})).catch((function(e){g.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){$.value=!1,n("updated")}));case 5:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{formData:a,validate:s,dataGrid:N,producerMappingDataGrid:S,updateMode:w,loading:$,save:T,add:F,resetFormData:x,route:l,regions:p,getRegions:f,regionsOptionsLoading:m,regionProvinces:v,getRegionProvinces:j,regionProvincesOptionsLoading:h,regionProducerArea:y,getRegionProducerArea:_,regionProducerAreaOptionsLoading:k}},data:function(){return{}}});n("0793");le.render=I;var ue=le,de={class:"intro-y col-span-12 lg:col-span-12"},se={class:"p-5"},be={class:"grid grid-cols-1 mb-5"},pe={class:"grid grid-cols-1 mb-5"},fe={class:"grid grid-cols-2 gap-5"},me={class:"border p-3 rounded-lg flex flex-row items-center"},ve={class:"inline-flex items-center mr-4"},ge=Object(r["createVNode"])("span",{class:"ml-2"},"Pusat",-1),Oe={class:"inline-flex items-center"},je=Object(r["createVNode"])("span",{class:"ml-2"},"Cabang",-1),he={class:"mt-4 grid grid-cols-2 gap-5 pb-5 border-b"},ye={class:"intro-y input-form"},_e=Object(r["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"}," Status ",-1),ke={class:"intro-y input-form"},we=Object(r["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"}," Status Verifikasi ",-1),xe={class:"flex w-full px-5"},De={key:1,class:"ml-auto"},Ve={key:1};function Ce(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("el-option"),l=Object(r["resolveComponent"])("el-select"),u=Object(r["resolveComponent"])("form-item"),d=Object(r["resolveComponent"])("DataGrid"),s=Object(r["resolveComponent"])("document-form"),b=Object(r["resolveDirective"])("loading");return Object(r["openBlock"])(),Object(r["createBlock"])("div",de,[Object(r["withDirectives"])(Object(r["createVNode"])(s,{title:"Alamat Perusahaan",isRegional:!0,itemType:2},{default:Object(r["withCtx"])((function(n){n.bundleItemStatus;var a=n.allowManage;return[Object(r["createVNode"])("div",null,[Object(r["createVNode"])("div",se,[Object(r["createVNode"])("div",be,[Object(r["createVNode"])(u,{label:"Region","rules-text":"Required",validationData:e.validate.region_code},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{clearable:"",modelValue:e.formData.region_code,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.formData.region_code=t}),class:["form-control",{"border-theme-6":e.validate.region_code.$error}],filterable:""},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.distributorRegions,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(c,{key:e.code,label:e.name,value:e.code},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","class"])]})),_:1},8,["validationData"])]),Object(r["createVNode"])("div",pe,[Object(r["createVNode"])(u,{label:"Alamat","rules-text":"Required",validationData:e.validate.full_address},{default:Object(r["withCtx"])((function(){return[Object(r["withDirectives"])(Object(r["createVNode"])("textarea",{placeholder:"Alamat",class:["form-control",{"border-theme-6":e.validate.full_address.$error}],"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.validate.full_address.$model=t})},null,2),[[r["vModelText"],e.validate.full_address.$model]])]})),_:1},8,["validationData"])]),Object(r["createVNode"])("div",fe,[Object(r["createVNode"])(u,{label:"Propinsi","rules-text":"Required",validationData:e.validate.province_id,class:"intro-y"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{onChange:t[3]||(t[3]=function(t){return e.getCities(t)}),modelValue:e.formData.province_id,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.formData.province_id=t}),class:["form-control",{"border-theme-6":e.validate.province_id.$error}],filterable:""},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.provinces,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(c,{key:e.province_id,label:e.province_name,value:e.province_id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","class"])]})),_:1},8,["validationData"]),Object(r["createVNode"])(u,{label:"Kota/Kabupaten","rules-text":"Required",validationData:e.validate.city_id,class:"intro-y"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{onChange:t[5]||(t[5]=function(t){return e.getDistricts(t)}),modelValue:e.formData.city_id,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.formData.city_id=t}),class:["form-control",{"border-theme-6":e.validate.city_id.$error}],disabled:null==e.formData.province_id,loading:e.cityOptionsLoading,filterable:""},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.cities,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(c,{key:e.city_id,label:e.city_type+" "+e.city_name,value:e.city_id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","class","disabled","loading"])]})),_:1},8,["validationData"]),Object(r["createVNode"])(u,{key:"",label:"Kecamatan","rules-text":"Required",validationData:e.validate.district_id,class:"intro-y"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{onChange:t[7]||(t[7]=function(t){return e.getVillages(t)}),modelValue:e.formData.district_id,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.formData.district_id=t}),class:["form-control",{"border-theme-6":e.validate.district_id.$error}],disabled:null==e.formData.city_id,loading:e.districtOptionsLoading,filterable:""},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.districts,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(c,{key:e.district_id,label:e.district_name,value:e.district_id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","class","disabled","loading"])]})),_:1},8,["validationData"]),Object(r["createVNode"])(u,{label:"Kelurahan/Desa - Kode Pos","rules-text":"Required",validationData:e.validate.village_id,class:"intro-y"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{modelValue:e.formData.village_id,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.formData.village_id=t}),class:["form-control",{"border-theme-6":e.validate.village_id.$error}],disabled:null==e.formData.district_id,loading:e.villageOptionsLoading,filterable:""},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.villages,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(c,{key:e.village_id,label:"".concat(e.village_name," - ").concat(e.postal_code),value:e.village_id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","class","disabled","loading"])]})),_:1},8,["validationData"]),Object(r["createVNode"])(u,{label:"No Telepon",validationData:e.validate.phone_number,class:"intro-y"},{default:Object(r["withCtx"])((function(){return[Object(r["withDirectives"])(Object(r["createVNode"])("input",{"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.formData.phone_number=t}),class:["form-control",{"border-theme-6":e.validate.phone_number.$error}],placeholder:"+62210000"},null,2),[[r["vModelText"],e.formData.phone_number]])]})),_:1},8,["validationData"]),Object(r["createVNode"])(u,{label:"Pusat/Cabang","rules-text":"",class:"intro-y"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("div",me,[Object(r["createVNode"])("label",ve,[Object(r["withDirectives"])(Object(r["createVNode"])("input",{"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.formData.is_headquarter=t}),value:!0,type:"radio",class:"form-radio h-5 w-5"},null,512),[[r["vModelRadio"],e.formData.is_headquarter]]),ge]),Object(r["createVNode"])("label",Oe,[Object(r["withDirectives"])(Object(r["createVNode"])("input",{"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.formData.is_headquarter=t}),value:!1,type:"radio",class:"form-radio h-5 w-5"},null,512),[[r["vModelRadio"],e.formData.is_headquarter]]),je])])]})),_:1})]),Object(r["createVNode"])("div",he,[Object(r["createVNode"])("div",ye,[_e,Object(r["createVNode"])("input",{value:e.formData.is_active?"Active":"Not Activated",type:"text",readonly:"",class:"form-control"},null,8,["value"])]),Object(r["createVNode"])("div",ke,[we,Object(r["createVNode"])("input",{value:e.formData.verification_status,type:"text",readonly:"",class:"form-control"},null,8,["value"])])])]),Object(r["createVNode"])("div",xe,[e.updateMode?(Object(r["openBlock"])(),Object(r["createBlock"])("button",{key:0,type:"button",class:"btn btn-outline-secondary mr-2",onClick:t[13]||(t[13]=function(){var t;return e.dataGrid.clearSelection&&(t=e.dataGrid).clearSelection.apply(t,arguments)})}," Clear Selection ")):Object(r["createCommentVNode"])("",!0),"distributor"==e.route.meta.role&&a?(Object(r["openBlock"])(),Object(r["createBlock"])("div",De,[e.updateMode?(Object(r["openBlock"])(),Object(r["createBlock"])("button",{key:0,disabled:e.loading,class:[{"cursor-not-allowed":e.loading},"btn btn-primary w-24 mr-2"],type:"button",onClick:t[14]||(t[14]=function(){return e.save&&e.save.apply(e,arguments)})}," Save ",10,["disabled"])):(Object(r["openBlock"])(),Object(r["createBlock"])("div",Ve,[Object(r["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-2",onClick:t[15]||(t[15]=function(){return e.resetFormData&&e.resetFormData.apply(e,arguments)})}," Reset "),Object(r["createVNode"])("button",{disabled:e.loading,class:[{"cursor-not-allowed":e.loading},"btn bg-theme-9 text-white w-24"],type:"button",onClick:t[16]||(t[16]=function(){return e.add&&e.add.apply(e,arguments)})}," Add ",10,["disabled"])]))])):Object(r["createCommentVNode"])("",!0)]),Object(r["createVNode"])(d,{allowManage:a,ref:"dataGrid",class:"m-5"},null,8,["allowManage"])])]})),_:1},512),[[b,e.loading]])])}var Re={key:0},Ne={key:1},Pe={key:0},Be={key:1};function Se(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("DxColumn"),l=Object(r["resolveComponent"])("DxFilterRow"),u=Object(r["resolveComponent"])("DxHeaderFilter"),d=Object(r["resolveComponent"])("DxPaging"),s=Object(r["resolveComponent"])("DxPager"),b=Object(r["resolveComponent"])("DxDataGrid");return Object(r["openBlock"])(),Object(r["createBlock"])("div",null,[Object(r["createVNode"])(b,{ref:"root","data-source":e.store,"show-borders":!0,"remote-operations":!0,selection:{mode:"single"},onSelectionChanged:e.onSelectionChanged,"column-auto-width":!0,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)})},{hqOrBranchTemplate:Object(r["withCtx"])((function(e){var t=e.data;return[t.data.is_headquarter?(Object(r["openBlock"])(),Object(r["createBlock"])("span",Re,"Pusat")):(Object(r["openBlock"])(),Object(r["createBlock"])("span",Ne,"Cabang"))]})),statusAktivasiCellTemplate:Object(r["withCtx"])((function(e){var t=e.data;return[t.data.is_active?(Object(r["openBlock"])(),Object(r["createBlock"])("span",Pe," Active ")):(Object(r["openBlock"])(),Object(r["createBlock"])("span",Be," Non-Active "))]})),cellTemplate:Object(r["withCtx"])((function(t){var n=t.data;return[n.data.is_active?(Object(r["openBlock"])(),Object(r["createBlock"])("button",{key:1,onClick:function(t){return e.deactivate(n.data.id)},class:"btn btn-sm bg-theme-6 rounded-lg text-white"}," Deactivate ",8,["onClick"])):(Object(r["openBlock"])(),Object(r["createBlock"])("button",{key:0,onClick:function(t){return e.activate(n.data.id)},class:"btn btn-sm bg-theme-9 rounded-lg text-white"}," Activate ",8,["onClick"]))]})),default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{"data-field":"full_address","data-type":"string",caption:"Alamat","allow-header-filtering":!1}),Object(r["createVNode"])(c,{"data-field":"city.city_name","data-type":"string",caption:"Kota","allow-header-filtering":!1}),Object(r["createVNode"])(c,{"data-field":"district.district_name","data-type":"string",caption:"Kecamatan","allow-header-filtering":!1}),Object(r["createVNode"])(c,{"data-field":"village.postal_code","data-type":"string",caption:"Kode Pos","allow-header-filtering":!1}),Object(r["createVNode"])(c,{"data-field":"region.name","data-type":"string",caption:"Region","header-filter":{dataSource:e.availableRegions}},null,8,["header-filter"]),Object(r["createVNode"])(c,{"data-field":"is_headquarter","data-type":"boolean",caption:"Pusat/Cabang","cell-template":"hqOrBranchTemplate","allow-header-filtering":!0,"allow-filtering":!1,"header-filter":{dataSource:[{text:"Pusat",value:!0},{text:"Cabang",value:!1}]}}),Object(r["createVNode"])(l,{visible:!0}),Object(r["createVNode"])(u,{visible:!0}),"distributor"==e.route.meta.role&&e.allowManage?(Object(r["openBlock"])(),Object(r["createBlock"])(c,{key:0,allowFiltering:!1,"data-field":"is_active",caption:"Status Aktivasi","data-type":"boolean","cell-template":"statusAktivasiCellTemplate"})):Object(r["createCommentVNode"])("",!0),"distributor"==e.route.meta.role&&e.allowManage?(Object(r["openBlock"])(),Object(r["createBlock"])(c,{key:1,allowFiltering:!1,width:100,"data-field":"id",caption:"Aksi","cell-template":"cellTemplate"})):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(d,{"page-size":5}),Object(r["createVNode"])(s,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20]})]})),_:1},8,["data-source","onSelectionChanged"])])}n("d81d");var $e=Object(r["defineComponent"])({components:{DxDataGrid:W["DxDataGrid"],DxColumn:W["DxColumn"],DxPaging:W["DxPaging"],DxPager:W["DxPager"],DxSorting:W["DxSorting"],DxHeaderFilter:W["DxHeaderFilter"],DxFilterRow:W["DxFilterRow"]},props:["allowManage"],setup:function(e,t){var n=this;t.emit;console.log(e);var a=Object(r["ref"])(null),o=Object(B["c"])();function c(e){return void 0!==e&&null!==e&&""!==e}Object(r["onMounted"])((function(){}));var l=Object(r["inject"])("env"),u=new Q.a({key:"id",load:function(e){var t="?";["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(n){n in e&&c(e[n])&&(t+="".concat(n,"=").concat(JSON.stringify(e[n]),"&"))})),t=t.slice(0,-1);var n="".concat(l["VUE_APP_API_ENDPOINT"],"/company-address").concat(t);return"admin"==o.meta.role&&(n="".concat(l["VUE_APP_API_ENDPOINT"],"/distributor/").concat(o.params.distributor_id,"/item-details-data/item-type/2")),h["a"].get(n).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),d=Object(r["inject"])("updateFormData"),s=function(e){var t=e.selectedRowsData;d(t[0])},b=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,D(t).then((function(e){g.a.success({title:"Success",position:"bottom-right"}),f()})).catch((function(e){g.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,V(t).then((function(e){g.a.success({title:"Success",position:"bottom-right"}),f()})).catch((function(e){g.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){a.value.instance.refresh()},m=function(){a.value.instance.clearSelection()},v=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:f.bind(n)}})},O=Object(r["inject"])("distributorRegions"),j=Object(r["computed"])((function(){return O.value.map((function(e){return{text:e.name,value:["region_code","=",e.code]}}))}));return{store:u,onSelectionChanged:s,activate:b,deactivate:p,onToolbarPreparing:v,refreshDataGrid:f,clearSelection:m,root:a,route:o,availableRegions:j}}});$e.render=Se;var Te=$e,Fe={id:null,distributor_id:null,full_address:null,province_id:null,city_id:null,district_id:null,village_id:null,phone_number:null,is_headquarter:!1,is_active:!0,verification_status:null,region_code:null},Ae=(n("1e9c"),n("b405")),qe=Object(r["defineComponent"])({components:{DocumentForm:c["a"],DataGrid:Te,FormItem:N["a"]},setup:function(){var e=Object(r["reactive"])(Object(H["a"])({},Fe)),t={province_id:{required:C["c"]},city_id:{required:C["c"]},district_id:{required:C["c"]},village_id:{required:C["c"]},phone_number:{},full_address:{required:C["c"]},region_code:{required:C["c"]}},n=Object(P["d"])(),a=n.state.auth.user,o=Object(B["c"])(),c=Object(ce["a"])(),l=Object(R["a"])(t,Object(r["toRefs"])(e)),u=Object(ie["a"])(e),d=u.provinces,s=u.cities,b=u.districts,p=u.villages,f=u.getProvinces,m=u.getCities,v=u.getDistricts,j=u.getVillages,h=u.provinceOptionsLoading,y=u.cityOptionsLoading,_=u.districtOptionsLoading,k=u.villageOptionsLoading,D=Object(Ae["a"])(a),V=D.distributorRegions,N=D.getProposedRegions;Object(r["provide"])("distributorRegions",V);var S=Object(r["ref"])(!1),$=function(){var t=Object(r["toRefs"])(e);for(var n in Fe)t[n].value=Fe[n];l.value.$reset()},T=function(t){var n=Object(r["toRefs"])(e);for(var a in Fe)Object.hasOwnProperty.call(t,a)&&(n[a].value=t[a]);console.log(e)},F=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null==t){e.next=15;break}return T(t),q.value=!0,S.value=!0,e.next=6,f(!1);case 6:return e.next=8,m(t.province_id,!1);case 8:return e.next=10,v(t.city_id,!1);case 10:return e.next=12,j(t.district_id,!1);case 12:null!=p.value&&(q.value=!1),e.next=17;break;case 15:$(),S.value=!1;case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r["provide"])("updateFormData",F);var A=Object(r["ref"])(null);Object(r["onMounted"])(Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:null!=d.value&&(q.value=!1);case 3:case"end":return e.stop()}}),e)}))));var q=Object(r["ref"])(!0),G=function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:l.value.$touch(),l.value.$invalid?g.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):c.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.id,n=Object(O["a"])(e,["id"]),n.distributor_id=a.distributor.id,q.value=!0,t.next=5,x(e.id,n).then((function(e){g.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),$(),A.value.clearSelection(),A.value.refreshDataGrid()})).catch((function(e){g.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){q.value=!1}));case 5:case"end":return t.stop()}}),t)})))).catch((function(){}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),L=function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:l.value.$touch(),l.value.$invalid?g.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):c.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.id,n=Object(O["a"])(e,["id"]),n.distributor_id=a.distributor.id,q.value=!0,t.next=5,w(n).then((function(e){g.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),$(),A.value.refreshDataGrid()})).catch((function(e){g.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){q.value=!1}));case 5:case"end":return t.stop()}}),t)})))).catch((function(){}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{formData:e,validate:l,provinces:d,cities:s,districts:b,villages:p,provinceOptionsLoading:h,cityOptionsLoading:y,districtOptionsLoading:_,villageOptionsLoading:k,dataGrid:A,getProvinces:f,getCities:m,getDistricts:v,getVillages:j,updateMode:S,loading:q,save:G,add:L,resetFormData:$,route:o,distributorRegions:V,getProposedRegions:N}},data:function(){return{kecamatan:[{id:1,name:"Kecamatan 1"},{id:2,name:"Kecamatan 2"},{id:3,name:"Kecamatan 3"}],provinsi:[{id:1,name:"Provinsi 1"},{id:2,name:"Provinsi 2"},{id:3,name:"Provinsi 3"}],desa:[{id:1,name:"Desa 1"},{id:2,name:"Desa 2"},{id:3,name:"Desa 3"}],kota:[{id:1,name:"Kota 1"},{id:2,name:"Kota 2"},{id:3,name:"Kota 3"}],kode_pos:[{id:1,name:"Kode Pos 1"},{id:2,name:"Kode Pos 2"},{id:3,name:"Kode Pos 3"}]}}});qe.render=Ce;var Ge=qe,Le=Object(r["defineComponent"])({components:{DocumentForm:c["a"],BusinessName:T,BusinessAddress:Ge,DistributorRegions:ue},setup:function(){var e=Object(B["c"])(),t=Object(r["ref"])(!1);function n(){return a.apply(this,arguments)}function a(){return a=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.value.getProposedRegions();case 2:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}return{route:e,businessAddressPanel:t,onDistributorRegionUpdated:n}}});Le.render=o;t["default"]=Le},ac68:function(e,t,n){},b405:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("1da1"),a=(n("96cf"),n("72dd")),o=n("6eb3"),i=n("6c02");function c(e,t){var n=Object(a["p"])([]),c=Object(a["p"])([]),l=Object(a["p"])([]),u=Object(i["c"])(),d="";function s(e){return b.apply(this,arguments)}function b(){return b=Object(r["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.province_id=null,t.city_id=null,!n){e.next=5;break}return e.next=5,o["a"].getProposedProvinces(d,n).then((function(e){c.value=e.data.data}));case 5:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function p(e,t){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(regeneratorRuntime.mark((function e(n,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.city_id=null,!n||!r){e.next=4;break}return e.next=4,o["a"].getProposedCities(d,n,r).then((function(e){l.value=e.data.data}));case 4:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function m(){return v.apply(this,arguments)}function v(){return v=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].getProposedRegions(d).then((function(e){n.value=e.data.data}));case 2:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}return Object(a["m"])(Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return d="admin"!=u.meta.role?e.distributor.id:u.params.distributor_id,t.next=3,m();case 3:case"end":return t.stop()}}),t)})))),{distributorRegions:n,distributorProvinces:c,distributorCities:l,onRegionChanged:s,onProvinceChanged:p,getProposedRegions:m}}},d81d:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").map,o=n("1dde"),i=o("map");r({target:"Array",proto:!0,forced:!i},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},fb27:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return p}));var r=n("c953"),a="/distributor-regions",o=function(){return r["a"].get(a+"/regions")},i=function(){return r["a"].get(a+"/regions_by_vp")},c=function(){return r["a"].get(a+"/regions_by_wilayah")},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r["a"].get(a+"/regions-province/".concat(e))},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r["a"].get(a+"/producer-area/".concat(e))},d=function(e){return r["a"].post(a,e)},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return r["a"].put(a+"/".concat(e),t)},b=function(e){return r["a"].delete(a+"/".concat(e))},p=function(e){return r["a"].post(a+"/".concat(e,"/verify"))};t["a"]={regions:o,regions_by_vp:i,regions_by_wilayah:c,regionProvinces:l,regionProducerArea:u,addDistributorRegions:d,updateDistributorRegions:s,deleteDistributorRegion:b,verifyDistributorRegion:p}}}]);