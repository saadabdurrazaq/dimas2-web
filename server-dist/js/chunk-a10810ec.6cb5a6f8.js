(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a10810ec"],{2068:function(e,t,n){"use strict";n.r(t);n("4de4"),n("99af");var r=n("7a23"),a={class:"p-5"},o={class:"grid grid-cols-2 gap-4 mb-4"};function i(e,t,n,i,c,u){var d=Object(r["resolveComponent"])("el-option"),l=Object(r["resolveComponent"])("el-select"),s=Object(r["resolveComponent"])("form-item"),p=Object(r["resolveComponent"])("data-grid"),b=Object(r["resolveComponent"])("el-tab-pane"),f=Object(r["resolveComponent"])("el-tabs"),g=Object(r["resolveComponent"])("document-form");return Object(r["openBlock"])(),Object(r["createBlock"])(g,{title:"List Gudang Distributor"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("div",a,[Object(r["createVNode"])("div",o,[Object(r["createVNode"])(s,{label:"Propinsi"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{class:"form-control",modelValue:e.filter.provinceId,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.filter.provinceId=t}),onChange:e.getCities,filterable:""},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,{value:-1,label:"Semua Propinsi"}),(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.provinces,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(d,{label:e.provinces.province_name,value:e.province_id,key:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"])]})),_:1}),Object(r["createVNode"])(s,{label:"Kab/Kota"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{class:"form-control",modelValue:e.filter.cityId,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.filter.cityId=t}),onChange:e.updateTable,filterable:""},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,{value:-1,label:"Semua Kab/Kota"}),(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.cities,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(d,{label:"".concat(e.cities.city_type," ").concat(e.cities.city_name),value:e.city_id,key:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"])]})),_:1})]),Object(r["createVNode"])(f,{type:"border-card"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(b,{label:"List Gudang"},{default:Object(r["withCtx"])((function(){return[null!=e.filter.regionCode?(Object(r["openBlock"])(),Object(r["createBlock"])(p,{key:0,registrationPeriod:e.filter.periodId,filter:e.filter},null,8,["registrationPeriod","filter"])):Object(r["createCommentVNode"])("",!0)]})),_:1})]})),_:1})])]})),_:1})}var c=n("1da1"),u=(n("b0c0"),n("96cf"),n("72dd")),d=n("c45b"),l={class:"text-center"},s={class:"text-center"},p={class:"text-center"};function b(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("DxFilterRow"),u=Object(r["resolveComponent"])("DxColumn"),d=Object(r["resolveComponent"])("DxPaging"),b=Object(r["resolveComponent"])("DxPager"),f=Object(r["resolveComponent"])("DxDataGrid");return Object(r["openBlock"])(),Object(r["createBlock"])(f,{ref:"root","data-source":e.customStore,"show-borders":!0,"remote-operations":{paging:!0,filtering:!0,sorting:!0},"allow-column-resizing":!0,"column-resizing-mode":"widget",onSelectionChanged:e.onSelectionChanged,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)})},{suratIjinGudang:Object(r["withCtx"])((function(t){var n=t.data;return[Object(r["createVNode"])("div",l,[Object(r["createVNode"])("a",{href:e.env["VUE_APP_API_ENDPOINT"]+"/files?filePath="+n.data.document_file_path,class:"btn btn-sm bg-theme-9 rounded-lg text-white",target:"_blank"},"File",8,["href"])])]})),cityTemplate:Object(r["withCtx"])((function(e){var t=e.data;return[Object(r["createVNode"])("span",null,Object(r["toDisplayString"])(t.data.city.city_type)+" "+Object(r["toDisplayString"])(t.data.city.city_name),1)]})),warehousePhoto:Object(r["withCtx"])((function(t){var n=t.data;return[Object(r["createVNode"])("div",s,[Object(r["createVNode"])("a",{href:e.env["VUE_APP_API_ENDPOINT"]+"/files?filePath="+n.data.warehouse_photo_file_path_front,class:"btn btn-sm bg-theme-9 rounded-lg text-white",target:"_blank"},"Tampak Depan",8,["href"]),Object(r["createVNode"])("a",{href:e.env["VUE_APP_API_ENDPOINT"]+"/files?filePath="+n.data.warehouse_photo_file_path_inside,class:"btn btn-sm bg-theme-9 rounded-lg text-white",target:"_blank"},"Tampak Dalam",8,["href"])])]})),warehouseMaps:Object(r["withCtx"])((function(e){var t=e.data;return[Object(r["createVNode"])("div",p,[Object(r["createVNode"])("a",{href:"https://maps.google.com/maps?q=".concat(t.data.latitude,", ").concat(t.data.longitude,"&t=&z=13&ie=UTF8"),class:"btn btn-sm bg-theme-9 rounded-lg text-white",target:"_blank"},"Maps",8,["href"])])]})),default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{visible:!0}),Object(r["createVNode"])(u,{"data-field":"distributor.name","data-type":"string",caption:"Nama Distributor",fixed:!0,"fixed-position":"left",width:200}),Object(r["createVNode"])(u,{"data-field":"document_number","data-type":"string",caption:"Nomor Surat Ijin",width:150}),Object(r["createVNode"])(u,{"data-field":"document_file_path",caption:"Surat Ijin","cell-template":"suratIjinGudang",width:130,allowFiltering:!1}),Object(r["createVNode"])(u,{"data-field":"warehouse_name","data-type":"string",caption:"Nama Gudang",width:150}),Object(r["createVNode"])(u,{"data-field":"province.province_name","data-type":"string",caption:"Provinsi",width:150}),Object(r["createVNode"])(u,{"data-field":"city_id","data-type":"string",caption:"Kabupaten/Kota","cell-template":"cityTemplate",width:150}),Object(r["createVNode"])(u,{"data-field":"full_address","data-type":"string",caption:"Alamat Lengkap",width:250}),Object(r["createVNode"])(u,{"data-field":"postal_code","data-type":"string",caption:"Kode Pos",width:150}),Object(r["createVNode"])(u,{"data-field":"warehouse_photo_file_path_inside",caption:"Foto Gudang","cell-template":"warehousePhoto",width:250,allowFiltering:!1}),Object(r["createVNode"])(u,{"data-field":"latitude",caption:"Maps","cell-template":"warehouseMaps",width:130,allowFiltering:!1}),Object(r["createVNode"])(d,{"page-size":10}),Object(r["createVNode"])(b,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20,50]})]})),_:1},8,["data-source","onSelectionChanged"])}n("fb6a"),n("caad");var f=n("d30a"),g=n("2597"),v=n.n(g),m=n("c953"),h=(n("2388"),n("4360")),O=Object(r["defineComponent"])({components:{DxDataGrid:f["DxDataGrid"],DxColumn:f["DxColumn"],DxPaging:f["DxPaging"],DxPager:f["DxPager"],DxSorting:f["DxSorting"],DxHeaderFilter:f["DxHeaderFilter"],DxFilterRow:f["DxFilterRow"],DxMasterDetail:f["DxMasterDetail"]},props:["registrationPeriod","filter"],setup:function(e,t){var n=this,a=(t.emit,Object(h["b"])()),o=Object(r["ref"])(null);Object(r["onMounted"])((function(){}));function i(e){return void 0!==e&&null!==e&&""!==e}var c=Object(r["inject"])("env"),u=new v.a({key:"distributor_id",load:function(t){var n="?";return["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(e){e in t&&i(t[e])&&(n+="".concat(e,"=").concat(JSON.stringify(t[e]),"&"))})),n=n.slice(0,-1),n+="&registration_period=".concat(e.registrationPeriod),n+="&region_code=".concat(e.filter.regionCode),n+="&province_id=".concat(e.filter.provinceId),n+="&city_id=".concat(e.filter.cityId),m["a"].get("".concat(c["VUE_APP_API_ENDPOINT"],"/list-gudang-distributor").concat(n)).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),d=function(e){e.selectedRowsData},l=function(){o.value.instance.refresh()},s=function(){o.value.instance.clearSelection()},p=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:l.bind(n)}})},b=a.state.auth.user,f=function(t){return console.log(b),["svp_region","svp_pso_planning_management","sevp_marketing_ops","marketing_director"].includes(b.role.name)?{name:"admin-document-verification.distributor-profile.document-verification",params:{distributor_id:t.data.distributor_id},query:{registration_period:e.registrationPeriod.id}}:{name:"admin-document-verification.bundle",params:{distributor_id:t.data.distributor_id},query:{registration_period:e.registrationPeriod.id}}};return{customStore:u,onSelectionChanged:d,onToolbarPreparing:p,refreshDataGrid:l,clearSelection:s,root:o,linkToProcessDocument:f,user:b,env:c}}});O.render=b;var j=O,_=n("5502"),w=(n("56dd"),n("fb27")),x=Object(u["c"])({components:{DocumentForm:d["a"],DataGrid:j},setup:function(){var e=Object(u["p"])([]),t=Object(u["p"])([]),n=Object(u["p"])([]),r=Object(u["p"])([]),a=Object(_["d"])(),o=a.state.auth.user,i=Object(u["o"])({periodId:null,regionCode:null,provinceId:-1,cityId:-1});Object(u["m"])(Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:d();case 1:case"end":return e.stop()}}),e)}))));var d=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,w["a"].regions_by_vp(i.producerCode).then(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.value=n.data,"vp_sales_region"==o.role.name&&(i.regionCode=n.data[0].code),l();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null==i.regionCode){e.next=6;break}return i.provinceId=-1,i.cityId=-1,e.next=5,w["a"].regionProvinces(i.regionCode).then((function(e){n.value=e.data}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(-1==i.provinceId&&(i.cityId=-1),null==i.provinceId){e.next=5;break}return e.next=4,w["a"].regionProducerArea(i.provinceId).then((function(e){r.value=e.data}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",i);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{registrationPeriods:e,filter:i,regions:t,provinces:n,cities:r,getRegions:d,getProvinces:l,getCities:s,updateTable:p,user:o}}});x.render=i;t["default"]=x},2388:function(e,t,n){"use strict";var r=n("c953"),a="/company-management",o=function(){return r["a"].get(a)},i=function(e){return r["a"].post(a,e)},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return r["a"].put(a+"/".concat(e),t)},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return r["a"].put(a+"/".concat(e,"/activate"),t)},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return r["a"].put(a+"/".concat(e,"/deactivate"),t)};t["a"]={get:o,add:i,update:c,activate:u,deactivate:d}},"56dd":function(e,t,n){"use strict";var r=n("5530"),a=n("c953"),o=function(e){return a["a"].post("/registration-periods",Object(r["a"])({},e))},i=function(){return a["a"].get("/registration-periods/get-active")},c=function(){return a["a"].get("/registration-periods")},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a["a"].put("registration-periods/".concat(e,"/activate"))},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a["a"].put("registration-periods/".concat(e,"/deactivate"))};t["a"]={create:o,getActive:i,getAll:c,activate:u,deactivate:d}},fb27:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return b}));var r=n("c953"),a="/distributor-regions",o=function(){return r["a"].get(a+"/regions")},i=function(){return r["a"].get(a+"/regions_by_vp")},c=function(){return r["a"].get(a+"/regions_by_wilayah")},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r["a"].get(a+"/regions-province/".concat(e))},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r["a"].get(a+"/producer-area/".concat(e))},l=function(e){return r["a"].post(a,e)},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return r["a"].put(a+"/".concat(e),t)},p=function(e){return r["a"].delete(a+"/".concat(e))},b=function(e){return r["a"].post(a+"/".concat(e,"/verify"))};t["a"]={regions:o,regions_by_vp:i,regions_by_wilayah:c,regionProvinces:u,regionProducerArea:d,addDistributorRegions:l,updateDistributorRegions:s,deleteDistributorRegion:p,verifyDistributorRegion:b}}}]);