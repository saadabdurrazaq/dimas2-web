(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b9d101c"],{2388:function(e,t,n){"use strict";var o=n("c953"),r="/company-management",a=function(){return o["a"].get(r)},i=function(e){return o["a"].post(r,e)},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return o["a"].put(r+"/".concat(e),t)},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return o["a"].put(r+"/".concat(e,"/activate"),t)},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return o["a"].put(r+"/".concat(e,"/deactivate"),t)};t["a"]={get:a,add:i,update:c,activate:l,deactivate:d}},2611:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("72dd");function r(){return{$show:Object(o["e"])("$messageBox"),$prompt:Object(o["e"])("$prompt"),$alert:Object(o["e"])("$alert"),$confirm:Object(o["e"])("$confirm")}}},"30dd":function(e,t,n){"use strict";var o=n("c953"),r=function(e){return o["a"].post("/tonnage-allocations",e)},a=function(e){return o["a"].get("/get-allocation/tonnage".concat(e))};t["a"]={setAllocation:r,getAllocation:a}},"56dd":function(e,t,n){"use strict";var o=n("5530"),r=n("c953"),a=function(e){return r["a"].post("/registration-periods",Object(o["a"])({},e))},i=function(){return r["a"].get("/registration-periods/get-active")},c=function(){return r["a"].get("/registration-periods")},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r["a"].put("registration-periods/".concat(e,"/activate"))},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r["a"].put("registration-periods/".concat(e,"/deactivate"))};t["a"]={create:a,getActive:i,getAll:c,activate:l,deactivate:d}},"7db0":function(e,t,n){"use strict";var o=n("23e7"),r=n("b727").find,a=n("44d2"),i="find",c=!0;i in[]&&Array(1)[i]((function(){c=!1})),o({target:"Array",proto:!0,forced:c},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a(i)},"8cbe":function(e,t,n){"use strict";var o=n("c953"),r=function(){return o["a"].get("/regions")},a=function(){return o["a"].get("/producer")};t["a"]={getRegions:r,getProducers:a}},bf72:function(e,t,n){"use strict";n.r(t);n("4de4"),n("b0c0"),n("99af");var o=n("7a23"),r={class:"p-5"},a=Object(o["createVNode"])("p",null,"Periode Registrasi:",-1),i={class:"mb-4"},c={class:"grid grid-cols-3 gap-4 mb-4"},l={class:"grid grid-cols-2 gap-4 mb-4"},d={style:{"box-shadow":"0 2px 4px rgba(0, 0, 0, .24), 0 0 6px rgba(0, 0, 0, .08)",padding:"10px"}},u={style:{"box-shadow":"0 2px 4px rgba(0, 0, 0, .24), 0 0 6px rgba(0, 0, 0, .08)",padding:"10px"}};function s(e,t,n,s,p,b){var g=Object(o["resolveComponent"])("el-option"),m=Object(o["resolveComponent"])("el-select"),f=Object(o["resolveComponent"])("form-item"),O=Object(o["resolveComponent"])("data-grid"),j=Object(o["resolveComponent"])("el-tab-pane"),v=Object(o["resolveComponent"])("el-tabs"),h=Object(o["resolveComponent"])("distributor-recommendation-dialog"),k=Object(o["resolveComponent"])("document-form"),y=Object(o["resolveDirective"])("loading");return Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])(k,{title:"Rekomendasi Distributor"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("div",r,[a,Object(o["createVNode"])("div",i,[Object(o["createVNode"])(m,{class:"form-control",modelValue:e.filter.periodId,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.filter.periodId=t}),onChange:e.getAllocation},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.registrationPeriods,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(g,{key:e.id,value:e.id,label:e.period},null,8,["value","label"])})),128))]})),_:1},8,["modelValue","onChange"])]),Object(o["createVNode"])("div",c,[Object(o["createVNode"])(f,{label:"Region"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{class:"form-control",modelValue:e.filter.regionCode,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.filter.regionCode=t}),disabled:null==e.filter.producerCode||-1==e.filter.producerCode,onChange:e.getProvinces},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(g,{value:-1,label:"Semua Region"}),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.regions,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(g,{label:e.name,value:e.code,key:e.name},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","disabled","onChange"])]})),_:1}),Object(o["createVNode"])(f,{label:"Propinsi"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{class:"form-control",modelValue:e.filter.provinceId,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.filter.provinceId=t}),onChange:e.getCities},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(g,{value:-1,label:"Semua Propinsi"}),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.provinces,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(g,{label:e.provinces.province_name,value:e.province_id,key:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"])]})),_:1}),Object(o["createVNode"])(f,{label:"Kab/Kota"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,{class:"form-control",modelValue:e.filter.cityId,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.filter.cityId=t}),onChange:e.updateTable},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(g,{value:-1,label:"Semua Kab/Kota"}),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.cities,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(g,{label:"".concat(e.cities.city_type," ").concat(e.cities.city_name),value:e.city_id,key:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"])]})),_:1})]),Object(o["createVNode"])("div",l,[Object(o["withDirectives"])(Object(o["createVNode"])("div",d,[Object(o["createVNode"])("b",null,"Total Alokasi Distributor : "+Object(o["toDisplayString"])(e.allocationData.distributorAllocation),1)],512),[[y,e.distributorAllocationLoading]]),Object(o["withDirectives"])(Object(o["createVNode"])("div",u,[Object(o["createVNode"])("b",null,"Total Alokasi Tonase : "+Object(o["toDisplayString"])(e.allocationData.tonnageAllocation),1)],512),[[y,e.tonnageAllocationLoading]])]),Object(o["createVNode"])(v,{type:"border-card"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(j,{label:"Belum Diproses",class:"pb-10"},{default:Object(o["withCtx"])((function(){return[e.filterFulfilled?(Object(o["openBlock"])(),Object(o["createBlock"])(O,{key:0,ref:"unallocatedDataGrid",onOpenAllocationFormDialog:e.openAllocationFormDialog,allocated:0,registrationPeriodId:e.filter.periodId,filter:e.filter},null,8,["onOpenAllocationFormDialog","registrationPeriodId","filter"])):Object(o["createCommentVNode"])("",!0)]})),_:1}),Object(o["createVNode"])(j,{label:"Sudah Diproses",class:"pb-10"},{default:Object(o["withCtx"])((function(){return[e.filterFulfilled?(Object(o["openBlock"])(),Object(o["createBlock"])(O,{key:0,ref:"allocatedDataGrid",allocated:1,registrationPeriodId:e.filter.periodId,filter:e.filter},null,8,["registrationPeriodId","filter"])):Object(o["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]),Object(o["createVNode"])(h,{dialogVisible:e.dialogVisible,"onUpdate:dialogVisible":[t[5]||(t[5]=function(t){return e.dialogVisible=t}),t[6]||(t[6]=function(t){return e.dialogVisible=t})],"onDialog:closed":e.refreshDataGrid,dialogData:e.dialogData,filter:e.filter},null,8,["dialogVisible","onDialog:closed","dialogData","filter"])]})),_:1},512)),[[y,e.loading]])}n("0cfa");var p=n("5040"),b=n.n(p),g=n("1da1"),m=(n("96cf"),n("7db0"),n("d3b7"),n("72dd")),f=n("c45b"),O=n("2022"),j={class:"grid grid-cols-1"},v=Object(o["createTextVNode"])(" Lihat Dokumen "),h={key:0},k={key:0},y={key:0,class:"grid grid-cols-2 gap-2"},V={key:1,style:{width:"300px"}},D=Object(o["createVNode"])("h4",{class:"font-semibold"},"Komponen Scoring",-1),x={class:"flex gap-4 bg-white p-4"},C=Object(o["createVNode"])("h4",null,"Total Alokasi Modal",-1),_=Object(o["createVNode"])("h4",null,"Total Kapasitas Gudang",-1),w=Object(o["createVNode"])("h4",null,"Total Luas Gudang",-1),N=Object(o["createVNode"])("h4",null,"Total Kapasitas Transportasi",-1),B={key:0},R=Object(o["createVNode"])("h4",null,"Recommendation Notes (SVP PSO Planning):",-1),S={key:0},A=Object(o["createVNode"])("h4",{class:"font-bold"},"Approval Notes (SEVP Marketing Operation):",-1);function I(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("DxFilterRow"),l=Object(o["resolveComponent"])("DxColumn"),d=Object(o["resolveComponent"])("router-link"),u=Object(o["resolveComponent"])("CheckIcon"),s=Object(o["resolveComponent"])("XIcon"),p=Object(o["resolveComponent"])("DxMasterDetail"),b=Object(o["resolveComponent"])("DxPaging"),g=Object(o["resolveComponent"])("DxPager"),m=Object(o["resolveComponent"])("DxDataGrid"),f=Object(o["resolveDirective"])("loading");return Object(o["openBlock"])(),Object(o["createBlock"])(m,{ref:"root","data-source":e.customStore,"show-borders":!0,"remote-operations":{paging:!0,filtering:!0,sorting:!1},selection:{mode:"single"},"allow-column-reordering":!0,"allow-column-resizing":!0,"column-auto-width":!0,onSelectionChanged:e.onSelectionChanged,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)})},{distributorNameCellTemplate:Object(o["withCtx"])((function(t){var n=t.data;return[Object(o["createVNode"])("div",j,[Object(o["createVNode"])("span",null,Object(o["toDisplayString"])(n.data.distributor.name),1),Object(o["createVNode"])(d,{to:e.linkToProcessDocument(n),target:"_blank",class:"text-xs underline text-blue-500 hover:text-blue-900 cursor-pointer"},{default:Object(o["withCtx"])((function(){return[v]})),_:2},1032,["to"])])]})),recomendationStatusCellTemplate:Object(o["withCtx"])((function(e){var t=e.data;return[Object(o["createVNode"])("div",null,[null===t.data.recommendation_status.is_recommended?(Object(o["openBlock"])(),Object(o["createBlock"])("span",h,"Belum Diproses")):Object(o["createCommentVNode"])("",!0),!0===t.data.recommendation_status.is_recommended?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:1,class:"text-theme-9"})):Object(o["createCommentVNode"])("",!0),!1===t.data.recommendation_status.is_recommended?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:2,class:"text-theme-6"})):Object(o["createCommentVNode"])("",!0)])]})),approvalStatusCellTemplate:Object(o["withCtx"])((function(e){var t=e.data;return[Object(o["createVNode"])("div",null,[null===t.data.recommendation_status.is_approved?(Object(o["openBlock"])(),Object(o["createBlock"])("span",k,"Belum Diproses")):Object(o["createCommentVNode"])("",!0),!0===t.data.recommendation_status.is_approved?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:1,class:"text-theme-9"})):Object(o["createCommentVNode"])("",!0),!1===t.data.recommendation_status.is_approved?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:2,class:"text-theme-6"})):Object(o["createCommentVNode"])("",!0)])]})),regionNameCellTemplate:Object(o["withCtx"])((function(e){var t=e.data;return[Object(o["createVNode"])("span",null,Object(o["toDisplayString"])(t.data.region.name),1)]})),provinceNameCellTemplate:Object(o["withCtx"])((function(e){var t=e.data;return[Object(o["createVNode"])("span",null,Object(o["toDisplayString"])(t.data.province.province_name),1)]})),kabupatenKotaCellTemplate:Object(o["withCtx"])((function(e){var t=e.data;return[Object(o["createVNode"])("span",null,Object(o["toDisplayString"])(t.data.city.city_type)+" "+Object(o["toDisplayString"])(t.data.city.city_name),1)]})),cellTemplate:Object(o["withCtx"])((function(t){var n=t.data;return[0==e.allocated?(Object(o["openBlock"])(),Object(o["createBlock"])("div",y,[Object(o["withDirectives"])(Object(o["createVNode"])("button",{onClick:function(t){return e.openAllocationFormDialog(n.data,!0)},class:"btn bg-theme-9 px-4 py-2 text-white text-xs"}," Recommend ",8,["onClick"]),[[f,e.get_allocation_loading]]),Object(o["createVNode"])("button",{onClick:function(t){return e.openAllocationFormDialog(n.data)},class:"btn bg-theme-6 px-4 py-2 text-white text-xs"}," Not Recommend ",8,["onClick"])])):(Object(o["openBlock"])(),Object(o["createBlock"])("div",V))]})),productTable:Object(o["withCtx"])((function(t){var n=t.data;return[Object(o["createVNode"])("div",null,[D,Object(o["createVNode"])("section",x,[Object(o["createVNode"])("div",null,[C,Object(o["createVNode"])("p",null,Object(o["toDisplayString"])(e.currencyFormatter.format(n.data.scoring_component.total_alokasi)),1)]),Object(o["createVNode"])("div",null,[_,Object(o["createVNode"])("p",null,Object(o["toDisplayString"])(n.data.scoring_component.total_kapasitas_gudang)+" Ton",1)]),Object(o["createVNode"])("div",null,[w,Object(o["createVNode"])("p",null,Object(o["toDisplayString"])(n.data.scoring_component.total_luas_gudang)+" M2",1)]),Object(o["createVNode"])("div",null,[N,Object(o["createVNode"])("p",null,Object(o["toDisplayString"])(n.data.scoring_component.total_kapasitas_transportasi)+" Ton",1)])]),e.allocated?(Object(o["openBlock"])(),Object(o["createBlock"])("section",B,[Object(o["createVNode"])("div",null,[R,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(n.data.recommendation_status.recommendation_notes),1)]),null!=n.data.recommendation_status.is_approved?(Object(o["openBlock"])(),Object(o["createBlock"])("div",S,[A,Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(n.data.recommendation_status.approval_notes),1)])):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0)])]})),default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{visible:!0}),Object(o["createVNode"])(l,{"data-field":"distributor.sap_id","data-type":"string",caption:"Customer ID"}),Object(o["createVNode"])(l,{width:300,"data-field":"distributor.name","data-type":"string",caption:"Distributor","cell-template":"distributorNameCellTemplate"}),e.allocated?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,allowFiltering:!1,"data-field":"status.is_recommended","data-type":"boolean",caption:"Recommended by SVP PSO PM","cell-template":"recomendationStatusCellTemplate"})):Object(o["createCommentVNode"])("",!0),e.allocated?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:1,allowFiltering:!1,"data-field":"status.is_approved","data-type":"boolean",caption:"Approved by SEVP Marketing Operation","cell-template":"approvalStatusCellTemplate"})):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(l,{"data-field":"region.name","data-type":"string",caption:"Region","cell-template":"regionNameCellTemplate"}),Object(o["createVNode"])(l,{"data-field":"province.province_name","data-type":"string",caption:"Propinsi","cell-template":"provinceNameCellTemplate"}),Object(o["createVNode"])(l,{"data-field":"city.city_name","data-type":"string",caption:"Kabupaten\\Kota","cell-template":"kabupatenKotaCellTemplate"}),Object(o["createVNode"])(l,{allowFiltering:!1,width:300,"data-field":"distributor_region_id",caption:"Action","cell-template":"cellTemplate"}),Object(o["createVNode"])(p,{class:"bg-white",enabled:!0,template:"productTable",autoExpandAll:!0}),Object(o["createVNode"])(b,{"page-size":20}),Object(o["createVNode"])(g,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20]})]})),_:1},8,["data-source","onSelectionChanged"])}n("fb6a"),n("caad");var P=n("d30a"),T=n("2597"),F=n.n(T),G=n("c953"),K=n("2388"),L=n("eeae"),M=n("2611"),E=n("4360"),$=Object(o["defineComponent"])({components:{DxDataGrid:P["DxDataGrid"],DxColumn:P["DxColumn"],DxPaging:P["DxPaging"],DxPager:P["DxPager"],DxSorting:P["DxSorting"],DxHeaderFilter:P["DxHeaderFilter"],DxFilterRow:P["DxFilterRow"],DxMasterDetail:P["DxMasterDetail"]},props:["registrationPeriodId","allocated","filter"],setup:function(e,t){var n=this,r=t.emit,a=Object(E["b"])(),i=Object(o["ref"])(null),c=(Object(o["onMounted"])((function(){})),Object(M["a"])());function l(e){return void 0!==e&&null!==e&&""!==e}var d=Object(o["inject"])("env"),u=new F.a({key:"distributor_region_id",load:function(t){var n="?";return["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(e){e in t&&l(t[e])&&(n+="".concat(e,"=").concat(JSON.stringify(t[e]),"&"))})),n=n.slice(0,-1),console.log(e.filter),n+="&registration_period=".concat(e.registrationPeriodId),n+="&region_code=".concat(e.filter.regionCode),n+="&producer_code=".concat(e.filter.producerCode),n+="&province_id=".concat(e.filter.provinceId),n+="&city_id=".concat(e.filter.cityId),n+="&allocated=".concat(e.allocated),G["a"].get("".concat(d["VUE_APP_API_ENDPOINT"],"/distributor-recommendations").concat(n)).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),s=function(e){e.selectedRowsData},p=function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,K["a"].activate(t).then((function(e){b.a.success({title:"Success",position:"bottom-right"}),f()})).catch((function(e){b.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,K["a"].deactivate(t).then((function(e){b.a.success({title:"Success",position:"bottom-right"}),f()})).catch((function(e){b.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){i.value.instance.refresh()},O=function(){i.value.instance.clearSelection()},j=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:f.bind(n)}})},v=a.state.auth.user,h=function(t){return["svp_region","svp_pso_planning_management","sevp_marketing_ops","marketing_director"].includes(v.role.name)?{name:"admin-document-verification.distributor-profile.document-verification",params:{distributor_id:t.data.distributor.id},query:{registration_period:e.registrationPeriodId}}:{name:"admin-document-verification.bundle",params:{distributor_id:t.data.distributor.id},query:{registration_period:e.registrationPeriodId}}},k=Object(o["ref"])(!1),y=function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return k.value=!0,e.next=3,L["a"].isAllocationFull(t,"recommendation").then((function(e){console.log(e),e.data.status_full?c.$confirm("Jumlah rekomendasi distributor di kabupaten ini telah terpenuhi. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(g["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:D(t,n);case 1:case"end":return e.stop()}}),e)})))).catch((function(){console.log("Aborted")})):D(t,n)})).catch((function(e){console.log(e)})).finally((function(){k.value=!1}));case 3:case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),V=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?y(e,t):D(e,t)},D=function(e,t){console.log(e),e.recommended=t,console.log(e),r("openAllocationFormDialog",e)},x=new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"});return{get_allocation_loading:k,customStore:u,onSelectionChanged:s,activate:p,deactivate:m,onToolbarPreparing:j,refreshDataGrid:f,clearSelection:O,root:i,linkToProcessDocument:h,openAllocationFormDialog:V,currencyFormatter:x}}});$.render=I;var U=$,q=n("56dd"),J=n("8cbe"),z=n("fb27"),H=n("30dd"),X={key:0},Q={class:"grid grid-cols-3 gap-4 mb-2"},W=Object(o["createVNode"])("label",{for:"produsen"},"Distributor",-1),Y={class:"text-base"},Z=Object(o["createVNode"])("label",{for:"produsen"},"Status",-1),ee={key:0,class:"text-base text-theme-9"},te={key:1,class:"text-base text-theme-6"},ne={class:"grid grid-cols-3 gap-4 mb-4"},oe=Object(o["createVNode"])("label",{for:"produsen"},"Untuk Produsen",-1),re={class:"text-base"},ae=Object(o["createVNode"])("label",{for:"propinsi"},"Di Propinsi",-1),ie={class:"text-base"},ce=Object(o["createVNode"])("label",{for:"kabupaten"},"Di Kabupaten",-1),le={class:"text-base"},de=Object(o["createVNode"])("div",{class:"border border-b-0 mb-4"},null,-1),ue={class:"grid grid-cols-1 gap-4"},se=Object(o["createVNode"])("label",{for:"produsen"},"Notes",-1),pe={class:"dialog-footer"},be=Object(o["createTextVNode"])("Cancel"),ge=Object(o["createTextVNode"])("Confirm");function me(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("el-button"),l=Object(o["resolveComponent"])("el-dialog");return Object(o["openBlock"])(),Object(o["createBlock"])(l,{"append-to-body":"",title:"Tetapkan Status Rekomendasi Distributor",modelValue:e.dialogVisible,width:"50%",onClose:e.closeDialog},{footer:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("span",pe,[Object(o["createVNode"])(c,{onClick:e.closeDialog},{default:Object(o["withCtx"])((function(){return[be]})),_:1},8,["onClick"]),Object(o["createVNode"])(c,{type:"primary",onClick:e.submitAllocationForm},{default:Object(o["withCtx"])((function(){return[ge]})),_:1},8,["onClick"])])]})),default:Object(o["withCtx"])((function(){return[null!=e.dialogData?(Object(o["openBlock"])(),Object(o["createBlock"])("div",X,[Object(o["createVNode"])("div",Q,[Object(o["createVNode"])("div",null,[W,Object(o["createVNode"])("p",Y,Object(o["toDisplayString"])(e.dialogData.distributor.business_entity_type)+" "+Object(o["toDisplayString"])(e.dialogData.distributor.name),1)]),Object(o["createVNode"])("div",null,[Z,e.dialogData.recommended?(Object(o["openBlock"])(),Object(o["createBlock"])("p",ee,"APPROVED")):(Object(o["openBlock"])(),Object(o["createBlock"])("p",te,"REJECTED"))])]),Object(o["createVNode"])("div",ne,[Object(o["createVNode"])("div",null,[oe,Object(o["createVNode"])("p",re,Object(o["toDisplayString"])(e.dialogData.producer.name),1)]),Object(o["createVNode"])("div",null,[ae,Object(o["createVNode"])("p",ie,Object(o["toDisplayString"])(e.dialogData.province.province_name),1)]),Object(o["createVNode"])("div",null,[ce,Object(o["createVNode"])("p",le,Object(o["toDisplayString"])(e.dialogData.city.city_type)+" "+Object(o["toDisplayString"])(e.dialogData.city.city_name),1)])]),de,Object(o["createVNode"])("div",ue,[Object(o["createVNode"])("div",null,[se,Object(o["withDirectives"])(Object(o["createVNode"])("textarea",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.dialogFormData.notes=t}),class:"form-control mt-2"},null,512),[[o["vModelText"],e.dialogFormData.notes]])])])])):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["modelValue","onClose"])}var fe=n("dd4e"),Oe=Object(m["c"])({props:{value:String,dialogVisible:{type:Boolean},dialogData:{required:!0},filter:{required:!0}},emits:["update:dialogVisible","dialog:closed"],setup:function(e,t){var n=t.emit,o=Object(m["o"])({notes:""}),r=Object(M["a"])(),a=function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.dialogData,e.filter,o),t.next=3,fe["a"].setRecommendation({registration_period_id:e.filter.periodId,distributor_id:e.dialogData.distributor_id,region_code:e.filter.regionCode,province_id:e.filter.provinceId,city_id:e.filter.cityId,producer_code:e.filter.producerCode,recommendation_notes:o.notes,is_recommended:e.dialogData.recommended,distributor_regions_id:e.dialogData.distributor_region_id}).then((function(e){console.log(e.data),b.a.success({title:"Success",position:"bottom-right"})})).catch((function(e){console.log(e),b.a.error({title:"Failed",position:"bottom-right"})}));case 3:i(),n("dialog:closed");case 5:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i=function(){o.notes="",n("update:dialogVisible",!1)};return{dialogFormData:o,submitAllocationForm:a,closeDialog:i}}});Oe.render=me;var je=Oe,ve=Object(m["c"])({components:{DocumentForm:f["a"],DataGrid:U,FormItem:O["a"],DistributorRecommendationDialog:je},setup:function(){var e=Object(m["p"])(!1),t=Object(m["p"])(!1),n=Object(m["p"])(!1),o=Object(m["o"])({id:null,period:null}),r=Object(m["p"])([]),a=Object(m["p"])([]),i=Object(m["p"])([]),c=Object(m["p"])([]),l=Object(m["p"])([]),d=Object(m["p"])(!1),u=Object(m["p"])(null),s=Object(m["o"])({notes:""}),p=Object(M["a"])(),f=Object(m["p"])(null),O=Object(m["p"])(null),j=Object(m["o"])({tonnageAllocation:1e3,distributorAllocation:150}),v=Object(m["o"])({periodId:null,producerCode:null,regionCode:-1,provinceId:-1,cityId:-1});Object(m["m"])(Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.value=!0,t.next=3,q["a"].getAll().then((function(e){if(r.value=e.data.data,r.value.length){var t=r.value.find((function(e){return e.active}));t&&(v.periodId=t.id)}}));case 3:return t.next=5,J["a"].getProducers().then(function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a.value=t.data,v.producerCode=t.data[0].producer_code,e.next=4,k();case 4:v.regionCode=-1,v.provinceId=-1,v.cityId=-1;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:h(),e.value=!1;case 7:case"end":return t.stop()}}),t)}))));var h=function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o="?",o+="registration_period=".concat(v.periodId),o+="&region_code=".concat(v.regionCode),o+="&province_id=".concat(v.provinceId),o+="&city_id=".concat(v.cityId),t.value=!0,n.value=!0,e.next=9,L["a"].getAllocation(o).then(function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:j.distributorAllocation=t.data;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){t.value=!1}));case 9:return e.next=11,H["a"].getAllocation(o).then(function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:j.tonnageAllocation=t.data;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){n.value=!1}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return v.provinceId=-1,v.cityId=-1,e.next=4,z["a"].regions().then(function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i.value=t.data,v.regionCode=t.data[0].code;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null==v.regionCode){e.next=7;break}return v.provinceId=-1,v.cityId=-1,h(),e.next=6,z["a"].regionProvinces(v.regionCode).then((function(e){c.value=e.data}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null==v.provinceId){e.next=6;break}return v.cityId=-1,h(),e.next=5,z["a"].regionProducerArea(v.provinceId).then((function(e){l.value=e.data}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return h(),e.abrupt("return",v);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(e){d.value=!0,u.value=e},C=function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:p.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(g["a"])(regeneratorRuntime.mark((function e(){var t,n,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=u.value,n=t.producer_code,o=t.province_id,r=t.city_id,e.next=3,L["a"].setAllocation({registration_period_id:v.periodId,producer_code:n,province_id:o,city_id:r,total_distributor:s.notes}).then((function(e){O.value.refreshDataGrid(),f.value.refreshDataGrid(),b.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),console.log(e)})).catch((function(e){console.log(e),b.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})}));case 3:s.notes="",u.value=null,d.value=!1;case 6:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){O.value.refreshDataGrid(),f.value.refreshDataGrid()};return{tonnageAllocationLoading:n,distributorAllocationLoading:t,allocationData:j,registrationPeriod:o,registrationPeriods:r,loading:e,producers:a,regions:i,provinces:c,cities:l,filter:v,getRegions:k,getProvinces:y,getCities:V,getAllocation:h,dialogVisible:d,openAllocationFormDialog:x,updateTable:D,dialogData:u,dialogFormData:s,submitAllocationForm:C,allocatedDataGrid:f,unallocatedDataGrid:O,refreshDataGrid:_,filterFulfilled:Object(m["a"])((function(){return null!=v.periodId&&null!=v.producerCode&&null!=v.regionCode&&null!=v.provinceId&&null!=v.cityId}))}}});ve.render=s;t["default"]=ve},dd4e:function(e,t,n){"use strict";var o=n("c953"),r=function(e){return o["a"].post("/distributor-recommendations",e)},a=function(e){return o["a"].post("/distributor-recommendation-approvals",e)};t["a"]={setRecommendation:r,setRecommendationApproval:a}},eeae:function(e,t,n){"use strict";var o=n("c953"),r=function(e){return o["a"].post("/distributor-allocations",e)},a=function(e){return o["a"].get("/get-allocation/distributor".concat(e))},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return o["a"].post("/distributor-allocations/".concat(t,"/is-allocation-full"),e)};t["a"]={setAllocation:r,getAllocation:a,isAllocationFull:i}},fb27:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return b}));var o=n("c953"),r="/distributor-regions",a=function(){return o["a"].get(r+"/regions")},i=function(){return o["a"].get(r+"/regions_by_vp")},c=function(){return o["a"].get(r+"/regions_by_wilayah")},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return o["a"].get(r+"/regions-province/".concat(e))},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return o["a"].get(r+"/producer-area/".concat(e))},u=function(e){return o["a"].post(r,e)},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return o["a"].put(r+"/".concat(e),t)},p=function(e){return o["a"].delete(r+"/".concat(e))},b=function(e){return o["a"].post(r+"/".concat(e,"/verify"))};t["a"]={regions:a,regions_by_vp:i,regions_by_wilayah:c,regionProvinces:l,regionProducerArea:d,addDistributorRegions:u,updateDistributorRegions:s,deleteDistributorRegion:p,verifyDistributorRegion:b}}}]);