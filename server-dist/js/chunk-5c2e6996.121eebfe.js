(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c2e6996"],{"0ccb":function(e,t,a){var n=a("50c4"),o=a("1148"),r=a("1d80"),i=Math.ceil,c=function(e){return function(t,a,c){var l,u,d=String(r(t)),s=d.length,p=void 0===c?" ":String(c),b=n(a);return b<=s||""==p?d:(l=b-s,u=o.call(p,i(l/p.length)),u.length>l&&(u=u.slice(0,l)),e?d+u:u+d)}};e.exports={start:c(!1),end:c(!0)}},1148:function(e,t,a){"use strict";var n=a("a691"),o=a("1d80");e.exports=function(e){var t=String(o(this)),a="",r=n(e);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(a+=t);return a}},"15fd":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a("a4d3"),a("b64b");function n(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}function o(e,t){if(null==e)return{};var a,o,r=n(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)a=i[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}},2611:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a("72dd");function o(){return{$show:Object(n["e"])("$messageBox"),$prompt:Object(n["e"])("$prompt"),$alert:Object(n["e"])("$alert"),$confirm:Object(n["e"])("$confirm")}}},"4d90":function(e,t,a){"use strict";var n=a("23e7"),o=a("0ccb").start,r=a("9a0c");n({target:"String",proto:!0,forced:r},{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},"6eb3":function(e,t,a){"use strict";a("99af");var n=a("c953"),o="/distributors",r=function(e){return n["a"].get("".concat(o,"/").concat(e,"/regions"))},i=function(e){return n["a"].get("".concat(o,"/").concat(e,"/proposed-regions"))},c=function(e,t){return n["a"].get("".concat(o,"/").concat(e,"/proposed-regions/").concat(t,"/provinces"))},l=function(e,t,a){return n["a"].get("".concat(o,"/").concat(e,"/proposed-regions/").concat(t,"/provinces/").concat(a,"/cities"))};t["a"]={show:r,getProposedRegions:i,getProposedProvinces:c,getProposedCities:l}},"9a0c":function(e,t,a){var n=a("342f");e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n)},b405:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a("1da1"),o=(a("96cf"),a("72dd")),r=a("6eb3"),i=a("6c02");function c(e,t){var a=Object(o["p"])([]),c=Object(o["p"])([]),l=Object(o["p"])([]),u=Object(i["c"])(),d="";function s(e){return p.apply(this,arguments)}function p(){return p=Object(n["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.province_id=null,t.city_id=null,!a){e.next=5;break}return e.next=5,r["a"].getProposedProvinces(d,a).then((function(e){c.value=e.data.data}));case 5:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function b(e,t){return m.apply(this,arguments)}function m(){return m=Object(n["a"])(regeneratorRuntime.mark((function e(a,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.city_id=null,!a||!n){e.next=4;break}return e.next=4,r["a"].getProposedCities(d,a,n).then((function(e){l.value=e.data.data}));case 4:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function f(){return v.apply(this,arguments)}function v(){return v=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].getProposedRegions(d).then((function(e){a.value=e.data.data}));case 2:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}return Object(o["m"])(Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return d="admin"!=u.meta.role?e.distributor.id:u.params.distributor_id,t.next=3,f();case 3:case"end":return t.stop()}}),t)})))),{distributorRegions:a,distributorProvinces:c,distributorCities:l,onRegionChanged:s,onProvinceChanged:b,getProposedRegions:f}}},d81d:function(e,t,a){"use strict";var n=a("23e7"),o=a("b727").map,r=a("1dde"),i=r("map");n({target:"Array",proto:!0,forced:!i},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},eee5:function(e,t,a){"use strict";a.r(t);var n=a("7a23"),o={class:"grid grid-cols-12 gap-6"};function r(e,t,a,r,i,c){var l=Object(n["resolveComponent"])("NibPerusahaan"),u=Object(n["resolveComponent"])("SiupPerusahaan"),d=Object(n["resolveComponent"])("SituPerusahaan");return Object(n["openBlock"])(),Object(n["createBlock"])("div",null,[Object(n["createVNode"])("div",o,[Object(n["createVNode"])(l),Object(n["createVNode"])(u),Object(n["createVNode"])(d)])])}var i={id:"nomor-induk-berusaha",class:"intro-y col-span-12 lg:col-span-12"},c={class:"p-5"},l={class:"mt-3"},u={class:"sm:grid grid-cols-2 gap-5"},d=Object(n["createTextVNode"])("Click to upload"),s={class:"mt-2 flex items-center gap-2"},p=Object(n["createTextVNode"])(" Berlaku Selamanya "),b={key:0,class:"intro-y input-form my-5"},m=Object(n["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"}," Status Expired ",-1),f={class:"mt-4 grid grid-cols-2 gap-5 pb-5 border-b"},v={class:"intro-y input-form"},O=Object(n["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"}," Status ",-1),j={class:"intro-y input-form"},h=Object(n["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"}," Status Verifikasi ",-1),g={class:"flex w-full px-5"},k={key:1,class:"ml-auto"},w={key:1};function _(e,t,a,o,r,_){var x=Object(n["resolveComponent"])("form-item"),y=Object(n["resolveComponent"])("el-button"),D=Object(n["resolveComponent"])("el-upload"),C=Object(n["resolveComponent"])("el-date-picker"),N=Object(n["resolveComponent"])("DataGrid"),V=Object(n["resolveComponent"])("document-form");return Object(n["openBlock"])(),Object(n["createBlock"])("div",i,[Object(n["createVNode"])(V,{title:"Tanda Daftar Perusahaan / Nomor Induk Berusaha",itemType:6},{default:Object(n["withCtx"])((function(a){var o=a.allowManage;return[Object(n["createVNode"])("div",c,[Object(n["createVNode"])("div",l,[Object(n["createVNode"])("div",u,[Object(n["createVNode"])(x,{label:"Nomor Dokumen",validationData:e.validate.document_number},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{type:"text",class:["form-control w-full",{"border-theme-6":e.validate.document_number.$error}],placeholder:"Nomor TDP/NIB","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.validate.document_number.$model=t})},null,2),[[n["vModelText"],e.validate.document_number.$model]])]})),_:1},8,["validationData"]),Object(n["createVNode"])(x,{label:"Lampiran",validationData:e.validate.file_path},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(D,{ref:"elUpload",class:"upload-demo",action:e.env["VUE_APP_API_ENDPOINT"]+"/files",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},"with-credentials":!0,"on-success":e.onUploadSuccees,"file-list":null!=e.formData.file_path?[{name:"file-nib",url:e.formData.file_path}]:[],"on-preview":e.handlePreview},{tip:Object(n["withCtx"])((function(){return[]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(y,{size:"small",type:"primary"},{default:Object(n["withCtx"])((function(){return[d]})),_:1})]})),_:1},8,["action","on-success","file-list","on-preview"])]})),_:1},8,["validationData"]),Object(n["createVNode"])(x,{label:"Berlaku Sampai",validationData:e.validate.valid_until},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(C,{modelValue:e.validate.valid_until.$model,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.validate.valid_until.$model=t}),class:["form-control",{"border-theme-6":e.validate.valid_until.$error}],placeholder:"YYYY/MM/DD",disabled:e.formData.is_valid_permanently},null,8,["modelValue","class","disabled"])]})),_:1},8,["validationData"]),Object(n["createVNode"])("div",s,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.validate.is_valid_permanently.$model=t}),type:"checkbox",class:"form-check-switch",onChange:t[4]||(t[4]=function(){return e.reset_validation&&e.reset_validation.apply(e,arguments)})},null,544),[[n["vModelCheckbox"],e.validate.is_valid_permanently.$model]]),p])])]),e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("div",b,[m,Object(n["createVNode"])("input",{value:e.formData.today_date>e.formData.six_before?e.formData.today_date>e.formData.valid_date?"Expired":"Akan Expired":"Belum Expired",disabled:"",type:"text",class:"form-control"},null,8,["value"])])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])("div",f,[Object(n["createVNode"])("div",v,[O,Object(n["createVNode"])("input",{value:e.formData.is_active?"Active":"Not Activated",type:"text",readonly:"",class:"form-control"},null,8,["value"])]),Object(n["createVNode"])("div",j,[h,Object(n["createVNode"])("input",{value:e.formData.verification_status,type:"text",readonly:"",class:"form-control"},null,8,["value"])])])]),Object(n["createVNode"])("div",g,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-outline-secondary mr-2",onClick:t[5]||(t[5]=function(){var t;return e.dataGrid.clearSelection&&(t=e.dataGrid).clearSelection.apply(t,arguments)})}," Clear Selection ")):Object(n["createCommentVNode"])("",!0),o?(Object(n["openBlock"])(),Object(n["createBlock"])("div",k,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-primary w-24 mr-2",onClick:t[6]||(t[6]=function(){return e.save&&e.save.apply(e,arguments)})}," Save ")):(Object(n["openBlock"])(),Object(n["createBlock"])("div",w,[Object(n["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-2",onClick:t[7]||(t[7]=function(){return e.resetFormData&&e.resetFormData.apply(e,arguments)})}," Reset "),Object(n["createVNode"])("button",{type:"button",class:"btn bg-theme-9 text-white w-24",onClick:t[8]||(t[8]=function(){return e.add&&e.add.apply(e,arguments)})}," Add ")]))])):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])(N,{allowManage:o,ref:"dataGrid",class:"m-5"},null,8,["allowManage"])]})),_:1})])}a("0cfa");var x=a("5040"),y=a.n(x),D=a("15fd"),C=a("1da1"),N=a("5530"),V=(a("96cf"),a("4d90"),a("1276"),a("ac1f"),a("d3b7"),a("c45b")),S={key:0},B={key:1},P={key:0},R={key:1};function T(e,t,a,o,r,i){var c=Object(n["resolveComponent"])("DxColumn"),l=Object(n["resolveComponent"])("DxPaging"),u=Object(n["resolveComponent"])("DxPager"),d=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(d,{ref:"root","data-source":e.store,"show-borders":!0,"remote-operations":!0,selection:{mode:"single"},onSelectionChanged:e.onSelectionChanged,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)})},{cellValidTemplate:Object(n["withCtx"])((function(e){var t=e.data;return[t.data.is_valid_permanently?(Object(n["openBlock"])(),Object(n["createBlock"])("span",S," Selamanya ")):(Object(n["openBlock"])(),Object(n["createBlock"])("span",B,Object(n["toDisplayString"])(t.data.valid_until),1))]})),statusAktivasiCellTemplate:Object(n["withCtx"])((function(e){var t=e.data;return[t.data.is_active?(Object(n["openBlock"])(),Object(n["createBlock"])("span",P," Active ")):(Object(n["openBlock"])(),Object(n["createBlock"])("span",R," Non-Active "))]})),cellTemplate:Object(n["withCtx"])((function(t){var a=t.data;return[a.data.is_active?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:1,onClick:function(t){return e.deactivate(a.data.id)},class:"btn btn-sm bg-theme-6 rounded-lg text-white"}," Deactivate ",8,["onClick"])):(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,onClick:function(t){return e.activate(a.data.id)},class:"btn btn-sm bg-theme-9 rounded-lg text-white"}," Activate ",8,["onClick"]))]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{"data-field":"document_number","data-type":"string",caption:"Nomor Dokumen"}),Object(n["createVNode"])(c,{"data-field":"valid_until",caption:"Berlaku Sampai","cell-template":"cellValidTemplate"}),Object(n["createVNode"])(c,{allowFiltering:!1,"data-field":"is_active",caption:"Status Aktivasi","data-type":"boolean","cell-template":"statusAktivasiCellTemplate"}),"distributor"==e.route.meta.role&&e.allowManage?(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:0,allowFiltering:!1,width:100,"data-field":"id",caption:"Aksi","cell-template":"cellTemplate"})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(l,{"page-size":5}),Object(n["createVNode"])(u,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20]})]})),_:1},8,["data-source","onSelectionChanged"])}a("99af"),a("fb6a");var $=a("d30a"),A=a("2597"),M=a.n(A),I=a("c953"),F="/document-nib",G=function(){return I["a"].get(F)},E=function(e){return I["a"].post(F,e)},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return I["a"].put(F+"/".concat(e),t)},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return I["a"].put(F+"/".concat(e,"/activate"),t)},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return I["a"].put(F+"/".concat(e,"/deactivate"),t)},Y={get:G,add:E,update:U,activate:q,deactivate:H},L=a("6c02"),K=Object(n["defineComponent"])({components:{DxDataGrid:$["DxDataGrid"],DxColumn:$["DxColumn"],DxPaging:$["DxPaging"],DxPager:$["DxPager"],DxSorting:$["DxSorting"],DxHeaderFilter:$["DxHeaderFilter"],DxFilterRow:$["DxFilterRow"]},props:["allowManage"],setup:function(e,t){var a=this,o=(t.emit,Object(n["ref"])(null)),r=Object(L["c"])();function i(e){return void 0!==e&&null!==e&&""!==e}Object(n["onMounted"])((function(){console.log(o.value)}));var c=Object(n["inject"])("env");console.log(c);var l=new M.a({key:"id",load:function(e){var t="?";["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(a){a in e&&i(e[a])&&(t+="".concat(a,"=").concat(JSON.stringify(e[a]),"&"))})),t=t.slice(0,-1);var a="".concat(c["VUE_APP_API_ENDPOINT"],"/document-nib").concat(t);return"admin"==r.meta.role&&(a="".concat(c["VUE_APP_API_ENDPOINT"],"/distributor/").concat(r.params.distributor_id,"/item-details-data/item-type/6")),I["a"].get(a).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),u=Object(n["inject"])("updateFormData");console.log(o);var d=function(e){var t=e.selectedRowsData;u(t[0])},s=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y.activate(t).then((function(e){y.a.success({title:"Success",position:"bottom-right"}),b()})).catch((function(e){y.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y.deactivate(t).then((function(e){y.a.success({title:"Success",position:"bottom-right"}),b()})).catch((function(e){y.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){o.value.instance.refresh()},m=function(){o.value.instance.clearSelection()},f=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:b.bind(a)}})};return{store:l,onSelectionChanged:d,activate:s,deactivate:p,onToolbarPreparing:f,refreshDataGrid:b,clearSelection:m,root:o,route:r}}});K.render=T;var z=K,X={id:null,document_number:null,file_path:null,valid_until:null,is_valid_permanently:!1,verification_status:null,is_active:null,today_date:null,six_before:null,valid_date:null},J=a("25a0"),W=a("e3e1"),Q=a("2022"),Z=a("5502"),ee=(a("af50"),a("2611")),te=Object(n["defineComponent"])({components:{DocumentForm:V["a"],FormItem:Q["a"],DataGrid:z},setup:function(){var e=Object(Z["d"])(),t=e.state.auth.user,a=Object(n["ref"])(!1),o=Object(n["ref"])(!1),r=Object(ee["a"])(),i=Object(n["ref"])(null),c=Object(n["ref"])(null),l=Object(n["inject"])("env"),u=Object(n["reactive"])(Object(N["a"])({},X)),d={document_number:{required:W["c"]},file_path:{required:W["c"]},valid_until:{},is_valid_permanently:{required:W["c"]}},s=Object(J["a"])(d,Object(n["toRefs"])(u)),p=function(){for(var e in X)u[e]=X[e];s.value.$reset()},b=function(e){if(!e.is_valid_permanently){var t=new Date,a=t.getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0");e.today_date=new Date(a).setHours(0,0,0,0);var o=e.valid_until.split("-"),r=parseInt(o[1])<=6?parseInt(o[0])-1:parseInt(o[0]),i=parseInt(o[1])-6<=0?parseInt(o[1])-6+12:parseInt(o[1])-6,c=r+"-"+i+"-"+o[2];e.six_before=new Date(c).setHours(0,0,0,0),e.valid_date=new Date(e.valid_until).setHours(0,0,0,0)}var l=Object(n["toRefs"])(u);for(var d in X)Object.hasOwnProperty.call(e,d)&&(l[d].value=e[d])},m=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!=t?(b(t),a.value=!0):(p(),a.value=!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.value.$touch(),s.value.$invalid?y.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):r.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(C["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.id,a=Object(D["a"])(u,["id"]),a.distributor_id=t.distributor.id,o.value=!0,e.next=5,Y.update(u.id,a).then((function(e){y.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),i.value.clearSelection(),i.value.refreshDataGrid(),p()})).catch((function(e){y.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){o.value=!1}));case 5:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Object(n["nextTick"])((function(){s.value.$touch(),console.log(s.value),s.value.$invalid?(console.log(u),y.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})):r.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(C["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.id,a=Object(D["a"])(u,["id"]),console.log(a),a.distributor_id=t.distributor.id,console.log(a),o.value=!0,e.next=7,Y.add(a).then((function(e){y.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),c.value.clearFiles(),i.value.refreshDataGrid(),p()})).catch((function(e){console.log(e),y.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){o.value=!1}));case 7:case"end":return e.stop()}}),e)})))).catch((function(){}))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(e,t,a){u.file_path=e.id},j=function(e){var t=window.open(l["VUE_APP_API_ENDPOINT"]+"/files?filePath="+e.url,"_blank");t.focus()};Object(n["provide"])("updateFormData",m);var h=function(){s.value.$reset()};return{reset_validation:h,env:l,formData:u,validate:s,dataGrid:i,updateMode:a,loading:o,save:f,add:v,resetFormData:p,onUploadSuccees:O,elUpload:c,handlePreview:j}}});te.render=_;var ae=te,ne={id:"surat-ijin-usaha-perdagangan",class:"intro-y col-span-12 lg:col-span-12"},oe={class:"p-5"},re={class:"mt-3"},ie={class:"sm:grid grid-cols-2 gap-5"},ce=Object(n["createTextVNode"])("Click to upload"),le={class:"mt-2 flex items-center gap-2"},ue=Object(n["createTextVNode"])(" Berlaku Selamanya "),de={class:"sm:grid grid-cols-1 gap-5 mt-5"},se={key:0,class:"intro-y input-form my-5"},pe=Object(n["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"}," Status Expired ",-1),be={class:"mt-4 grid grid-cols-2 gap-5 pb-5 border-b"},me={class:"intro-y input-form"},fe=Object(n["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"}," Status ",-1),ve={class:"intro-y input-form"},Oe=Object(n["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"}," Status Verifikasi ",-1),je={class:"flex w-full px-5"},he={key:1,class:"ml-auto"},ge={key:1};function ke(e,t,a,o,r,i){var c=Object(n["resolveComponent"])("form-item"),l=Object(n["resolveComponent"])("el-button"),u=Object(n["resolveComponent"])("el-upload"),d=Object(n["resolveComponent"])("el-date-picker"),s=Object(n["resolveComponent"])("DataGrid"),p=Object(n["resolveComponent"])("document-form");return Object(n["openBlock"])(),Object(n["createBlock"])("div",ne,[Object(n["createVNode"])(p,{title:"Surat Ijin Usaha Perdagangan (SIUP)",itemType:7},{default:Object(n["withCtx"])((function(a){var o=a.allowManage;return[Object(n["createVNode"])("div",oe,[Object(n["createVNode"])("div",re,[Object(n["createVNode"])("div",ie,[Object(n["createVNode"])(c,{label:"Nomor Dokumen",validationData:e.validate.document_number},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{type:"text",class:["form-control w-full",{"border-theme-6":e.validate.document_number.$error}],placeholder:"Nomor SIUP","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.validate.document_number.$model=t})},null,2),[[n["vModelText"],e.validate.document_number.$model]])]})),_:1},8,["validationData"]),Object(n["createVNode"])(c,{label:"Lampiran",validationData:e.validate.file_path},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(u,{ref:"elUpload",class:"upload-demo",action:e.env["VUE_APP_API_ENDPOINT"]+"/files",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},"with-credentials":!0,"on-success":e.onUploadSuccees,"file-list":null!=e.formData.file_path?[{name:"file-siup",url:e.formData.file_path}]:[],"on-preview":e.handlePreview},{tip:Object(n["withCtx"])((function(){return[]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{size:"small",type:"primary"},{default:Object(n["withCtx"])((function(){return[ce]})),_:1})]})),_:1},8,["action","on-success","file-list","on-preview"])]})),_:1},8,["validationData"]),Object(n["createVNode"])(c,{label:"Berlaku Sejak Tanggal",validationData:e.validate.valid_from},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(d,{modelValue:e.validate.valid_from.$model,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.validate.valid_from.$model=t}),class:["form-control",{"border-theme-6":e.validate.valid_from.$error}],placeholder:"YYYY/MM/DD"},null,8,["modelValue","class"])]})),_:1},8,["validationData"]),Object(n["createVNode"])("div",le,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.validate.is_valid_permanently.$model=t}),onChange:t[4]||(t[4]=function(){return e.reset_validation&&e.reset_validation.apply(e,arguments)}),type:"checkbox",class:"form-check-switch"},null,544),[[n["vModelCheckbox"],e.validate.is_valid_permanently.$model]]),ue]),Object(n["createVNode"])(c,{label:"Berlaku Sampai Tanggal"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(d,{disabled:e.formData.is_valid_permanently,modelValue:e.validate.valid_until.$model,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.validate.valid_until.$model=t}),class:["form-control",{"border-theme-6":e.validate.valid_until.$error}],placeholder:"YYYY/MM/DD"},null,8,["disabled","modelValue","class"])]})),_:1})]),Object(n["createVNode"])("div",de,[Object(n["createVNode"])(c,{label:"Dikeluarkan oleh",validationData:e.validate.issued_by},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.validate.issued_by.$model=t}),class:["form-control",{"border-theme-6":e.validate.issued_by.$error}]},null,2),[[n["vModelText"],e.validate.issued_by.$model]])]})),_:1},8,["validationData"])])]),e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("div",se,[pe,Object(n["createVNode"])("input",{value:e.formData.today_date>e.formData.six_before?e.formData.today_date>e.formData.valid_date?"Expired":"Akan Expired":"Belum Expired",disabled:"",type:"text",class:"form-control"},null,8,["value"])])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])("div",be,[Object(n["createVNode"])("div",me,[fe,Object(n["createVNode"])("input",{value:e.formData.is_active?"Active":"Not Activated",type:"text",readonly:"",class:"form-control"},null,8,["value"])]),Object(n["createVNode"])("div",ve,[Oe,Object(n["createVNode"])("input",{value:e.formData.verification_status,type:"text",readonly:"",class:"form-control"},null,8,["value"])])])]),Object(n["createVNode"])("div",je,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-outline-secondary mr-2",onClick:t[7]||(t[7]=function(){var t;return e.dataGrid.clearSelection&&(t=e.dataGrid).clearSelection.apply(t,arguments)})}," Clear Selection ")):Object(n["createCommentVNode"])("",!0),o?(Object(n["openBlock"])(),Object(n["createBlock"])("div",he,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-primary w-24 mr-2",onClick:t[8]||(t[8]=function(){return e.save&&e.save.apply(e,arguments)})}," Save ")):(Object(n["openBlock"])(),Object(n["createBlock"])("div",ge,[Object(n["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-2",onClick:t[9]||(t[9]=function(){return e.resetFormData&&e.resetFormData.apply(e,arguments)})}," Reset "),Object(n["createVNode"])("button",{type:"button",class:"btn bg-theme-9 text-white w-24",onClick:t[10]||(t[10]=function(){return e.add&&e.add.apply(e,arguments)})}," Add ")]))])):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])(s,{allowManage:o,ref:"dataGrid",class:"m-5"},null,8,["allowManage"])]})),_:1})])}var we={key:0},_e={key:1},xe={key:0},ye={key:1};function De(e,t,a,o,r,i){var c=Object(n["resolveComponent"])("DxColumn"),l=Object(n["resolveComponent"])("DxPaging"),u=Object(n["resolveComponent"])("DxPager"),d=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(d,{ref:"root","data-source":e.store,"show-borders":!0,"remote-operations":!0,selection:{mode:"single"},onSelectionChanged:e.onSelectionChanged,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)})},{cellValidTemplate:Object(n["withCtx"])((function(e){var t=e.data;return[t.data.is_valid_permanently?(Object(n["openBlock"])(),Object(n["createBlock"])("span",we," Selamanya ")):(Object(n["openBlock"])(),Object(n["createBlock"])("span",_e,Object(n["toDisplayString"])(t.data.valid_until),1))]})),statusAktivasiCellTemplate:Object(n["withCtx"])((function(e){var t=e.data;return[t.data.is_active?(Object(n["openBlock"])(),Object(n["createBlock"])("span",xe," Active ")):(Object(n["openBlock"])(),Object(n["createBlock"])("span",ye," Non-Active "))]})),cellTemplate:Object(n["withCtx"])((function(t){var a=t.data;return[a.data.is_active?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:1,onClick:function(t){return e.deactivate(a.data.id)},class:"btn btn-sm bg-theme-6 rounded-lg text-white"}," Deactivate ",8,["onClick"])):(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,onClick:function(t){return e.activate(a.data.id)},class:"btn btn-sm bg-theme-9 rounded-lg text-white"}," Activate ",8,["onClick"]))]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{"data-field":"document_number","data-type":"string",caption:"Nomor Dokumen"}),Object(n["createVNode"])(c,{"data-field":"valid_from","data-type":"string",caption:"Berlaku Mulai"}),Object(n["createVNode"])(c,{"data-field":"valid_until",caption:"Berlaku Sampai","cell-template":"cellValidTemplate"}),Object(n["createVNode"])(c,{allowFiltering:!1,"data-field":"is_active",caption:"Status Aktivasi","data-type":"boolean","cell-template":"statusAktivasiCellTemplate"}),"distributor"==e.route.meta.role&&e.allowManage?(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:0,allowFiltering:!1,width:100,"data-field":"id",caption:"Aksi","cell-template":"cellTemplate"})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(l,{"page-size":5}),Object(n["createVNode"])(u,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20]})]})),_:1},8,["data-source","onSelectionChanged"])}var Ce="/document-siup",Ne=function(){return I["a"].get(Ce)},Ve=function(e){return I["a"].post(Ce,e)},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return I["a"].put(Ce+"/".concat(e),t)},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return I["a"].put(Ce+"/".concat(e,"/activate"),t)},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return I["a"].put(Ce+"/".concat(e,"/deactivate"),t)},Re={get:Ne,add:Ve,update:Se,activate:Be,deactivate:Pe},Te=Object(n["defineComponent"])({components:{DxDataGrid:$["DxDataGrid"],DxColumn:$["DxColumn"],DxPaging:$["DxPaging"],DxPager:$["DxPager"],DxSorting:$["DxSorting"],DxHeaderFilter:$["DxHeaderFilter"],DxFilterRow:$["DxFilterRow"]},props:["allowManage"],setup:function(e,t){var a=this,o=(t.emit,Object(n["ref"])(null)),r=Object(L["c"])();function i(e){return void 0!==e&&null!==e&&""!==e}Object(n["onMounted"])((function(){console.log(o.value)}));var c=Object(n["inject"])("env");console.log(c);var l=new M.a({key:"id",load:function(e){var t="?";["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(a){a in e&&i(e[a])&&(t+="".concat(a,"=").concat(JSON.stringify(e[a]),"&"))})),t=t.slice(0,-1);var a="".concat(c["VUE_APP_API_ENDPOINT"],"/document-siup").concat(t);return"admin"==r.meta.role&&(a="".concat(c["VUE_APP_API_ENDPOINT"],"/distributor/").concat(r.params.distributor_id,"/item-details-data/item-type/7")),I["a"].get(a).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),u=Object(n["inject"])("updateFormData");console.log(o);var d=function(e){var t=e.selectedRowsData;u(t[0])},s=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Re.activate(t).then((function(e){y.a.success({title:"Success",position:"bottom-right"}),b()})).catch((function(e){y.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Re.deactivate(t).then((function(e){y.a.success({title:"Success",position:"bottom-right"}),b()})).catch((function(e){y.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){o.value.instance.refresh()},m=function(){o.value.instance.clearSelection()},f=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:b.bind(a)}})};return{store:l,onSelectionChanged:d,activate:s,deactivate:p,onToolbarPreparing:f,refreshDataGrid:b,clearSelection:m,root:o,route:r}}});Te.render=De;var $e=Te,Ae={id:null,document_number:null,document_name:null,file_path:null,issued_by:null,valid_from:null,valid_until:null,is_valid_permanently:!1,verification_status:null,is_active:null,today_date:null,six_before:null,valid_date:null},Me=Object(n["defineComponent"])({components:{DocumentForm:V["a"],FormItem:Q["a"],DataGrid:$e},setup:function(){var e=Object(Z["d"])(),t=e.state.auth.user,a=Object(n["ref"])(!1),o=Object(n["ref"])(!1),r=Object(ee["a"])(),i=Object(n["ref"])(null),c=Object(n["ref"])(null),l=Object(n["inject"])("env"),u=Object(n["reactive"])(Object(N["a"])({},Ae)),d={document_number:{required:W["c"]},file_path:{required:W["c"]},issued_by:{required:W["c"]},valid_from:{required:W["c"]},valid_until:{},is_valid_permanently:{required:W["c"]}},s=Object(J["a"])(d,Object(n["toRefs"])(u)),p=function(){for(var e in Ae)u[e]=Ae[e];s.value.$reset()},b=function(e){if(!e.is_valid_permanently){var t=new Date,a=t.getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0");e.today_date=new Date(a).setHours(0,0,0,0);var o=e.valid_until.split("-"),r=parseInt(o[1])<=6?parseInt(o[0])-1:parseInt(o[0]),i=parseInt(o[1])-6<=0?parseInt(o[1])-6+12:parseInt(o[1])-6,c=r+"-"+i+"-"+o[2];e.six_before=new Date(c).setHours(0,0,0,0),e.valid_date=new Date(e.valid_until).setHours(0,0,0,0)}var l=Object(n["toRefs"])(u);for(var d in Ae)Object.hasOwnProperty.call(e,d)&&(l[d].value=e[d])},m=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!=t?(b(t),a.value=!0):(p(),a.value=!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.value.$touch(),s.value.$invalid?y.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):r.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(C["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.id,a=Object(D["a"])(u,["id"]),a.distributor_id=t.distributor.id,o.value=!0,e.next=5,Re.update(u.id,a).then((function(e){y.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),i.value.clearSelection(),i.value.refreshDataGrid(),p()})).catch((function(e){y.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){o.value=!1}));case 5:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.value.$touch(),s.value.$invalid?(console.log(u),y.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})):r.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(C["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.id,a=Object(D["a"])(u,["id"]),console.log(a),a.distributor_id=t.distributor.id,console.log(a),o.value=!0,e.next=7,Re.add(a).then((function(e){y.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),c.value.clearFiles(),i.value.refreshDataGrid(),p()})).catch((function(e){console.log(e),y.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){o.value=!1}));case 7:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(e,t,a){u.file_path=e.id},j=function(e){var t=window.open(l["VUE_APP_API_ENDPOINT"]+"/files?filePath="+e.url,"_blank");t.focus()};Object(n["provide"])("updateFormData",m);var h=function(){s.value.$reset()};return{reset_validation:h,env:l,formData:u,validate:s,dataGrid:i,updateMode:a,loading:o,save:f,add:v,resetFormData:p,onUploadSuccees:O,elUpload:c,handlePreview:j}}});Me.render=ke;var Ie=Me,Fe=(a("b0c0"),{id:"surat-ijin-tempat-usaha",class:"intro-y col-span-12 lg:col-span-12"}),Ge={class:"p-5"},Ee={class:"mt-3"},Ue={class:"grid grid-cols-1 mb-5"},qe={class:"sm:grid grid-cols-2 gap-5"},He=Object(n["createTextVNode"])("Click to upload"),Ye={class:"mt-2 flex items-center gap-2"},Le=Object(n["createTextVNode"])(" Berlaku Selamanya "),Ke={key:0,class:"intro-y input-form my-5"},ze=Object(n["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"}," Status Expired ",-1),Xe={class:"mt-4 grid grid-cols-2 gap-5 pb-5 border-b"},Je={class:"intro-y input-form"},We=Object(n["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"}," Status ",-1),Qe={class:"intro-y input-form"},Ze=Object(n["createVNode"])("label",{class:"form-label w-full flex flex-col sm:flex-row"}," Status Verifikasi ",-1),et={class:"flex w-full px-5"},tt={key:1,class:"ml-auto"},at={key:1};function nt(e,t,a,o,r,i){var c=Object(n["resolveComponent"])("el-option"),l=Object(n["resolveComponent"])("el-select"),u=Object(n["resolveComponent"])("form-item"),d=Object(n["resolveComponent"])("el-button"),s=Object(n["resolveComponent"])("el-upload"),p=Object(n["resolveComponent"])("el-date-picker"),b=Object(n["resolveComponent"])("DataGrid"),m=Object(n["resolveComponent"])("document-form");return Object(n["openBlock"])(),Object(n["createBlock"])("div",Fe,[Object(n["createVNode"])(m,{title:"Surat Ijin Tempat Usaha (SITU/SKDU/Ijin Lokasi)",isRegional:!0,itemType:8},{default:Object(n["withCtx"])((function(a){var o=a.allowManage;return[Object(n["createVNode"])("div",Ge,[Object(n["createVNode"])("div",Ee,[Object(n["createVNode"])("div",Ue,[Object(n["createVNode"])(u,{label:"Region","rules-text":"Required",validationData:e.validate.region_code},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{clearable:"",modelValue:e.formData.region_code,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.formData.region_code=t}),class:["form-control",{"border-theme-6":e.validate.region_code.$error}],filterable:""},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.distributorRegions,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:e.code,label:e.name,value:e.code},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","class"])]})),_:1},8,["validationData"])]),Object(n["createVNode"])("div",qe,[Object(n["createVNode"])(u,{label:"Nomor Dokumen",validationData:e.validate.document_number},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])(Object(n["createVNode"])("input",{type:"text",class:["form-control w-full",{"border-theme-6":e.validate.document_number.$error}],placeholder:"Nomor SIDU/SKDU","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.validate.document_number.$model=t})},null,2),[[n["vModelText"],e.validate.document_number.$model]])]})),_:1},8,["validationData"]),Object(n["createVNode"])(u,{label:"Lampiran",validationData:e.validate.file_path},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(s,{ref:"elUpload",class:"upload-demo",action:e.env["VUE_APP_API_ENDPOINT"]+"/files",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},"with-credentials":!0,"on-success":e.onUploadSuccees,"file-list":null!=e.formData.file_path?[{name:"file-situ",url:e.formData.file_path}]:[],"on-preview":e.handlePreview},{tip:Object(n["withCtx"])((function(){return[]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(d,{size:"small",type:"primary"},{default:Object(n["withCtx"])((function(){return[He]})),_:1})]})),_:1},8,["action","on-success","file-list","on-preview"])]})),_:1},8,["validationData"]),Object(n["createVNode"])(u,{label:"Berlaku Sampai",validationData:e.validate.valid_until},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(p,{modelValue:e.validate.valid_until.$model,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.validate.valid_until.$model=t}),class:["form-control",{"border-theme-6":e.validate.valid_until.$error}],placeholder:"YYYY/MM/DD",disabled:e.formData.is_valid_permanently},null,8,["modelValue","class","disabled"])]})),_:1},8,["validationData"]),Object(n["createVNode"])("div",Ye,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.validate.is_valid_permanently.$model=t}),type:"checkbox",class:"form-check-switch",onChange:t[5]||(t[5]=function(){return e.reset_validation&&e.reset_validation.apply(e,arguments)})},null,544),[[n["vModelCheckbox"],e.validate.is_valid_permanently.$model]]),Le])])]),e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("div",Ke,[ze,Object(n["createVNode"])("input",{value:e.formData.today_date>e.formData.six_before?e.formData.today_date>e.formData.valid_date?"Expired":"Akan Expired":"Belum Expired",disabled:"",type:"text",class:"form-control"},null,8,["value"])])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])("div",Xe,[Object(n["createVNode"])("div",Je,[We,Object(n["createVNode"])("input",{value:e.formData.is_active?"Active":"Not Activated",type:"text",readonly:"",class:"form-control"},null,8,["value"])]),Object(n["createVNode"])("div",Qe,[Ze,Object(n["createVNode"])("input",{value:e.formData.verification_status,type:"text",readonly:"",class:"form-control"},null,8,["value"])])])]),Object(n["createVNode"])("div",et,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-outline-secondary mr-2",onClick:t[6]||(t[6]=function(){var t;return e.dataGrid.clearSelection&&(t=e.dataGrid).clearSelection.apply(t,arguments)})}," Clear Selection ")):Object(n["createCommentVNode"])("",!0),o?(Object(n["openBlock"])(),Object(n["createBlock"])("div",tt,[e.updateMode?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,type:"button",class:"btn btn-primary w-24 mr-2",onClick:t[7]||(t[7]=function(){return e.save&&e.save.apply(e,arguments)})}," Save ")):(Object(n["openBlock"])(),Object(n["createBlock"])("div",at,[Object(n["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary w-24 mr-2",onClick:t[8]||(t[8]=function(){return e.resetFormData&&e.resetFormData.apply(e,arguments)})}," Reset "),Object(n["createVNode"])("button",{type:"button",class:"btn bg-theme-9 text-white w-24",onClick:t[9]||(t[9]=function(){return e.add&&e.add.apply(e,arguments)})}," Add ")]))])):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])(b,{ref:"dataGrid",class:"m-5",allowManage:o},null,8,["allowManage"])]})),_:1})])}var ot={key:0},rt={key:1},it={key:0},ct={key:1};function lt(e,t,a,o,r,i){var c=Object(n["resolveComponent"])("DxColumn"),l=Object(n["resolveComponent"])("DxFilterRow"),u=Object(n["resolveComponent"])("DxHeaderFilter"),d=Object(n["resolveComponent"])("DxPaging"),s=Object(n["resolveComponent"])("DxPager"),p=Object(n["resolveComponent"])("DxDataGrid");return Object(n["openBlock"])(),Object(n["createBlock"])(p,{ref:"root","data-source":e.store,"show-borders":!0,"remote-operations":!0,selection:{mode:"single"},onSelectionChanged:e.onSelectionChanged,onToolbarPreparing:t[1]||(t[1]=function(t){return e.onToolbarPreparing(t)})},{cellValidTemplate:Object(n["withCtx"])((function(e){var t=e.data;return[t.data.is_valid_permanently?(Object(n["openBlock"])(),Object(n["createBlock"])("span",ot," Selamanya ")):(Object(n["openBlock"])(),Object(n["createBlock"])("span",rt,Object(n["toDisplayString"])(t.data.valid_until),1))]})),statusAktivasiCellTemplate:Object(n["withCtx"])((function(e){var t=e.data;return[t.data.is_active?(Object(n["openBlock"])(),Object(n["createBlock"])("span",it," Active ")):(Object(n["openBlock"])(),Object(n["createBlock"])("span",ct," Non-Active "))]})),cellTemplate:Object(n["withCtx"])((function(t){var a=t.data;return[a.data.is_active?(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:1,onClick:function(t){return e.deactivate(a.data.id)},class:"btn btn-sm bg-theme-6 rounded-lg text-white"}," Deactivate ",8,["onClick"])):(Object(n["openBlock"])(),Object(n["createBlock"])("button",{key:0,onClick:function(t){return e.activate(a.data.id)},class:"btn btn-sm bg-theme-9 rounded-lg text-white"}," Activate ",8,["onClick"]))]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{"data-field":"document_number","data-type":"string",caption:"Nomor Dokumen"}),Object(n["createVNode"])(c,{"data-field":"valid_until",caption:"Berlaku Sampai","cell-template":"cellValidTemplate"}),Object(n["createVNode"])(c,{"data-field":"region.name","data-type":"string",caption:"Region","header-filter":{dataSource:e.availableRegions}},null,8,["header-filter"]),Object(n["createVNode"])(c,{allowFiltering:!1,"data-field":"is_active",caption:"Status Aktivasi","data-type":"boolean","cell-template":"statusAktivasiCellTemplate"}),"distributor"==e.route.meta.role&&e.allowManage?(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:0,allowFiltering:!1,width:100,"data-field":"id",caption:"Aksi","cell-template":"cellTemplate"})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(l,{visible:!0}),Object(n["createVNode"])(u,{visible:!0}),Object(n["createVNode"])(d,{"page-size":5}),Object(n["createVNode"])(s,{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20]})]})),_:1},8,["data-source","onSelectionChanged"])}a("d81d");var ut="/document-situ",dt=function(){return I["a"].get(ut)},st=function(e){return I["a"].post(ut,e)},pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return I["a"].put(ut+"/".concat(e),t)},bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return I["a"].put(ut+"/".concat(e,"/activate"),t)},mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return I["a"].put(ut+"/".concat(e,"/deactivate"),t)},ft={get:dt,add:st,update:pt,activate:bt,deactivate:mt},vt=Object(n["defineComponent"])({components:{DxDataGrid:$["DxDataGrid"],DxColumn:$["DxColumn"],DxPaging:$["DxPaging"],DxPager:$["DxPager"],DxSorting:$["DxSorting"],DxHeaderFilter:$["DxHeaderFilter"],DxFilterRow:$["DxFilterRow"]},props:["allowManage"],setup:function(e,t){var a=this,o=(t.emit,Object(n["ref"])(null)),r=Object(L["c"])();function i(e){return void 0!==e&&null!==e&&""!==e}Object(n["onMounted"])((function(){console.log(o.value)}));var c=Object(n["inject"])("env");console.log(c);var l=new M.a({key:"id",load:function(e){var t="?";["skip","take","requireTotalCount","requireGroupCount","sort","filter","totalSummary","group","groupSummary"].forEach((function(a){a in e&&i(e[a])&&(t+="".concat(a,"=").concat(JSON.stringify(e[a]),"&"))})),t=t.slice(0,-1);var a="".concat(c["VUE_APP_API_ENDPOINT"],"/document-situ").concat(t);return"admin"==r.meta.role&&(a="".concat(c["VUE_APP_API_ENDPOINT"],"/distributor/").concat(r.params.distributor_id,"/item-details-data/item-type/8")),I["a"].get(a).then((function(e){return e.data})).catch((function(){throw"Data Loading Error"}))}}),u=Object(n["inject"])("updateFormData");console.log(o);var d=function(e){var t=e.selectedRowsData;u(t[0])},s=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ft.activate(t).then((function(e){y.a.success({title:"Success",position:"bottom-right"}),b()})).catch((function(e){y.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ft.deactivate(t).then((function(e){y.a.success({title:"Success",position:"bottom-right"}),b()})).catch((function(e){y.a.error({title:"Failed",position:"bottom-right"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){o.value.instance.refresh()},m=function(){o.value.instance.clearSelection()},f=function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"refresh",onClick:b.bind(a)}})},v=Object(n["inject"])("distributorRegions"),O=Object(n["computed"])((function(){return v.value.map((function(e){return{text:e.name,value:["region_code","=",e.code]}}))}));return{store:l,onSelectionChanged:d,activate:s,deactivate:p,onToolbarPreparing:f,refreshDataGrid:b,clearSelection:m,root:o,availableRegions:O,route:r}}});vt.render=lt;var Ot=vt,jt={id:null,document_number:null,document_name:null,file_path:null,issued_by:null,valid_from:null,valid_until:null,is_valid_permanently:!1,verification_status:null,is_active:null,region_code:null,today_date:null,six_before:null,valid_date:null},ht=a("b405"),gt=Object(n["defineComponent"])({components:{DocumentForm:V["a"],FormItem:Q["a"],DataGrid:Ot},setup:function(){Object(L["c"])();var e=Object(Z["d"])(),t=e.state.auth.user,a=Object(n["ref"])(!1),o=Object(n["ref"])(!1),r=Object(ee["a"])(),i=Object(n["ref"])(null),c=Object(n["ref"])(null),l=Object(n["inject"])("env"),u=Object(n["reactive"])(Object(N["a"])({},jt)),d={document_number:{required:W["c"]},file_path:{required:W["c"]},valid_until:{},is_valid_permanently:{required:W["c"]},region_code:{required:W["c"]}},s=Object(J["a"])(d,Object(n["toRefs"])(u)),p=function(){for(var e in jt)u[e]=jt[e];s.value.$reset()},b=function(e){if(!e.is_valid_permanently){var t=new Date,a=t.getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0");e.today_date=new Date(a).setHours(0,0,0,0);var o=e.valid_until.split("-"),r=parseInt(o[1])<=6?parseInt(o[0])-1:parseInt(o[0]),i=parseInt(o[1])-6<=0?parseInt(o[1])-6+12:parseInt(o[1])-6,c=r+"-"+i+"-"+o[2];e.six_before=new Date(c).setHours(0,0,0,0),e.valid_date=new Date(e.valid_until).setHours(0,0,0,0)}var l=Object(n["toRefs"])(u);for(var d in jt)Object.hasOwnProperty.call(e,d)&&(l[d].value=e[d])},m=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!=t?(b(t),a.value=!0):(p(),a.value=!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.value.$touch(),s.value.$invalid?y.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"}):r.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(C["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.id,a=Object(D["a"])(u,["id"]),a.distributor_id=t.distributor.id,o.value=!0,e.next=5,ft.update(u.id,a).then((function(e){y.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),i.value.refreshDataGrid()})).catch((function(e){y.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){o.value=!1}));case 5:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.value.$touch(),s.value.$invalid?(console.log(u),y.a.error({title:"Submit Gagal",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})):r.$confirm("Simpan data. Lanjutkan?","Konfirmasi",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning",closeOnClickModal:!1}).then(Object(C["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.id,a=Object(D["a"])(u,["id"]),console.log(a),a.distributor_id=t.distributor.id,console.log(a),o.value=!0,e.next=7,ft.add(a).then((function(e){y.a.success({title:"Data berhasil disimpan",position:"bottom-right"}),c.value.clearFiles(),i.value.refreshDataGrid(),p()})).catch((function(e){console.log(e),y.a.error({title:"Data gagal disimpan",message:"Silahkan periksa form sekali lagi",position:"bottom-right"})})).finally((function(){o.value=!1}));case 7:case"end":return e.stop()}}),e)})))).catch((function(){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(e,t,a){u.file_path=e.id},j=function(e){var t=window.open(l["VUE_APP_API_ENDPOINT"]+"/files?filePath="+e.url,"_blank");t.focus()};Object(n["provide"])("updateFormData",m);var h=Object(ht["a"])(t),g=h.distributorRegions;Object(n["provide"])("distributorRegions",g);var k=function(){s.value.$reset()};return{reset_validation:k,env:l,formData:u,validate:s,dataGrid:i,updateMode:a,loading:o,save:f,add:v,resetFormData:p,onUploadSuccees:O,elUpload:c,handlePreview:j,distributorRegions:g}}});gt.render=nt;var kt=gt,wt=Object(n["defineComponent"])({components:{NibPerusahaan:ae,SiupPerusahaan:Ie,SituPerusahaan:kt},methods:{scrollToAnchor:function(){var e=this;this.$nextTick((function(){if(e.$route.hash){var t=document.querySelector(e.$route.hash);t&&window.scrollTo(0,t.offsetTop)}}))}},mounted:function(){this.scrollToAnchor()},updated:function(){this.scrollToAnchor()},watch:{$route:function(e,t){this.scrollToAnchor()}}});wt.render=r;t["default"]=wt}}]);